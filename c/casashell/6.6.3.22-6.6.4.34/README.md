# Comparing `tmp/casashell-6.6.3.22-py3-none-any.whl.zip` & `tmp/casashell-6.6.4.34-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,145 +1,142 @@
-Zip file size: 1035501 bytes, number of entries: 143
--rw-r--r--  2.0 unx    25454 b- defN 24-Jan-17 15:26 casashell/LICENSE.txt
--rw-r--r--  2.0 unx    14048 b- defN 24-Jan-17 15:26 casashell/__init__.py
--rw-r--r--  2.0 unx       71 b- defN 24-Jan-17 15:26 casashell/__main__.py
--rw-r--r--  2.0 unx    53336 b- defN 24-Jan-17 15:26 casashell/private/accor.py
--rw-r--r--  2.0 unx    55021 b- defN 24-Jan-17 15:26 casashell/private/apparentsens.py
--rw-r--r--  2.0 unx    52601 b- defN 24-Jan-17 15:26 casashell/private/applycal.py
--rw-r--r--  2.0 unx    10924 b- defN 24-Jan-17 15:26 casashell/private/asdmsummary.py
--rw-r--r--  2.0 unx    79086 b- defN 24-Jan-17 15:26 casashell/private/bandpass.py
--rw-r--r--  2.0 unx    52102 b- defN 24-Jan-17 15:26 casashell/private/blcal.py
--rw-r--r--  2.0 unx     4071 b- defN 24-Jan-17 15:16 casashell/private/builtin_mgr.py
--rw-r--r--  2.0 unx    14814 b- defN 24-Jan-17 15:26 casashell/private/calstat.py
--rw-r--r--  2.0 unx    18441 b- defN 24-Jan-17 15:26 casashell/private/clearcal.py
--rw-r--r--  2.0 unx     8772 b- defN 24-Jan-17 15:26 casashell/private/clearstat.py
--rw-r--r--  2.0 unx    29016 b- defN 24-Jan-17 15:26 casashell/private/concat.py
--rw-r--r--  2.0 unx     2776 b- defN 24-Jan-17 15:16 casashell/private/config.py
--rw-r--r--  2.0 unx    15298 b- defN 24-Jan-17 15:26 casashell/private/conjugatevis.py
--rw-r--r--  2.0 unx    51396 b- defN 24-Jan-17 15:26 casashell/private/cvel.py
--rw-r--r--  2.0 unx    63195 b- defN 24-Jan-17 15:26 casashell/private/cvel2.py
--rw-r--r--  2.0 unx    90744 b- defN 24-Jan-17 15:26 casashell/private/deconvolve.py
--rw-r--r--  2.0 unx    18805 b- defN 24-Jan-17 15:26 casashell/private/defintent.py
--rw-r--r--  2.0 unx    15863 b- defN 24-Jan-17 15:26 casashell/private/delmod.py
--rw-r--r--  2.0 unx    24305 b- defN 24-Jan-17 15:26 casashell/private/exportasdm.py
--rw-r--r--  2.0 unx    27664 b- defN 24-Jan-17 15:26 casashell/private/exportfits.py
--rw-r--r--  2.0 unx    34983 b- defN 24-Jan-17 15:26 casashell/private/exportuvfits.py
--rw-r--r--  2.0 unx    19675 b- defN 24-Jan-17 15:26 casashell/private/feather.py
--rw-r--r--  2.0 unx    20274 b- defN 24-Jan-17 15:26 casashell/private/fixplanets.py
--rw-r--r--  2.0 unx    23585 b- defN 24-Jan-17 15:26 casashell/private/fixvis.py
--rw-r--r--  2.0 unx    44974 b- defN 24-Jan-17 15:26 casashell/private/flagcmd.py
--rw-r--r--  2.0 unx   208223 b- defN 24-Jan-17 15:26 casashell/private/flagdata.py
--rw-r--r--  2.0 unx    20768 b- defN 24-Jan-17 15:26 casashell/private/flagmanager.py
--rw-r--r--  2.0 unx    38137 b- defN 24-Jan-17 15:26 casashell/private/fluxscale.py
--rw-r--r--  2.0 unx    66839 b- defN 24-Jan-17 15:26 casashell/private/fringefit.py
--rw-r--r--  2.0 unx    24623 b- defN 24-Jan-17 15:26 casashell/private/ft.py
--rw-r--r--  2.0 unx    83939 b- defN 24-Jan-17 15:26 casashell/private/gaincal.py
--rw-r--r--  2.0 unx    40968 b- defN 24-Jan-17 15:26 casashell/private/gencal.py
--rw-r--r--  2.0 unx    22888 b- defN 24-Jan-17 15:26 casashell/private/getcalmodvla.py
--rw-r--r--  2.0 unx    23173 b- defN 24-Jan-17 15:26 casashell/private/getephemtable.py
--rw-r--r--  2.0 unx    38750 b- defN 24-Jan-17 15:26 casashell/private/hanningsmooth.py
--rw-r--r--  2.0 unx    56229 b- defN 24-Jan-17 15:26 casashell/private/imbaseline.py
--rw-r--r--  2.0 unx    28464 b- defN 24-Jan-17 15:26 casashell/private/imcollapse.py
--rw-r--r--  2.0 unx    21629 b- defN 24-Jan-17 15:26 casashell/private/imcontsub.py
--rw-r--r--  2.0 unx    42769 b- defN 24-Jan-17 15:26 casashell/private/imdev.py
--rw-r--r--  2.0 unx    64109 b- defN 24-Jan-17 15:26 casashell/private/imfit.py
--rw-r--r--  2.0 unx    21257 b- defN 24-Jan-17 15:26 casashell/private/imhead.py
--rw-r--r--  2.0 unx    18162 b- defN 24-Jan-17 15:26 casashell/private/imhistory.py
--rw-r--r--  2.0 unx    44261 b- defN 24-Jan-17 15:26 casashell/private/immath.py
--rw-r--r--  2.0 unx    31022 b- defN 24-Jan-17 15:26 casashell/private/immoments.py
--rw-r--r--  2.0 unx    28944 b- defN 24-Jan-17 15:26 casashell/private/impbcor.py
--rw-r--r--  2.0 unx    16967 b- defN 24-Jan-17 15:26 casashell/private/importasap.py
--rw-r--r--  2.0 unx    71439 b- defN 24-Jan-17 15:26 casashell/private/importasdm.py
--rw-r--r--  2.0 unx    24734 b- defN 24-Jan-17 15:26 casashell/private/importatca.py
--rw-r--r--  2.0 unx    24688 b- defN 24-Jan-17 15:26 casashell/private/importfits.py
--rw-r--r--  2.0 unx    18543 b- defN 24-Jan-17 15:26 casashell/private/importfitsidi.py
--rw-r--r--  2.0 unx    13942 b- defN 24-Jan-17 15:26 casashell/private/importgmrt.py
--rw-r--r--  2.0 unx    21654 b- defN 24-Jan-17 15:26 casashell/private/importmiriad.py
--rw-r--r--  2.0 unx    15624 b- defN 24-Jan-17 15:26 casashell/private/importnro.py
--rw-r--r--  2.0 unx    14493 b- defN 24-Jan-17 15:26 casashell/private/importuvfits.py
--rw-r--r--  2.0 unx    30488 b- defN 24-Jan-17 15:26 casashell/private/importvla.py
--rw-r--r--  2.0 unx    43072 b- defN 24-Jan-17 15:26 casashell/private/impv.py
--rw-r--r--  2.0 unx    30219 b- defN 24-Jan-17 15:26 casashell/private/imrebin.py
--rw-r--r--  2.0 unx    17650 b- defN 24-Jan-17 15:26 casashell/private/imreframe.py
--rw-r--r--  2.0 unx    43883 b- defN 24-Jan-17 15:26 casashell/private/imregrid.py
--rw-r--r--  2.0 unx    45155 b- defN 24-Jan-17 15:26 casashell/private/imsmooth.py
--rw-r--r--  2.0 unx    58038 b- defN 24-Jan-17 15:26 casashell/private/imstat.py
--rw-r--r--  2.0 unx    30789 b- defN 24-Jan-17 15:26 casashell/private/imsubimage.py
--rw-r--r--  2.0 unx    16131 b- defN 24-Jan-17 15:26 casashell/private/imtrans.py
--rw-r--r--  2.0 unx    20602 b- defN 24-Jan-17 15:26 casashell/private/imval.py
--rw-r--r--  2.0 unx      169 b- defN 24-Jan-17 15:16 casashell/private/init_begin_startup.py
--rw-r--r--  2.0 unx    12535 b- defN 24-Jan-17 15:16 casashell/private/init_doc.py
--rw-r--r--  2.0 unx      455 b- defN 24-Jan-17 15:16 casashell/private/init_pipeline.py
--rw-r--r--  2.0 unx     4037 b- defN 24-Jan-17 15:16 casashell/private/init_subparam.py
--rw-r--r--  2.0 unx     8588 b- defN 24-Jan-17 15:16 casashell/private/init_system.py
--rw-r--r--  2.0 unx     1027 b- defN 24-Jan-17 15:16 casashell/private/init_welcome.py
--rw-r--r--  2.0 unx    24686 b- defN 24-Jan-17 15:26 casashell/private/initweights.py
--rw-r--r--  2.0 unx    31433 b- defN 24-Jan-17 15:26 casashell/private/listcal.py
--rw-r--r--  2.0 unx    10772 b- defN 24-Jan-17 15:26 casashell/private/listfits.py
--rw-r--r--  2.0 unx    10733 b- defN 24-Jan-17 15:26 casashell/private/listhistory.py
--rw-r--r--  2.0 unx    44137 b- defN 24-Jan-17 15:26 casashell/private/listobs.py
--rw-r--r--  2.0 unx    16171 b- defN 24-Jan-17 15:26 casashell/private/listpartition.py
--rw-r--r--  2.0 unx    11574 b- defN 24-Jan-17 15:26 casashell/private/listsdm.py
--rw-r--r--  2.0 unx    43869 b- defN 24-Jan-17 15:26 casashell/private/listvis.py
--rw-r--r--  2.0 unx    10150 b- defN 24-Jan-17 15:26 casashell/private/load_tasks.py
--rw-r--r--  2.0 unx     2900 b- defN 24-Jan-17 15:26 casashell/private/load_tools.py
--rw-r--r--  2.0 unx    31993 b- defN 24-Jan-17 15:26 casashell/private/makemask.py
--rw-r--r--  2.0 unx   128471 b- defN 24-Jan-17 15:26 casashell/private/mstransform.py
--rw-r--r--  2.0 unx    36453 b- defN 24-Jan-17 15:26 casashell/private/msuvbin.py
--rw-r--r--  2.0 unx    24168 b- defN 24-Jan-17 15:26 casashell/private/nrobeamaverage.py
--rw-r--r--  2.0 unx    52668 b- defN 24-Jan-17 15:26 casashell/private/partition.py
--rw-r--r--  2.0 unx    29090 b- defN 24-Jan-17 15:26 casashell/private/phaseshift.py
--rw-r--r--  2.0 unx    22335 b- defN 24-Jan-17 15:26 casashell/private/plotants.py
--rw-r--r--  2.0 unx    97579 b- defN 24-Jan-17 15:26 casashell/private/plotbandpass.py
--rw-r--r--  2.0 unx    43760 b- defN 24-Jan-17 15:26 casashell/private/plotprofilemap.py
--rw-r--r--  2.0 unx    15833 b- defN 24-Jan-17 15:26 casashell/private/plotweather.py
--rw-r--r--  2.0 unx    62604 b- defN 24-Jan-17 15:26 casashell/private/polcal.py
--rw-r--r--  2.0 unx    15250 b- defN 24-Jan-17 15:26 casashell/private/polfromgain.py
--rw-r--r--  2.0 unx    34294 b- defN 24-Jan-17 15:26 casashell/private/predictcomp.py
--rw-r--r--  2.0 unx    16993 b- defN 24-Jan-17 15:26 casashell/private/rerefant.py
--rw-r--r--  2.0 unx    29985 b- defN 24-Jan-17 15:26 casashell/private/rmfit.py
--rw-r--r--  2.0 unx    10851 b- defN 24-Jan-17 15:26 casashell/private/rmtables.py
--rw-r--r--  2.0 unx    67386 b- defN 24-Jan-17 15:26 casashell/private/sdatmcor.py
--rw-r--r--  2.0 unx    91011 b- defN 24-Jan-17 15:26 casashell/private/sdbaseline.py
--rw-r--r--  2.0 unx    50237 b- defN 24-Jan-17 15:26 casashell/private/sdcal.py
--rw-r--r--  2.0 unx    49040 b- defN 24-Jan-17 15:26 casashell/private/sdfit.py
--rw-r--r--  2.0 unx    31120 b- defN 24-Jan-17 15:26 casashell/private/sdfixscan.py
--rw-r--r--  2.0 unx    37515 b- defN 24-Jan-17 15:26 casashell/private/sdgaincal.py
--rw-r--r--  2.0 unx    76833 b- defN 24-Jan-17 15:26 casashell/private/sdimaging.py
--rw-r--r--  2.0 unx   274633 b- defN 24-Jan-17 15:26 casashell/private/sdintimaging.py
--rw-r--r--  2.0 unx    26923 b- defN 24-Jan-17 15:26 casashell/private/sdpolaverage.py
--rw-r--r--  2.0 unx    26705 b- defN 24-Jan-17 15:26 casashell/private/sdsidebandsplit.py
--rw-r--r--  2.0 unx    32983 b- defN 24-Jan-17 15:26 casashell/private/sdsmooth.py
--rw-r--r--  2.0 unx    26441 b- defN 24-Jan-17 15:26 casashell/private/sdtimeaverage.py
--rw-r--r--  2.0 unx    65709 b- defN 24-Jan-17 15:26 casashell/private/setjy.py
--rw-r--r--  2.0 unx    66516 b- defN 24-Jan-17 15:26 casashell/private/simalma.py
--rw-r--r--  2.0 unx    70720 b- defN 24-Jan-17 15:26 casashell/private/simanalyze.py
--rw-r--r--  2.0 unx    85369 b- defN 24-Jan-17 15:26 casashell/private/simobserve.py
--rw-r--r--  2.0 unx    37855 b- defN 24-Jan-17 15:26 casashell/private/slsearch.py
--rw-r--r--  2.0 unx    18927 b- defN 24-Jan-17 15:26 casashell/private/smoothcal.py
--rw-r--r--  2.0 unx   113912 b- defN 24-Jan-17 15:26 casashell/private/specfit.py
--rw-r--r--  2.0 unx    32224 b- defN 24-Jan-17 15:26 casashell/private/specflux.py
--rw-r--r--  2.0 unx    36747 b- defN 24-Jan-17 15:26 casashell/private/specsmooth.py
--rw-r--r--  2.0 unx    12577 b- defN 24-Jan-17 15:26 casashell/private/splattotable.py
--rw-r--r--  2.0 unx    48466 b- defN 24-Jan-17 15:26 casashell/private/split.py
--rw-r--r--  2.0 unx    59838 b- defN 24-Jan-17 15:26 casashell/private/spxfit.py
--rw-r--r--  2.0 unx      869 b- defN 24-Jan-17 15:16 casashell/private/stack_manip.py
--rw-r--r--  2.0 unx    61983 b- defN 24-Jan-17 15:26 casashell/private/statwt.py
--rw-r--r--  2.0 unx   301380 b- defN 24-Jan-17 15:26 casashell/private/tclean.py
--rw-r--r--  2.0 unx    18032 b- defN 24-Jan-17 15:26 casashell/private/testconcat.py
--rw-r--r--  2.0 unx    78345 b- defN 24-Jan-17 15:26 casashell/private/tsdimaging.py
--rw-r--r--  2.0 unx     1851 b- defN 24-Jan-17 15:16 casashell/private/userconfig.py
--rw-r--r--  2.0 unx    35768 b- defN 24-Jan-17 15:26 casashell/private/uvcontsub.py
--rw-r--r--  2.0 unx    27241 b- defN 24-Jan-17 15:26 casashell/private/uvcontsub_old.py
--rw-r--r--  2.0 unx    34504 b- defN 24-Jan-17 15:26 casashell/private/uvmodelfit.py
--rw-r--r--  2.0 unx    13030 b- defN 24-Jan-17 15:26 casashell/private/uvsub.py
--rw-r--r--  2.0 unx    25730 b- defN 24-Jan-17 15:26 casashell/private/virtualconcat.py
--rw-r--r--  2.0 unx    20566 b- defN 24-Jan-17 15:26 casashell/private/vishead.py
--rw-r--r--  2.0 unx    56677 b- defN 24-Jan-17 15:26 casashell/private/visstat.py
--rw-r--r--  2.0 unx    33392 b- defN 24-Jan-17 15:26 casashell/private/widebandpbcor.py
--rw-r--r--  2.0 unx     1954 b- defN 24-Jan-17 15:16 casashell/private/ttconfig/casataskrc.py
--rw-r--r--  2.0 unx     1880 b- defN 24-Jan-17 15:16 casashell/private/ttconfig/casatoolrc.py
--rw-r--r--  2.0 unx      688 b- defN 24-Jan-17 15:26 casashell-6.6.3.22.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Jan-17 15:26 casashell-6.6.3.22.dist-info/WHEEL
--rw-r--r--  2.0 unx       10 b- defN 24-Jan-17 15:26 casashell-6.6.3.22.dist-info/top_level.txt
--rw-rw-r--  2.0 unx    12522 b- defN 24-Jan-17 15:26 casashell-6.6.3.22.dist-info/RECORD
-143 files, 5406323 bytes uncompressed, 1016001 bytes compressed:  81.2%
+Zip file size: 1036926 bytes, number of entries: 140
+-rw-r--r--  2.0 unx    25454 b- defN 24-May-25 15:52 casashell/LICENSE.txt
+-rw-r--r--  2.0 unx    20829 b- defN 24-May-25 15:52 casashell/__init__.py
+-rw-r--r--  2.0 unx       71 b- defN 24-May-25 15:52 casashell/__main__.py
+-rw-r--r--  2.0 unx    53336 b- defN 24-May-25 15:52 casashell/private/accor.py
+-rw-r--r--  2.0 unx    55021 b- defN 24-May-25 15:52 casashell/private/apparentsens.py
+-rw-r--r--  2.0 unx    52601 b- defN 24-May-25 15:52 casashell/private/applycal.py
+-rw-r--r--  2.0 unx    10924 b- defN 24-May-25 15:52 casashell/private/asdmsummary.py
+-rw-r--r--  2.0 unx    79085 b- defN 24-May-25 15:52 casashell/private/bandpass.py
+-rw-r--r--  2.0 unx    52102 b- defN 24-May-25 15:52 casashell/private/blcal.py
+-rw-r--r--  2.0 unx     4071 b- defN 24-May-25 15:36 casashell/private/builtin_mgr.py
+-rw-r--r--  2.0 unx    14814 b- defN 24-May-25 15:52 casashell/private/calstat.py
+-rw-r--r--  2.0 unx    18441 b- defN 24-May-25 15:52 casashell/private/clearcal.py
+-rw-r--r--  2.0 unx     8772 b- defN 24-May-25 15:52 casashell/private/clearstat.py
+-rw-r--r--  2.0 unx    29016 b- defN 24-May-25 15:52 casashell/private/concat.py
+-rw-r--r--  2.0 unx    15298 b- defN 24-May-25 15:52 casashell/private/conjugatevis.py
+-rw-r--r--  2.0 unx    51396 b- defN 24-May-25 15:52 casashell/private/cvel.py
+-rw-r--r--  2.0 unx    63195 b- defN 24-May-25 15:52 casashell/private/cvel2.py
+-rw-r--r--  2.0 unx    90744 b- defN 24-May-25 15:52 casashell/private/deconvolve.py
+-rw-r--r--  2.0 unx    18805 b- defN 24-May-25 15:52 casashell/private/defintent.py
+-rw-r--r--  2.0 unx    15863 b- defN 24-May-25 15:52 casashell/private/delmod.py
+-rw-r--r--  2.0 unx    24305 b- defN 24-May-25 15:52 casashell/private/exportasdm.py
+-rw-r--r--  2.0 unx    27664 b- defN 24-May-25 15:52 casashell/private/exportfits.py
+-rw-r--r--  2.0 unx    34983 b- defN 24-May-25 15:52 casashell/private/exportuvfits.py
+-rw-r--r--  2.0 unx    19675 b- defN 24-May-25 15:52 casashell/private/feather.py
+-rw-r--r--  2.0 unx    20249 b- defN 24-May-25 15:52 casashell/private/fixplanets.py
+-rw-r--r--  2.0 unx    23585 b- defN 24-May-25 15:52 casashell/private/fixvis.py
+-rw-r--r--  2.0 unx    44974 b- defN 24-May-25 15:52 casashell/private/flagcmd.py
+-rw-r--r--  2.0 unx   208421 b- defN 24-May-25 15:52 casashell/private/flagdata.py
+-rw-r--r--  2.0 unx    20768 b- defN 24-May-25 15:52 casashell/private/flagmanager.py
+-rw-r--r--  2.0 unx    38137 b- defN 24-May-25 15:52 casashell/private/fluxscale.py
+-rw-r--r--  2.0 unx    66839 b- defN 24-May-25 15:52 casashell/private/fringefit.py
+-rw-r--r--  2.0 unx    24623 b- defN 24-May-25 15:52 casashell/private/ft.py
+-rw-r--r--  2.0 unx    84758 b- defN 24-May-25 15:52 casashell/private/gaincal.py
+-rw-r--r--  2.0 unx    40968 b- defN 24-May-25 15:52 casashell/private/gencal.py
+-rw-r--r--  2.0 unx    21423 b- defN 24-May-25 15:52 casashell/private/getantposalma.py
+-rw-r--r--  2.0 unx    22888 b- defN 24-May-25 15:52 casashell/private/getcalmodvla.py
+-rw-r--r--  2.0 unx    23173 b- defN 24-May-25 15:52 casashell/private/getephemtable.py
+-rw-r--r--  2.0 unx    38750 b- defN 24-May-25 15:52 casashell/private/hanningsmooth.py
+-rw-r--r--  2.0 unx    56229 b- defN 24-May-25 15:52 casashell/private/imbaseline.py
+-rw-r--r--  2.0 unx    28464 b- defN 24-May-25 15:52 casashell/private/imcollapse.py
+-rw-r--r--  2.0 unx    21629 b- defN 24-May-25 15:52 casashell/private/imcontsub.py
+-rw-r--r--  2.0 unx    42769 b- defN 24-May-25 15:52 casashell/private/imdev.py
+-rw-r--r--  2.0 unx    64109 b- defN 24-May-25 15:52 casashell/private/imfit.py
+-rw-r--r--  2.0 unx    21257 b- defN 24-May-25 15:52 casashell/private/imhead.py
+-rw-r--r--  2.0 unx    18162 b- defN 24-May-25 15:52 casashell/private/imhistory.py
+-rw-r--r--  2.0 unx    44261 b- defN 24-May-25 15:52 casashell/private/immath.py
+-rw-r--r--  2.0 unx    31022 b- defN 24-May-25 15:52 casashell/private/immoments.py
+-rw-r--r--  2.0 unx    28944 b- defN 24-May-25 15:52 casashell/private/impbcor.py
+-rw-r--r--  2.0 unx    16967 b- defN 24-May-25 15:52 casashell/private/importasap.py
+-rw-r--r--  2.0 unx    71439 b- defN 24-May-25 15:52 casashell/private/importasdm.py
+-rw-r--r--  2.0 unx    24734 b- defN 24-May-25 15:52 casashell/private/importatca.py
+-rw-r--r--  2.0 unx    24688 b- defN 24-May-25 15:52 casashell/private/importfits.py
+-rw-r--r--  2.0 unx    18543 b- defN 24-May-25 15:52 casashell/private/importfitsidi.py
+-rw-r--r--  2.0 unx    13942 b- defN 24-May-25 15:52 casashell/private/importgmrt.py
+-rw-r--r--  2.0 unx    21654 b- defN 24-May-25 15:52 casashell/private/importmiriad.py
+-rw-r--r--  2.0 unx    15624 b- defN 24-May-25 15:52 casashell/private/importnro.py
+-rw-r--r--  2.0 unx    14493 b- defN 24-May-25 15:52 casashell/private/importuvfits.py
+-rw-r--r--  2.0 unx    30488 b- defN 24-May-25 15:52 casashell/private/importvla.py
+-rw-r--r--  2.0 unx    43072 b- defN 24-May-25 15:52 casashell/private/impv.py
+-rw-r--r--  2.0 unx    30219 b- defN 24-May-25 15:52 casashell/private/imrebin.py
+-rw-r--r--  2.0 unx    17650 b- defN 24-May-25 15:52 casashell/private/imreframe.py
+-rw-r--r--  2.0 unx    43883 b- defN 24-May-25 15:52 casashell/private/imregrid.py
+-rw-r--r--  2.0 unx    45155 b- defN 24-May-25 15:52 casashell/private/imsmooth.py
+-rw-r--r--  2.0 unx    41583 b- defN 24-May-25 15:52 casashell/private/imstat.py
+-rw-r--r--  2.0 unx    30789 b- defN 24-May-25 15:52 casashell/private/imsubimage.py
+-rw-r--r--  2.0 unx    16131 b- defN 24-May-25 15:52 casashell/private/imtrans.py
+-rw-r--r--  2.0 unx    20602 b- defN 24-May-25 15:52 casashell/private/imval.py
+-rw-r--r--  2.0 unx      169 b- defN 24-May-25 15:36 casashell/private/init_begin_startup.py
+-rw-r--r--  2.0 unx    12535 b- defN 24-May-25 15:36 casashell/private/init_doc.py
+-rw-r--r--  2.0 unx      476 b- defN 24-May-25 15:36 casashell/private/init_pipeline.py
+-rw-r--r--  2.0 unx     4037 b- defN 24-May-25 15:36 casashell/private/init_subparam.py
+-rw-r--r--  2.0 unx    11462 b- defN 24-May-25 15:36 casashell/private/init_system.py
+-rw-r--r--  2.0 unx     4060 b- defN 24-May-25 15:36 casashell/private/init_welcome.py
+-rw-r--r--  2.0 unx    24686 b- defN 24-May-25 15:52 casashell/private/initweights.py
+-rw-r--r--  2.0 unx    31433 b- defN 24-May-25 15:52 casashell/private/listcal.py
+-rw-r--r--  2.0 unx    10772 b- defN 24-May-25 15:52 casashell/private/listfits.py
+-rw-r--r--  2.0 unx    10733 b- defN 24-May-25 15:52 casashell/private/listhistory.py
+-rw-r--r--  2.0 unx    44137 b- defN 24-May-25 15:52 casashell/private/listobs.py
+-rw-r--r--  2.0 unx    16171 b- defN 24-May-25 15:52 casashell/private/listpartition.py
+-rw-r--r--  2.0 unx    11574 b- defN 24-May-25 15:52 casashell/private/listsdm.py
+-rw-r--r--  2.0 unx    43869 b- defN 24-May-25 15:52 casashell/private/listvis.py
+-rw-r--r--  2.0 unx    10242 b- defN 24-May-25 15:52 casashell/private/load_tasks.py
+-rw-r--r--  2.0 unx     2900 b- defN 24-May-25 15:52 casashell/private/load_tools.py
+-rw-r--r--  2.0 unx    31993 b- defN 24-May-25 15:52 casashell/private/makemask.py
+-rw-r--r--  2.0 unx   128471 b- defN 24-May-25 15:52 casashell/private/mstransform.py
+-rw-r--r--  2.0 unx    36453 b- defN 24-May-25 15:52 casashell/private/msuvbin.py
+-rw-r--r--  2.0 unx    24168 b- defN 24-May-25 15:52 casashell/private/nrobeamaverage.py
+-rw-r--r--  2.0 unx    52668 b- defN 24-May-25 15:52 casashell/private/partition.py
+-rw-r--r--  2.0 unx    29090 b- defN 24-May-25 15:52 casashell/private/phaseshift.py
+-rw-r--r--  2.0 unx    22335 b- defN 24-May-25 15:52 casashell/private/plotants.py
+-rw-r--r--  2.0 unx    97579 b- defN 24-May-25 15:52 casashell/private/plotbandpass.py
+-rw-r--r--  2.0 unx    43760 b- defN 24-May-25 15:52 casashell/private/plotprofilemap.py
+-rw-r--r--  2.0 unx    15833 b- defN 24-May-25 15:52 casashell/private/plotweather.py
+-rw-r--r--  2.0 unx    62604 b- defN 24-May-25 15:52 casashell/private/polcal.py
+-rw-r--r--  2.0 unx    17139 b- defN 24-May-25 15:52 casashell/private/polfromgain.py
+-rw-r--r--  2.0 unx    34294 b- defN 24-May-25 15:52 casashell/private/predictcomp.py
+-rw-r--r--  2.0 unx    16993 b- defN 24-May-25 15:52 casashell/private/rerefant.py
+-rw-r--r--  2.0 unx    29985 b- defN 24-May-25 15:52 casashell/private/rmfit.py
+-rw-r--r--  2.0 unx    10851 b- defN 24-May-25 15:52 casashell/private/rmtables.py
+-rw-r--r--  2.0 unx    67386 b- defN 24-May-25 15:52 casashell/private/sdatmcor.py
+-rw-r--r--  2.0 unx    91011 b- defN 24-May-25 15:52 casashell/private/sdbaseline.py
+-rw-r--r--  2.0 unx    50237 b- defN 24-May-25 15:52 casashell/private/sdcal.py
+-rw-r--r--  2.0 unx    49040 b- defN 24-May-25 15:52 casashell/private/sdfit.py
+-rw-r--r--  2.0 unx    31120 b- defN 24-May-25 15:52 casashell/private/sdfixscan.py
+-rw-r--r--  2.0 unx    37515 b- defN 24-May-25 15:52 casashell/private/sdgaincal.py
+-rw-r--r--  2.0 unx    76833 b- defN 24-May-25 15:52 casashell/private/sdimaging.py
+-rw-r--r--  2.0 unx   274633 b- defN 24-May-25 15:52 casashell/private/sdintimaging.py
+-rw-r--r--  2.0 unx    26923 b- defN 24-May-25 15:52 casashell/private/sdpolaverage.py
+-rw-r--r--  2.0 unx    26705 b- defN 24-May-25 15:52 casashell/private/sdsidebandsplit.py
+-rw-r--r--  2.0 unx    32983 b- defN 24-May-25 15:52 casashell/private/sdsmooth.py
+-rw-r--r--  2.0 unx    26441 b- defN 24-May-25 15:52 casashell/private/sdtimeaverage.py
+-rw-r--r--  2.0 unx    65707 b- defN 24-May-25 15:52 casashell/private/setjy.py
+-rw-r--r--  2.0 unx    66516 b- defN 24-May-25 15:52 casashell/private/simalma.py
+-rw-r--r--  2.0 unx    70720 b- defN 24-May-25 15:52 casashell/private/simanalyze.py
+-rw-r--r--  2.0 unx    85491 b- defN 24-May-25 15:52 casashell/private/simobserve.py
+-rw-r--r--  2.0 unx    37855 b- defN 24-May-25 15:52 casashell/private/slsearch.py
+-rw-r--r--  2.0 unx    18927 b- defN 24-May-25 15:52 casashell/private/smoothcal.py
+-rw-r--r--  2.0 unx   113912 b- defN 24-May-25 15:52 casashell/private/specfit.py
+-rw-r--r--  2.0 unx    32224 b- defN 24-May-25 15:52 casashell/private/specflux.py
+-rw-r--r--  2.0 unx    36747 b- defN 24-May-25 15:52 casashell/private/specsmooth.py
+-rw-r--r--  2.0 unx    12577 b- defN 24-May-25 15:52 casashell/private/splattotable.py
+-rw-r--r--  2.0 unx    48466 b- defN 24-May-25 15:52 casashell/private/split.py
+-rw-r--r--  2.0 unx    59838 b- defN 24-May-25 15:52 casashell/private/spxfit.py
+-rw-r--r--  2.0 unx      869 b- defN 24-May-25 15:36 casashell/private/stack_manip.py
+-rw-r--r--  2.0 unx    61983 b- defN 24-May-25 15:52 casashell/private/statwt.py
+-rw-r--r--  2.0 unx   307803 b- defN 24-May-25 15:52 casashell/private/tclean.py
+-rw-r--r--  2.0 unx    18032 b- defN 24-May-25 15:52 casashell/private/testconcat.py
+-rw-r--r--  2.0 unx    80454 b- defN 24-May-25 15:52 casashell/private/tsdimaging.py
+-rw-r--r--  2.0 unx    35768 b- defN 24-May-25 15:52 casashell/private/uvcontsub.py
+-rw-r--r--  2.0 unx    27241 b- defN 24-May-25 15:52 casashell/private/uvcontsub_old.py
+-rw-r--r--  2.0 unx    34504 b- defN 24-May-25 15:52 casashell/private/uvmodelfit.py
+-rw-r--r--  2.0 unx    13030 b- defN 24-May-25 15:52 casashell/private/uvsub.py
+-rw-r--r--  2.0 unx    25730 b- defN 24-May-25 15:52 casashell/private/virtualconcat.py
+-rw-r--r--  2.0 unx    20566 b- defN 24-May-25 15:52 casashell/private/vishead.py
+-rw-r--r--  2.0 unx    56677 b- defN 24-May-25 15:52 casashell/private/visstat.py
+-rw-r--r--  2.0 unx    33393 b- defN 24-May-25 15:52 casashell/private/widebandpbcor.py
+-rw-r--r--  2.0 unx      688 b- defN 24-May-25 15:52 casashell-6.6.4.34.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-May-25 15:52 casashell-6.6.4.34.dist-info/WHEEL
+-rw-r--r--  2.0 unx       10 b- defN 24-May-25 15:52 casashell-6.6.4.34.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx    12249 b- defN 24-May-25 15:52 casashell-6.6.4.34.dist-info/RECORD
+140 files, 5426891 bytes uncompressed, 1017862 bytes compressed:  81.3%
```

## zipnote {}

```diff
@@ -36,17 +36,14 @@
 
 Filename: casashell/private/clearstat.py
 Comment: 
 
 Filename: casashell/private/concat.py
 Comment: 
 
-Filename: casashell/private/config.py
-Comment: 
-
 Filename: casashell/private/conjugatevis.py
 Comment: 
 
 Filename: casashell/private/cvel.py
 Comment: 
 
 Filename: casashell/private/cvel2.py
@@ -99,14 +96,17 @@
 
 Filename: casashell/private/gaincal.py
 Comment: 
 
 Filename: casashell/private/gencal.py
 Comment: 
 
+Filename: casashell/private/getantposalma.py
+Comment: 
+
 Filename: casashell/private/getcalmodvla.py
 Comment: 
 
 Filename: casashell/private/getephemtable.py
 Comment: 
 
 Filename: casashell/private/hanningsmooth.py
@@ -378,17 +378,14 @@
 
 Filename: casashell/private/testconcat.py
 Comment: 
 
 Filename: casashell/private/tsdimaging.py
 Comment: 
 
-Filename: casashell/private/userconfig.py
-Comment: 
-
 Filename: casashell/private/uvcontsub.py
 Comment: 
 
 Filename: casashell/private/uvcontsub_old.py
 Comment: 
 
 Filename: casashell/private/uvmodelfit.py
@@ -405,26 +402,20 @@
 
 Filename: casashell/private/visstat.py
 Comment: 
 
 Filename: casashell/private/widebandpbcor.py
 Comment: 
 
-Filename: casashell/private/ttconfig/casataskrc.py
-Comment: 
-
-Filename: casashell/private/ttconfig/casatoolrc.py
-Comment: 
-
-Filename: casashell-6.6.3.22.dist-info/METADATA
+Filename: casashell-6.6.4.34.dist-info/METADATA
 Comment: 
 
-Filename: casashell-6.6.3.22.dist-info/WHEEL
+Filename: casashell-6.6.4.34.dist-info/WHEEL
 Comment: 
 
-Filename: casashell-6.6.3.22.dist-info/top_level.txt
+Filename: casashell-6.6.4.34.dist-info/top_level.txt
 Comment: 
 
-Filename: casashell-6.6.3.22.dist-info/RECORD
+Filename: casashell-6.6.4.34.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## casashell/__init__.py

```diff
@@ -4,27 +4,33 @@
 from traitlets.config.loader import Config
 
 __name__ = 'casashell'
 __all__ = [ "start_casa", "argv", "flags", "version", "version_string", "extra_task_modules" ]
 
 extra_task_modules = [ ]
 
-def version( ): return [ 6, 6, 3,22 ]
-def version_string( ): return "6.6.3.22"
+def version( ): return [ 6, 6, 4,34 ]
+def version_string( ): return "6.6.4.34"
 
 argv = _sys.argv
 
 flags = [ ]
 
+# these are the log messages generated during startup before the logger is available
+startup_log = [ ]
+
+from casaconfig import config as casa_config_master
+
 def __init_config(config,flags,args):
     if flags.datapath is not None:
-        datap = list(map(_os.path.abspath,filter(_os.path.isdir,list(flags.datapath.split(':')))))
+        # expand all of the datapath elements in the string, separated by a colon
+        # and then only include abspath to the ones that are directories
+        datap = list(map(_os.path.expanduser,list(flags.datapath.split(':'))))
+        datap = list(map(_os.path.abspath,filter(_os.path.isdir,datap)))
         config.datapath = datap
-    if flags.logfile is not None:
-        config.logfile = flags.logfile if flags.logfile.startswith("/") else _os.path.realpath(_os.path.join('.',flags.logfile))
 
     config.flags = flags
     config.args = args
     
 def start_casa( argv ):
     moduledir = _os.path.dirname(_os.path.realpath(__file__))
 
@@ -55,190 +61,256 @@
 
     ##
     ## final interactive exit status...
     ## runs using "-c ..." exit from init_welcome.py
     ##
     _exit_status=0
     try:
+        import casashell as _cs
+
         colorsChoices = ['Neutral', 'NoColor', 'Linux', 'LightBG']
-        defaultColor = 'Neutral'
-        parse = _argparse.ArgumentParser(prog="casa",description='CASA bootstrap')
-        parse.add_argument( '--logfile',dest='logfile',default=None,help='path to log file' )
-        parse.add_argument( "--log2term",dest='log2term',action='store_const',const=True,default=False,
-                            help='direct output to terminal' )
-        parse.add_argument( "--nologger",dest='nologger',action='store_const',const=True,default=False,
-                            help='do not start CASA logger' )
-        parse.add_argument( "--nologfile",dest='nologfile',action='store_const',const=True,default=False,
-                            help='do not create a log file' )
-        parse.add_argument( "--nogui",dest='nogui',action='store_const',const=True,default=False,
-                            help='avoid starting GUI tools' )
-        parse.add_argument( "--rcdir",dest='rcdir',default=None,
-                            help='location for startup files, internal working files')
-        parse.add_argument( "--norc",dest='norc',action='store_const',const=True,default=False,
-                            help='do not load user config.py' )
-        # the default colors is Neutral, use None here to tell that the user has set it here, default applied later
-        parse.add_argument( '--colors', dest='prompt', default=None,
-                            help='prompt color', choices=colorsChoices )
-        parse.add_argument( "--pipeline",dest='pipeline',action='store_const',const=True,default=False,
-                            help='start CASA pipeline run' )
-        parse.add_argument( "--agg",dest='agg',action='store_const',const=True,default=False,
-                            help='startup without graphical backend' )
-        parse.add_argument( '--iplog',dest='ipython_log',default=False,
-                            const=True,action='store_const',
-                            help='create ipython log' )
-        parse.add_argument( '--datapath',dest='datapath',default=None,
-                            help='data path(s) [colon separated]' )
-        parse.add_argument( "--user-site",dest='user_site',default=False,
-                            const=True,action='store_const',
-                            help="include user's local site-packages lib in path" )
-        parse.add_argument( "-v", "--version",dest='showversion',action='store_const',const=True,default=False,
+        # defaultColor is only used here when the color in casa_config_master is invalid - assumed to be invalid in config.py
+        defaultColor = 'Neutral' 
+
+        from casaconfig.private.get_argparser import get_argparser
+
+        parser = get_argparser(add_help=True)
+        parser.prog = 'casa'
+        parser.description = 'CASA bootstrap'
+        parser.add_argument( "--startupfile",dest='startupfile',default=None,
+                            help="path to user's startup.py")
+        parser.add_argument( "--nostartupfile", dest='nostartupfile', action='store_const', const=True, default=False,
+                             help='do not use any startup file')
+        parser.add_argument( '--logfile',dest='logfile',default=None,help='path to log file' )
+        parser.add_argument( "--log2term",dest='log2term',action='store_const',const=True,default=False,
+                             help='direct output to terminal' )
+        parser.add_argument( "--nologger",dest='nologger',action='store_const',const=True,default=False,
+                             help='do not start CASA logger' )
+        parser.add_argument( "--nologfile",dest='nologfile',action='store_const',const=True,default=False,
+                             help='do not create a log file' )
+        parser.add_argument( "--nogui",dest='nogui',action='store_const',const=True,default=False,
+                             help='avoid starting GUI tools' )
+        parser.add_argument( "--cachedir",dest='cachedir',default=None,
+                             help="location for internal working files")
+        parser.add_argument( '--colors', dest='prompt', default=None,
+                             help='prompt color', choices=colorsChoices )
+        parser.add_argument( "--pipeline",dest='pipeline',action='store_const',const=True,default=False,
+                             help='start CASA pipeline run' )
+        parser.add_argument( "--agg",dest='agg',action='store_const',const=True,default=False,
+                             help='startup without graphical backend' )
+        parser.add_argument( '--iplog',dest='ipython_log',default=False,
+                             const=True,action='store_const',
+                             help='create ipython log' )
+        parser.add_argument( '--datapath',dest='datapath',default=None,
+                             help='data path(s) [colon separated]' )
+        parser.add_argument( '--reference-testing', dest='reference_testing',action='store_const',const=True,default=False,
+                             help='force *measurespath* to contain the casarundata when this version was produced, used for testing purposes')
+        parser.add_argument( '--no-auto-update', dest='no_auto_update',action='store_const',const=True,default=False,
+                             help='turn off all auto updates')
+        parser.add_argument( "--user-site",dest='user_site',default=False,
+                             const=True,action='store_const',
+                             help="include user's local site-packages lib in path" )
+        parser.add_argument( "-v", "--version",dest='showversion',action='store_const',const=True,default=False,
                             help='show CASA version' )
-        parse.add_argument( "-c",dest='execute',default=[],nargs=_argparse.REMAINDER,
-                            help='python eval string or python script to execute' )
+        parser.add_argument( "-c",dest='execute',default=[],nargs=_argparse.REMAINDER,
+                             help='python eval string or python script to execute' )
 
         # obsolete arguments still parsed here so that they now generate errors when invoked
         # help is suppressed to hide them in the usage output
 
-        # was help='list imported modules'
-        parse.add_argument( "--trace",dest='trace',action='store_const',const=True,default=False,
-                            help=_argparse.SUPPRESS)
+        parser.add_argument( "--trace",dest='trace',action='store_const',const=True,default=False,
+                             help=_argparse.SUPPRESS)
         
         # this was silently turned off several releases ago. It used to use "console" on macs due to perceived slowness of casalogger
-        # was help='logger to use on Apply systems'
-        parse.add_argument( "--maclogger",dest='maclogger',action='store_const',const='console',
-                            default='/does/this/still/make/sense',
-                            help=_argparse.SUPPRESS )
+        parser.add_argument( "--maclogger",dest='maclogger',action='store_const',const='console',
+                             default='/does/this/still/make/sense',
+                             help=_argparse.SUPPRESS )
+
+        # these obsolate arguments are fatal errors when used
+        # rcdir was renamed / repurposed as cachedir
+        parser.add_argument( '--rcdir',dest='rcdir',default=None,help=_argparse.SUPPRESS )
+
+        # norc was renamed as noconfig
+        parser.add_argument( '--norc',dest='norc',default=None,help=_argparse.SUPPRESS )
         
-        flags,args = parse.parse_known_args(argv)
+        flags,args = parser.parse_known_args(argv)
 
         # version, show and exit, ignore everything else
         if flags.showversion:
             print("CASA %s " % version_string())
             _sys.exit(0)
 
         # watch for the discontinued arguments, just warn, these print statements are not logged
         if flags.trace:
             print("\nWARN: --trace is not available.\n")
 
         if flags.maclogger=='console':
             print("\nWARN: --maclogger is not available. The default casalogger will be used.\n")
 
-        import casashell as _cs
+        # these discontinued arguments are fatal
+        if flags.rcdir is not None:
+            print("\nERROR: --rcdir is no longer used, use --cachedir to select a different location of CASA cache files,")
+            print("         use --configfile and --startupfile to specify locations of those files if not in ~/.casa")
+            print("casa can not continue ...")
+            _sys.exit(1)
+
+        if flags.norc is not None:
+            print("\nERROR: --norc is no longer used. Use --noconfig to turn off using the optional user's config.py")
+            print("casa can not continue ...")
+            _sys.exit(1)
+
         _cs.argv = argv
         _cs.flags = flags
 
-        # import of this config deferred to here so that _cs flags is set and available for use
-        # by scripts imported by this step
-        from .private import config
-        casa_config_master = config
-        __init_config(casa_config_master,flags,args)
+        __init_config(_cs.casa_config_master,flags,args)
 
-        # prepend startup_log with any startup_log in userconfig (done here so it's not in the final set more than once)
-        # insert at the start, in reverse order
+        # prepend startup_log with messages related to the configuration 
         try:
-            userconfigLogs = casa_config_master.userconfig.startup_log
-            userconfigLogs.reverse()
-            for thisLog in userconfigLogs:
-                casa_config_master.startup_log.insert(0,thisLog)
+            # I think there should be at most 1 of these, but just in case
+            user_config_list = _cs.casa_config_master.__user_config
+            if len(user_config_list) > 0 :
+                for user_config in user_config_list  :
+                    # was it actually used
+                    if user_config in _cs.casa_config_master.load_success():
+                        _cs.startup_log.append(("Using user configuration file %s" % user_config, "INFO"))
+                    else:
+                        # no, if it exists, signal it was going to be used (matches behavior before casaconfig)
+                        # all errors printed out and logged after this loop
+                        if _os.path.exists(_os.path.abspath(_os.path.expanduser(user_config))):
+                            _cs.startup_log.append(("Using user configuration file %s" % user_config, "INFO"))
+                        else: 
+                            # the only reason it gets to here is if the optional user config.py file was not found
+                            startup_log.append(("optional configuration file not found, continuing CASA startup without it", "INFO"))
+            else:
+                # not used because of noconfig, I'm not sure if there are any other cases where this else block can happen
+                if (_cs.casa_config_master.__flags.noconfig) :
+                    startup_log.append(("noconfig flag used, skipping any user configuration file", "INFO"))
+
+            # log any config errors
+            loadFailures = _cs.casa_config_master.load_failure()
+            for config_err in loadFailures:
+                startup_log.append(("evaluation of %s failed" % config_err, "ERROR"))
+                startup_log.append((loadFailures[config_err], "ERROR"))
+
         except:
             pass
 
         # print out any startup log messages in config - they've not yet been printed
         print("")
-        if len(casa_config_master.startup_log) > 0:
-            for logTuple in casa_config_master.startup_log:
+        if len(_cs.startup_log) > 0:
+            for logTuple in _cs.startup_log:
                 if logTuple[1] == 'INFO':
                     print(logTuple[0])
                 else:
                     print("%s: %s" % (logTuple[1],logTuple[0]))
 
-        # rcdir and norc must be specified in flags, they've already been used in initializing config
-        # must set these in casa_config_master as that's what is carried over to ipython
-
-        # all of these values are known to exist in casa_config_master (set in config.py)
+        # all of these values are known to exist in casa_config_master
         # make sure flags and corresponding casa_config_master values agree as appropriate
+
+        if flags.startupfile is None:
+            flags.startupfile = _cs.casa_config_master.startupfile
+        else:
+            flags.startupfile = _os.path.abspath(_os.path.expanduser(flags.startupfile))
+            _cs.casa_config_master.startupfile = flags.startupfile
+            if flags.nostartupfile:
+                print("WARN: nostartupfile and startupfile command line options are both present, startupfile is ignored!")
+                startup_log.append(("nostartupfile and startupfile command line options are both present, startup file will be ignored!", "WARN"))
+
+        if flags.nostartupfile:
+            # warning already given if startupfile is also present
+            # turn off the startup file
+            flags.startupfile = None
+            _cs.casa_config_master.startupfile = None
+
         if flags.logfile is None:
-            flags.logfile = casa_config_master.logfile
+            flags.logfile = _cs.casa_config_master.logfile
         else:
-            casa_config_master.logfile = flags.logfile
+            flags.logfile = _os.path.abspath(_os.path.expanduser(flags.logfile))
+            _cs.casa_config_master.logfile = flags.logfile
 
         if flags.log2term:
-            casa_config_master.log2term = flags.log2term
+            _cs.casa_config_master.log2term = flags.log2term
         else:
-            flags.log2term = casa_config_master.log2term
+            flags.log2term = _cs.casa_config_master.log2term
 
         if flags.nologger:
-            casa_config_master.nologger = flags.nologger
+            _cs.casa_config_master.nologger = flags.nologger
         else:
-            flags.nologger = casa_config_master.nologger
+            flags.nologger = _cs.casa_config_master.nologger
 
         if flags.nologfile:
-            casa_config_master.nologfile = flags.nologfile
+            _cs.casa_config_master.nologfile = flags.nologfile
         else:
-            flags.nologfile = casa_config_master.nologfile
+            flags.nologfile = _cs.casa_config_master.nologfile
 
         if flags.nogui:
-            casa_config_master.nogui = flags.nogui
+            _cs.casa_config_master.nogui = flags.nogui
         else:
-            flags.nogui = casa_config_master.nogui
+            flags.nogui = _cs.casa_config_master.nogui
+
+        if flags.cachedir is None:
+            flags.cachedir = _cs.casa_config_master.cachedir
+        else:
+            flags.cachedir = _os.path.abspath(_os.path.expanduser(flags.cachedir))
+            _cs.casa_config_master.cachedir = flags.cachedir
 
         # colors is more complicated
         if flags.prompt is None:
-            if casa_config_master.colors not in colorsChoices:
-                msg = "colors value in config.py is invalid: %s (choose from %s); using %s" % (casa_config_master.colors, colorsChoices,defaultColor)
+            if _cs.casa_config_master.colors not in colorsChoices:
+                msg = "colors value in config file is invalid: %s (choose from %s); using %s" % (_cs.casa_config_master.colors, colorsChoices,defaultColor)
                 priority="WARN"
-                casa_config_master.startup_log.append((msg,priority))
+                _cs.startup_log.append((msg,priority))
                 print("%s: %s" % (priority,msg))
-                casa_config_master.colors = defaultColor
-            flags.prompt = casa_config_master.colors
+                _cs.casa_config_master.colors = defaultColor
+            flags.prompt = _cs.casa_config_master.colors
         else:
-            casa_config_master.colors = flags.prompt
+            _cs.casa_config_master.colors = flags.prompt
 
         if flags.pipeline:
-            casa_config_master.pipeline =  flags.pipeline
+            _cs.casa_config_master.pipeline =  flags.pipeline
         else:
-            flags.pipeline = casa_config_master.pipeline
+            flags.pipeline = _cs.casa_config_master.pipeline
 
         if flags.agg:
-            casa_config_master.agg = flags.agg
+            _cs.casa_config_master.agg = flags.agg
         else:
-            flags.agg = casa_config_master.agg
+            flags.agg = _cs.casa_config_master.agg
 
         if flags.ipython_log:
-            casa_config_master.iplog = flags.ipython_log
+            _cs.casa_config_master.iplog = flags.ipython_log
         else:
-            flags.ipython_log = casa_config_master.iplog
+            flags.ipython_log = _cs.casa_config_master.iplog
+
+        # datapath already handled elsewhere
 
         if flags.user_site:
-            casa_config_master.user_site = flags.user_site
+            _cs.casa_config_master.user_site = flags.user_site
         else:
-            flags.user_site = casa_config_master.user_site
+            flags.user_site = _cs.casa_config_master.user_site
 
         # some flags values imply other flags values, some flags values take precedence over others, sort that out next
 
         # nologfile implies --logfile /dev/null
         # also nologfile takes precedence over logfile argument
         if flags.nologfile:
             flags.logfile = "/dev/null"
-            casa_config_master.logfile = flags.logfile
+            _cs.casa_config_master.logfile = flags.logfile
 
         # nogui implies no logger
         if flags.nogui:
             flags.nologger = True
-            casa_config_master.nologger = flags.nologger
-
-        # user's don't want to see the fully expanded path on printout
-        rcdirPrint = "~/.casa"
-        if flags.rcdir is not None:
-            casa_config_master.rcdir = _os.path.expanduser(flags.rcdir)
-            rcdirPrint = flags.rcdir
+            _cs.casa_config_master.nologger = flags.nologger
 
         if flags.pipeline:
             init_scripts += [ "init_pipeline.py" ]
 
+        if flags.no_auto_update:
+            _cs.casa_config_master.data_auto_update = False
+            _cs.casa_config_master.measures_auto_update = False
+
         # this next step must come after config et al have been imported so that user_site is available if set in config.py
         # having the current working directory (an empty element) in sys.path can cause problems - protect the user here
         _sys.path = [p for p in _sys.path if len(p) > 0]
         # if user installs casatools into their local site packages it can cause problems
         if not flags.user_site:
             if _sys.platform == "darwin":
                 _sys.path = [p for p in _sys.path if _os.path.join(_os.path.expanduser("~"),"Library/Python",) not in p]
@@ -250,35 +322,80 @@
             # this makes no sense if PYTHONOOUSERSITE is already set
             if 'PYTHONNOUSERSITE' in _os.environ:
                 print("\nERROR: --user-site has been used while PYTHONNOUSERSITE is set. Please unset PYTHONNOUSERSITE and try --user-site again.\n")
                 _sys.exit(1)
 
         from IPython import __version__ as ipython_version
         configs = Config( )
-        if flags.rcdir is not None:
-            config.rcdir = _os.path.expanduser(flags.rcdir)
-            ### casatools looks in casashell._rcdir (if it's
-            ### available) for a distro data repository
-            _cs._rcdir = _os.path.expanduser(flags.rcdir)
-
-        if _os.path.isfile(_os.path.abspath(_os.path.join(casa_config_master.rcdir,"startup.py"))):
-            # let the user know where startup.py is coming from
-            startupPath = _os.path.abspath(_os.path.join(casa_config_master.rcdir,"startup.py"))
-            # user's don't want to see a fully expanded path
-            msg = "Using user-supplied startup.py at %s" % _os.path.join(rcdirPrint,"startup.py")
-            casa_config_master.startup_log.append((msg,"INFO"))
-            print(msg)
-            init_scripts += [ startupPath ]
+
+        # does the optional startup.py exist at startupfile
+        if _cs.casa_config_master.startupfile is not None:
+            startupPath = _os.path.abspath(_os.path.expanduser(_cs.casa_config_master.startupfile))
+            if _os.path.isfile(startupPath):
+                # let the user know where startup.py is coming from
+                # user's don't want to see a fully expanded path
+                msg = "Using user-supplied startup.py at %s" % _cs.casa_config_master.startupfile
+                _cs.startup_log.append((msg,"INFO"))
+                print(msg)
+                init_scripts += [ startupPath ]
 
         print("")
+
+        # the use of the reference-testing options happens here so that the data is already in place before casatools is imported
+        if flags.reference_testing:
+            # this requires that measurespath exist
+            if _cs.casa_config_master.measurespath is None or (not _os.path.exists(_cs.casa_config_master.measurespath)):
+                print("\n\tERROR! measurespath is not set to an existing location : %s" % _cs.casa_config_master.measurespath)
+                print("\nThe measurespath config value should be set to a directory that contains the expected data necessary to use CASA.")
+                print("It should be set in site config file or the user's ~/.casa/config.py to a location containing that data.")
+                print("If that location exists, but is empty and owned by the user, and data_auto_update and measures_auto_update are both true")
+                print("then normal casa startup will download the data into that location.")
+                print("\n")
+                for config_file in _cs.casa_config_master.load_success():
+                    print("\tloaded config file : %s" % config_file)
+                    print("\nvisit https://casadocs.readthedocs.io/en/stable/notebooks/external-data.html for more information\n")
+                _sys.exit(1)
+
+            msg = "reference testing using pull_data and 'release' version into %s" % _cs.casa_config_master.measurespath
+            print(msg)
+            _cs.startup_log.append((msg,"INFO"))
+            try:
+                from casaconfig import pull_data, get_data_info
+                hasReleaseInfo = get_data_info(_cs.casa_config_master.measurespath, type='release') is not None
+                if not hasReleaseInfo:
+                    msg = "no release data info is available, probably not a monolithic CASA, no changes to the installed data due to --reference-testing option"
+                    _cs.startup_log.append((msg,"INFO"))
+                    print(msg)
+                else:
+                    pull_data(_cs.casa_config_master.measurespath,'release')
+            except:
+                print("There was an unexpected exception in casaconfig.pull_data trying to set the casarundata to 'release', can not continue")
+                #import traceback
+                #traceback.print_exc()
+                _sys.exit(1)
+
+            if hasReleaseInfo:
+                # this assumes the pull_data worked, make sure any auto updates don't undo that
+                #  the check on timestamp should already stop that, but this makes sure
+                _cs.casa_config_master.data_auto_update = False
+                _cs.casa_config_master.measures_auto_update = False
+                msg = "auto updates are turned off"
+                print(msg)
+                _cs.startup_log.append((msg,"INFO"))
+                
+            print('\n')
             
         init_scripts += [ "init_welcome.py" ]
         startup_scripts = filter( _os.path.isfile, map(lambda f: _os.path.join(moduledir,"private",f), init_scripts ) )
 
-        configs.TerminalInteractiveShell.ipython_dir = _os.path.join(casa_config_master.rcdir,"ipython")
+        cacheDirPath = _os.path.abspath(_os.path.expanduser(_cs.casa_config_master.cachedir))
+        ipythonDirPath = _os.path.join(cacheDirPath, "ipython")
+        _os.makedirs(ipythonDirPath, exist_ok=True)
+
+        configs.TerminalInteractiveShell.ipython_dir = ipythonDirPath
         configs.TerminalInteractiveShell.banner1 = 'IPython %s -- An enhanced Interactive Python.\n\n' % ipython_version
         configs.TerminalInteractiveShell.banner2 = ''
         configs.HistoryManager.hist_file = _os.path.join(configs.TerminalInteractiveShell.ipython_dir,"history.sqlite")
         configs.InteractiveShellApp.exec_files = list(startup_scripts)
         configs.InteractiveShell.show_rewritten_input = False
 
         if flags.agg or flags.pipeline:
@@ -287,17 +404,16 @@
             import matplotlib
             matplotlib.use('agg')
 
         else:
             configs.TerminalIPythonApp.matplotlib = 'auto'
             configs.InteractiveShellApp.matplotlib = 'auto'
 
-        _os.makedirs(_os.path.join(casa_config_master.rcdir,"ipython"),exist_ok=True)
         from IPython import start_ipython
-        start_ipython( config=configs, argv= (['--logfile='+casa_config_master.iplogfile] if flags.ipython_log else []) + ['--ipython-dir='+_os.path.join(casa_config_master.rcdir,"ipython"), '--autocall=2', '--colors='+flags.prompt] + (["-i"] if len(flags.execute) == 0 else ["-c","__evprop__(%s)" % flags.execute]) )
+        start_ipython( config=configs, argv= (['--logfile='+_cs.casa_config_master.iplogfile] if flags.ipython_log else []) + ['--ipython-dir='+ipythonDirPath, '--autocall=2', '--colors='+flags.prompt] + (["-i"] if len(flags.execute) == 0 else ["-c","__evprop__(%s)" % flags.execute]) )
 
     except Exception as exc:
         casa_eval_status['code'] = 1
         casa_eval_status['desc'] = f'unexpected exception raised in casashell init: {type(exc).__name__} {exc}'
 
     if casa_eval_status['code'] != 0:
         print(f'CASA exits with a non-zero status : {casa_eval_status["desc"]}')
```

## casashell/private/bandpass.py

```diff
@@ -1,9 +1,9 @@
 ##################### generated by xml-casa (v2) from bandpass.xml ##################
-##################### 9212d76fdcd3b66e91cab10f80557c5d ##############################
+##################### 83925879e747e0b20387dd8ace9a53fa ##############################
 from __future__ import absolute_import
 from casashell.private.stack_manip import find_local as __sf__
 from casashell.private.stack_manip import find_frame as _find_frame
 from casatools.typecheck import validator as _pc
 from casatools.coercetype import coerce as _coerce
 from casatools.errors import create_error_string
 from casatasks.private.task_bandpass import bandpass as _bandpass_t
@@ -222,15 +222,15 @@
                  'B' does a channel by channel solution for each
                  specified spw. 
                  'BPOLY' is somewhat experimental. It will fit an
                  nth order polynomial for the amplitude and phase
                  as a function of frequency. Only one fit is made
                  for all specified spw, and edge channels should
                  be omitted.
-                 Use taskname=plotcal in order to compare the
+                 Use taskname=plotms in order to compare the
                  results from B and BPOLY.
                  
                     Example: bandtype='BPOLY'
     smodel       Point source Stokes parameters for source model.
     corrdepflags f False (default), if any correlation is flagged, treat all correlations in
                        the visibility vector as flagged when solving (per channel, per baseline).
                        If True, use unflagged correlations in a visibility vector, even if one or more
```

## casashell/private/fixplanets.py

```diff
@@ -1,9 +1,9 @@
 ##################### generated by xml-casa (v2) from fixplanets.xml ################
-##################### 9e77d5f648d8c3e845548de6053a7d00 ##############################
+##################### 284ba2a1cc4b6c7ef2f46d6558118056 ##############################
 from __future__ import absolute_import
 from casashell.private.stack_manip import find_local as __sf__
 from casashell.private.stack_manip import find_frame as _find_frame
 from casatools.typecheck import validator as _pc
 from casatools.coercetype import coerce as _coerce
 from casatools.errors import create_error_string
 from casatasks.private.task_fixplanets import fixplanets as _fixplanets_t
@@ -62,17 +62,17 @@
               Default: '' (use pointing table)
               
                  Example: 'J2000 19h30m00 -40d00m00'
               
               The direction can either be given explicitly or
               as the path to a JPL Horizons
               ephemeris. Alternatively, the ephemeris table can
-              also be provided as mime format file. For more
+              also be provided using getephemtable task. For more
               information, see the task pages of fixplanets in
-              CASA Docs (https://casa.nrao.edu/casadocs/).
+              the CASA Docs.
     refant    Reference antenna name(s); a prioritized list may be
               specified
               Default: 0 (antenna ID 0)
               
                  Examples: 
                  refant='4' (antenna with index 4)
                  refant='VA04' (VLA antenna #4)
```

## casashell/private/flagdata.py

```diff
@@ -1,9 +1,9 @@
 ##################### generated by xml-casa (v2) from flagdata.xml ##################
-##################### 9f485cb5bafdda981ba9a7819244567b ##############################
+##################### 4f26e57fc00d2ca604825e5f4b7fac4a ##############################
 from __future__ import absolute_import
 from casashell.private.stack_manip import find_local as __sf__
 from casashell.private.stack_manip import find_frame as _find_frame
 from casatools.typecheck import validator as _pc
 from casatools.coercetype import coerce as _coerce
 from casatools.errors import create_error_string
 from casatasks.private.task_flagdata import flagdata as _flagdata_t
@@ -435,19 +435,23 @@
                        'NORM' followed by any of 'ALL', 'I', 'XX', 'YY',
                        'RR', 'LL', 'WVR' ('WVR' = water vapour
                        radiometer of ALMA data).
                        
                           Example: correlation="XX,YY".
                        
                        For modes clip, tfcrop or rflag, the default
-                       means ABS_ALL. If the input is cal table that
-                       does not contain a complex data column, the
-                       default will fall back to REAL_ALL.
+                       means ABS_ALL.
+                       If the input is cal table that does not contain
+                       a complex data column, the default will fall back
+                       to REAL_ALL.
                        For calibration tables, the solutions are:
                        'Sol1', 'Sol2', Sol3, Sol4.
+                       When using the 'ARG' option, the values of
+                       parameters such as clipminmax are expeced in
+                       units of radians.
                        
                        NOTE: correlation selection is not supported for
                        modes other than clip, tfcrop or rflag in cal
                        tables.
     scan               Scan number range
                        Subparameter of selectdata=True
                        Default: '' = all
```

## casashell/private/gaincal.py

```diff
@@ -1,9 +1,9 @@
 ##################### generated by xml-casa (v2) from gaincal.xml ###################
-##################### 4b8a0e9889f4fac3a7bbdf7e05c0ba89 ##############################
+##################### 7c21c599f57fdbdddd203514dcc55c60 ##############################
 from __future__ import absolute_import
 from casashell.private.stack_manip import find_local as __sf__
 from casashell.private.stack_manip import find_frame as _find_frame
 from casatools.typecheck import validator as _pc
 from casatools.coercetype import coerce as _coerce
 from casatools.errors import create_error_string
 from casatasks.private.task_gaincal import gaincal as _gaincal_t
@@ -182,14 +182,18 @@
                     refant='VA04' (VLA antenna #4)
                     refant='EA02,EA23,EA13' (EVLA antenna EA02,
                     use EA23 and EA13 as alternates if/when EA02
                     drops out)
                  
                  Use taskname=listobs for antenna listing
     refantmode   Reference antenna mode
+                   Default: 'flex'
+                 
+                 - 'flex': If the preferred or current refant drops out, switch to another. Alternate reference antennas will be chosen from the refant parameter (if a nontrivial list of antennas is specified), or according to proximity to the last-used refant. If and when the preferred refant returns, the referencing will switch back to it. 
+                 - 'strict': If the preferred or current refant is absent for a solution, flag all antennas at that solution. This mode ensures that the effective cross-hand phase will be maintained constant and equal to that of the chosen refant, and not subject to variation due to finite SNR when switching among reference antennas. If a list of antennas is specified in refant, only the first is used.
     minblperant  Minimum number of baselines required per antenna for each
                  solve
                  Default: 4
                  
                  Antennas with fewer baselines are excluded from
                  solutions.
                  
@@ -910,15 +914,15 @@
         self.__do_inp_output('%-14.14s = %s%-23s%s' % ('refant',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
     def __refantmode_inp(self):
         def xml_default( ):
             ## play the crazy subparameter shell game
             dflt = self.__refantmode_dflt( self.__globals_( ) )
             if dflt is not None: return dflt
             return 'flex'
-        description = 'Reference antenna mode'
+        description = 'Reference antenna mode (flex, strict)'
         value = self.__refantmode( self.__globals_( ) )
         (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'refantmode': value},{'refantmode': self.__schema['refantmode']}) else ('\x1B[91m','\x1B[0m')
         self.__do_inp_output('%-14.14s = %s%-23s%s' % ('refantmode',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
     def __minblperant_inp(self):
         def xml_default( ):
             ## play the crazy subparameter shell game
             dflt = self.__minblperant_dflt( self.__globals_( ) )
```

## casashell/private/imstat.py

```diff
@@ -1,9 +1,9 @@
 ##################### generated by xml-casa (v2) from imstat.xml ####################
-##################### 0b2cadc8f3a6963fbd22d332d9507b82 ##############################
+##################### 76730722711b052751c7e443e885cbf7 ##############################
 from __future__ import absolute_import
 from casashell.private.stack_manip import find_local as __sf__
 from casashell.private.stack_manip import find_frame as _find_frame
 from casatools.typecheck import validator as _pc
 from casatools.coercetype import coerce as _coerce
 from casatools.errors import create_error_string
 from casatasks.private.task_imstat import imstat as _imstat_t
@@ -49,299 +49,14 @@
     clmethod  Method to use for calculating classical statistics. Supported methods are "auto", "tiled", and "framework". Ignored if algorithm is not "classic".
     niter     For biweight, this is the maximum number of iterations to attempt. Iterating will stop when either this limit is reached, or the zscore criterion is met. If negative, do a fast, simple computation (see description). Ignored if the algorithm is not "biweight".
     [1;42mRETURNS[1;m      void
 
     --------- examples -----------------------------------------------------------
 
     
-    
-    Many parameters are determined from the specified region of an image.
-    For this version, the region can be specified by a set of rectangular
-    pixel coordinates, the channel ranges and the Stokes.
-    
-    For directed output, run as
-    myoutput = imstat()
-    
-    
-    Keyword arguments:
-    imagename    Name of input image
-    Default: none; Example: imagename='ngc5921_task.im'
-    axes         axes to compute statistics over. -1 => all axes.
-    region       Region selection. Default is
-    to use the full image.
-    box          Rectangular region(s) to select in direction plane. See
-    Default is to use the entire direction plane.
-    Example: box='10,10,50,50'
-    box = '10,10,30,30,35,35,50,50' (two boxes)
-    chans        Channels to use. Default is to use all channels.
-    Example: chans='3~20'
-    stokes       Stokes planes to use. Default is to
-    use all Stokes planes.
-    Example:stokes='I,Q'
-    listit       Print stats and bounding box to logger?
-    verbose      Print additional messages to logger?
-    mask         Mask to use. Default is none.
-    stretch      Stretch the mask if necessary and possible?
-    logfile      Name of file to write fit results.
-    append       If logfile exists, append to it (True) or overwrite it (False).
-    alogortihm   Algorithm to use to compute statistics. Supported values are "classic"
-    and "hinges-fences" (minimum match supported.)
-    fence        Fence factor when algorithm = "hinges-fences". Negative values are not
-    applicable and in these cases, the classic algorithm is used.
-    center       Center to use for "fit-half". Valid choices are "mean" (mean value of the
-    selected pixels), "median" (median value of the selected pixels), and "zero"
-    (0.0 is used as the center value). Ignored if algorithm is not "fit-half".
-    lside        For fit-half, use values <= center for the real data? If false, use
-    values >= center as the real data. Ignored if algorithm is not "fit-half"
-    zscore       For chauvenet, this is the target maximum number of standard deviations data
-    may have to be included. If negative, use Chauvenet's criterion. Ignored if
-    algorithm is not "chauvenet".
-    maxiter      For chauvenet, this is the maximum number of iterations to attempt. Iterating
-    will stop when either this limit is reached, or the zscore criterion is met.
-    If negative, iterate until the zscore criterion is met. Ignored if algorithm is
-    not "chauvenet".
-    clmethod     Method to use for calculating classical statistics. Supported methods are "auto",
-    "tiled", and "framework". Ignored if algorithm is not "classic".
-    
-    General procedure:
-    
-    1.  Specify inputs, then
-    
-    2.  myoutput = imstat()
-    or specify inputs directly in calling sequence to task
-    myoutput = imstat(imagename='image.im', etc)
-    
-    3.  myoutput['KEYS'] will contain the result associated with any
-    of the keys given below
-    
-    KEYS CURRENTLY AVAILABLE
-    blc          - absolute PIXEL coordinate of the bottom left corner of
-    the bounding box surrounding the selected region
-    blcf         - Same as blc, but uses WORLD coordinates instead of pixels
-    trc          - the absolute PIXEL coordinate of the top right corner
-    of the bounding box surrounding the selected region
-    trcf         - Same as trc, but uses WORLD coordinates instead of pixels
-    flux         - the flux or flux density. See below for details.
-    npts         - the number of unmasked points used
-    max          - the maximum pixel value
-    min          - minimum pixel value
-    maxpos       - absolute PIXEL coordinate of maximum pixel value
-    maxposf      - Same as maxpos, but uses WORLD coordinates instead of pixels
-    minpos       - absolute pixel coordinate of minimum pixel value
-    minposf      - Same as minpos, but uses WORLD coordinates instead of pixels
-    sum          - the sum of the pixel values: $sum I_i$
-    sumsq        - the sum of the squares of the pixel values: $sum I_i^2$
-    mean         - the mean of pixel values:
-    $bar{I} = sum I_i / n$
-    sigma        - the standard deviation about the mean:
-    $sigma^2 = (sum I_i - bar{I})^2 / (n-1)$
-    rms          - the root mean square:
-    $sqrt {sum I_i^2 / n}$
-    median       - the median pixel value
-    medabsdevmed - the median of the absolute deviations from the
-    median
-    quartile     - the inner-quartile range. Find the points
-    which are 25% largest and 75% largest (the median is
-    50% largest).
-    q1           - the first quartile.
-    q3           - the third quartile
-    
-    CURSOR AXES
-    The axes parameter allows one to set the cursor axes over which statistics
-    are computed. For example, consider a 3-dimensional image for which axes=[0,2].
-    The statistics would be computed for each XZ (axes 0 and 2) plane in the
-    image.  One could then examine those statistics as a function of the Y
-    (axis 1) axis.
-    
-    Each statistic is stored in an array in its own field in the returned dictionary.
-    The dimensionality of these arrays is equal to the number of axes over which the
-    statistics were not evaluated (called the display axes). For example, if the input
-    image has four axes, and axes=[0], the output statistic arrays will have three dimensions.
-    If axes=[0, 1], the output statistic arrays will have two dimensions.
-    
-    The shape of the output arrays when axes has a positive number of elements is based on
-    the region selection. If there is no region selection, the shape of the statistic arrays
-    is just the shape of the image along the display (non-cursor) axes. For example, if the
-    input image has dimensions of 300x400x4x80 (RA x Dec x Stokes x Freq) and axes=[0, 1],
-    in the absence of a region selection, the shape of the output statistic arrays will be
-    4x80. If there is a region selection, the shape of the output statistic arrays will be
-    determined by the number of planes along the display axes chosen in the region selection.
-    For example, continuing with our example, if axes=[0,1], chans="5~15;30~70", and
-    stokes="IV", the output statistic arrays will have shapes of 2x52. Only the selected
-    planes will be displayed in the logger output if verbose=True.
-    
-    In the case where the image has a pixel mask, and/or the mask parameter is specified,
-    and because of this specification a plane is entirely masked, this element is included in
-    the statistic arrays (usually with a value of 0). It is not included in the logger output
-    if verbose=True. One can exclude such elements from computations on the output arrays by
-    using the numpy.extract() method. For example, to compute the minimum rms value, not
-    including any fully masked planes, one could use
-    
-    stats = imstat(...)
-    rmsmin = numpy.min(numpy.extract(stats['npts']>0, stats['rms']))
-    
-    Thus in the computation of rmsmin, only the rms elements are considered which have
-    associated values of npts that are not zero.
-    
-    ALGORITHMS
-    
-    Several types of statistical algorithms are supported:
-    
-    * classic: This is the familiar algorithm, in which all unmasked pixels are used. One may choose
-    one of two methods, which vary only by performance, for computing classic statistics, via the
-    clmethod parameter. The "tiled" method is the old method and is fastest in cases where there are
-    a large number of individual sets of statistics to be computed and a small number of data points
-    per set. This can occur when one sets the axes parameter, which causes several individual sets of
-    statistics to be computed. The "framework" method uses the new statistics framework to compute
-    statistics. This method is fastest in the regime where one has a small number of individual sets
-    of statistics to calculate, and each set has a large number of points. For example, this method
-    is fastest when computing statistics over an entire image in one go (no axes specified). A third
-    option, "auto", chooses which method to use by predicting which be faster based on the number of
-    pixels in the image and the choice of the axes parameter.
-    
-    * fit-half: This algorithm calculates statistics on a dataset created from real and virtual pixel values.
-    The real values are determined by the input parameters center and lside. The parameter center
-    tells the algorithm where the center value of the combined real+virtual dataset should be. Options
-    are the mean or the median of the input image's pixel values, or at zero. The lside parameter tells
-    the algorithm on which side of this center the real pixel values are located. True indicates that
-    the real pixel values to be used are <= center. False indicates the real pixel values to be used
-    are >= center. The virtual part of the dataset is then created by reflecting all the real values
-    through the center value, to create a perfectly symmetric dataset composed of a real and a virtual
-    component. Statistics are then calculated on this resultant dataset. These two parameters are
-    ignored if algorithm is not "fit-half". Because the maximum value is virtual if lside is True and the
-    minimum value is virtual if lside is False, the value of the maximum position (if lside=True) or
-    minimum position (if lside=False) is not reported in the returned record.
-    
-    * hinges-fences: This algorithm calculates statistics by including data in a range
-    between Q1 - f*D and Q3 + f*D, inclusive, where Q1 is the first quartile of the distribution
-    of unmasked data, subject to any specified pixel ranges, Q3 is the third quartile, D = Q3 - Q1
-    (the inner quartile range), and f is the user-specified fence factor. Negative values of f
-    indicate that the full distribution is to be used (ie, the classic algorithm is used). Sufficiently
-    large values of f will also be equivalent to using the classic algorithm. For f = 0, only data
-    in the inner quartile range is used for computing statistics. The value of fence is silently
-    ignored if algorithm is not "hinges-fences".
-    
-    * chauvenet: The idea behind this algorithm is to eliminate outliers based on a maximum z-score value.
-    A z-score is the number of standard deviations a point is from the mean of a distribution. This
-    method thus is meant to be used for (nearly) normal distributions. In general, this is an iterative
-    process, with successive iterations discarding additional outliers as the remaining points become
-    closer to forming a normal distribution. Iterating stops when no additional points lie beyond the
-    specified zscore value, or, if zscore is negative, when Chauvenet's criterion is met (see below).
-    The parameter maxiter can be set to a non-negative value to prematurely abort this iterative
-    process. When verbose=T, the "N iter" column in the table that is logged represents the number
-    of iterations that were executed.
-    
-    Chauvenet's criterion allows the target z-score to decrease as the number of points in the
-    distribution decreases on subsequent iterations. Essentially, the criterion is that the probability
-    of having one point in a normal distribution at a maximum z-score of z_max must be at least 0.5.
-    z_max is therefore a function of (only) the number of points in the distrbution and is given by
-    
-    npts = 0.5/erfc(z_max/sqrt(2))
-    
-    where erfc() is the complementary error function. As iterating proceeds, the number of remaining
-    points decreases as outliers are discarded, and so z_max likewise decreases. Convergence occurs when
-    all remaining points fall within a z-score of z_max. Below is an illustrative table of z_max values
-    and their corresponding npts values. For example, it is likely that there will be a 5-sigma "noise
-    bump" in a perfectly noisy image with one million independent elements.
-    
-    z_max    npts
-    1.0                1
-    1.5                3
-    2.0               10
-    2.5               40
-    3.0              185
-    3.5            1,074
-    4.0            7,893
-    4.5           73,579
-    5.0          872,138
-    5.5       13,165,126
-    6.0      253,398,672
-    6.5    6,225,098,696
-    7.0  195,341,107,722
-    
-    NOTES ON FLUX DENSITIES AND FLUXES
-    
-    Fluxes and flux densities are not computed if any of the following conditions is met:
-    
-    1. The image does not have a direction coordinate
-    2. The image does not have a intensity-like brightness unit. Examples of such units
-    are Jy/beam (in which case the image must also have a beam) and K.
-    3. There are no direction axes in the cursor axes that are used.
-    4. If the (specified region of the) image has a non-degenerate spectral axis,
-    and the image has a tablular spectral axis (axis with varying increments)
-    5. Any axis that is not a direction nor a spectral axis that is included in the cursor
-    axes is not degenerate within in specified region
-    
-    Note that condition 4 may be removed in the future.
-    
-    In cases where none of the above conditions is met, the flux density(ies) (intensities
-    integrated over direction planes) will be computed if any of the following conditions
-    are met:
-    
-    1. The image has no spectral coordinate
-    2. The cursor axes do not include the spectral axis
-    3. The spectral axis in the chosen region is degenerate
-    
-    In the case where there is a nondegenerate spectral axis that is included in the cursor
-    axes, the flux (flux density integrated over spectral planes) will be computed. In this
-    case, the spectral portion of the flux unit will be the velocity unit of the spectral
-    coordinate if it has one (eg, if the brightness unit is Jy/beam and the velocity unit is
-    km/s, the flux will have units of Jy.km/s). If not, the spectral portion of the flux unit
-    will be the frequency unit of the spectral axis (eg, if the brightness unit is K and the
-    frequency unit is Hz, the resulting flux unit will be K.arcsec2.Hz).
-    
-    In both cases of flux density or flux being computed, the resulting numerical value is
-    assigned to the "flux" key in the output dictionary.
-    
-    ADDITIONAL EXAMPLES
-    
-    # Selected two box region
-    # box 1, bottom-left coord is 2,3 and top-right coord is 14,15
-    # box 2, bottom-left coord is 30,31 and top-right coord is 42,43
-    imstat( 'myImage', box='2,3,14,15;30,31,42,43' )
-    
-    # Select the same two box regions but only channels 4 and 5
-    imstat( 'myImage', box='2,3,14,15;30,31,42,43', chan='4~5' )
-    
-    # Select all channels greater the 20 as well as channel 0.
-    # Then the mean and standard deviation are printed
-    results = imstat( 'myImage', chans='>20;0' )
-    print "Mean is: ", results['mean'], "  s.d. ", results['sigma']
-    
-    # Find statistical information for the Q stokes value only
-    # then the I stokes values only, and printing out the statistical
-    # values that we are interested in.
-    s1 = imstat( 'myimage', stokes='Q' )
-    s2 = imstat( 'myimage', stokes='I' )
-    print "       |  MIN  |   MAX  | MEAN"
-    print "  Q    | ",s1['min'][0],"  |  ",s1['max'][0],"  |  ",,"  |  ",s1['mean'][0]
-    print "  I    | ",s2['min'][0],"  |  ",s2['max'][0],"  |  ",,"  |  ",s2['mean'][0]
-    
-    # evaluate statistics for each spectral plane in an ra x dec x frequency image
-    myim = "noisy.im"
-    ia.fromshape(myim, [20,30,40])
-    # give pixels non-zero values
-    ia.addnoise()
-    ia.done()
-    # These are the display axes, the calculation of statistics occurs
-    # for each (hyper)plane along axes not listed in the axes parameter,
-    # in this case axis 2 (the frequency axis)
-    # display the rms for each frequency plane (your mileage will vary with
-    # the values).
-    stats = imstat(imagename=myim, axes=[0,1])
-    stats["rms"]
-    Out[10]:
-    array([ 0.99576014,  1.03813124,  0.97749186,  0.97587883,  1.04189885,
-    1.03784776,  1.03371549,  1.03153074,  1.00841606,  0.947155  ,
-    0.97335404,  0.94389403,  1.0010221 ,  0.97151822,  1.03942156,
-    1.01158476,  0.96957082,  1.04212773,  1.00589049,  0.98696715,
-    1.00451481,  1.02307892,  1.03102005,  0.97334671,  0.95209879,
-    1.02088714,  0.96999902,  0.98661619,  1.01039267,  0.96842754,
-    0.99464947,  1.01536798,  1.02466023,  0.96956468,  0.98090756,
-    0.9835844 ,  0.95698935,  1.05487967,  0.99846411,  0.99634868])
 
 
     """
 
     _info_group_ = """information, analysis"""
     _info_desc_ = """Calculates statistical information from an image or image region"""
```

## casashell/private/init_pipeline.py

```diff
@@ -1,18 +1,20 @@
 
 # eventually the warnings here should be errors, causing casa --pipeline to exit
 
 pipelineOK = True
 
+from casashell import startup_log
+
 try:
     import pipeline
 except:
     print("WARN: could not import pipeline")
     pipelineOK = False
-    config.startup_log.append(("could not import pipeline","WARN"))
+    startup_log.append(("could not import pipeline","WARN"))
 
 if  pipelineOK:
     try:
         pipeline.initcli()
     except:
         print("WARN: pipeline.initcli() failed")
-        config.start_log.append(("pipeline.initcli() failed","WARN"))
+        start_log.append(("pipeline.initcli() failed","WARN"))
```

## casashell/private/init_system.py

```diff
@@ -1,73 +1,114 @@
 ###
 ### add configuration files for casatools and casatasks
 ###
 import sys
-from casashell.private import config
+import os
+
 from casashell import argv
-sys.path.append(config.internal_configpath)
+from casashell import casa_config_master as config
+# casaconfig exceptions to catch
+from casaconfig import BadLock, NoReadme, RemoteError, AutoUpdatesNotAllowed, NotWritable, UnsetMeasurespath
 
 def __static__(varname, value):
     def decorate(func):
         setattr(func, varname, value)
         return func
     return decorate
 
-###
-### This is not so great. The configuration is set up outside of our ipython instance.
-### This means that we must traverse back and pull in the configuration to make it
-### available (not only for the CASA users and scripts, but also to configure
-### casatools and casatasks...
-###
-def __incfg__( ):
-    import config as newcfg
-    import casatoolrc as newtool
-    import casataskrc as newtask
-    import inspect
-    origcfg = None
-    frame = inspect.currentframe( )
-    while frame is not None:
-        if 'casa_config_master' in frame.f_locals:
-            origcfg = frame.f_locals['casa_config_master']
-            break
-        frame = frame.f_back
-
-    if origcfg is None:
-        import os
-        print("configuration initalization failed")
-        os._exit(1)
-    else:
-        for cfg in dir(origcfg):
-            if cfg == 'datapath' and origcfg.datapath is not None:
-                newtool.datapath = origcfg.datapath
-                newcfg.datapath = origcfg.datapath
-            elif cfg == 'logfile' and origcfg.logfile is not None:
-                newtask.logfile = origcfg.logfile
-                newcfg.logfile = origcfg.logfile
-            elif cfg == 'rcdir' and origcfg.rcdir is not None:
-                newtask.rcdir = origcfg.rcdir
-                newcfg.rcdir = origcfg.rcdir
-            elif cfg == 'nogui':
-                newtool.nogui = origcfg.nogui
-                newcfg.nogui = origcfg.nogui
-            elif cfg == 'agg':
-                newtool.agg = origcfg.agg
-                newcfg.agg = origcfg.agg
-            elif cfg == 'pipeline':
-                newtool.pipeline = origcfg.pipeline
-                newcfg.pipeline = origcfg.pipeline
-            elif not cfg.startswith('_'):
-                setattr(newcfg,cfg,getattr(origcfg,cfg))
-
-__incfg__( )
 
 ###
 ### ensure that the CASA modules are available within the shell
 ###
-import casatools
+
+import casaconfig
+
+# catch ImportError exceptions when importing casatools - likely measures data failure
+try:
+    import casatools
+except (AutoUpdatesNotAllowed, NotWritable, NoReadme) as exc:
+    # similar initial user errors
+    print("")
+    print(exc)
+    print("")
+    print("casaconfig is trying to download data to %s (measurespath)" % (config.measurespath))
+    # slightly different messages here
+    if isinstance(exc, AutoUpdatesNotAllowed):
+        # two possibilities
+        if os.path.exists(config.measurespath):
+            # the problem is permissions
+            print("but the directory is not owned by the current user.")
+            print("Please change the directory ownership and re-start CASA.")
+        else:
+            print("but the directory does not exist.")
+            print("To allow casa to download ~1GB of data to this path, please create this directory and re-start CASA.")
+    elif isinstance(exc, NotWritable):
+        print("but the current user does not have write permissions for that directory.")
+        print("Please change the directory permissions and re-start CASA.")
+    elif isinstance(exc, NoReadme):
+        print("but that path does not contain the casaconfig files identifying it as a casaconfig-managed")
+        print("copy of the casarundata. The given path is also not empty so casaconfig is unable to")
+        print("extablish a copy of the casarundata there.")
+        print("That location also does not appear to be a non-casaconfig-managed copy of the expected data.")
+        print("Please empty that directory and re-start casa.")
+    else:
+        # this should never happen
+        print("This is an unexpected exception. Hopefully the details of the exception offer some insight into how to proceed")
+        print("Please report this problem to CASA. You should not be seeing this message.")
+        print("To work around this please try using a different path.")
+        
+    print("If you would prefer to use a different path, please see the instructions in the External Data documentation here:")
+    print("https://casadocs.readthedocs.io/en/stable/notebooks/external-data.html")
+    print("")
+    os._exit(1)
+except UnsetMeasurespath as exc:
+    print("")
+    print(exc)
+    print("")
+    print("The value of measurespath is not set and casatools can not find the expected data in datapath.")
+    print("casa can not continue.")
+    print("set measurespath in your personal config.py file or use a site config file that has that value set appropriately for that site")
+    print("For more details, please see the instructions in the External Data documentation here:")
+    print("https://casadocs.readthedocs.io/en/stable/notebooks/external-data.html")
+    print("")
+    os._exit(1)    
+except BadLock as exc:
+    print("")
+    print(exc)
+    print("")
+    print("The lock file associated with %s (measurespath) is not empty and castools was unable to start." % config.measurespath)
+    print("This likely means that there was a problem during installation or update of casarundata or measures.")
+    print("This also means that casatools was unable to find the expected IERS data in datapath (which includes measurespath)")
+    print("This is best addressed by deleting measurespath and recreating it and reinstalling the data.")
+    print("For more details, please see the instructions in the External Data documentation here:")
+    print("https://casadocs.readthedocs.io/en/stable/notebooks/external-data.html")
+    print("")
+    os._exit(1)
+except RemoteError as exc:
+    print("")
+    print(exc)
+    print("")
+    print("Either there is no network connection, there is no route to the remote server, or the remote server is offline.")
+    print("No IERS data was found in datapath and casatools can not be imported. casashell can not continue.")
+    print("")
+    os._exit(1)
+except ImportError as exc:
+    print("")
+    print(exc)
+    print("")
+    print("There were problems when importing casatools, casashell can not continue.")
+    print("This is unexpected but the details of the excption (shown previously) may help.")
+    print("If this seems to be a problem with the casarundata or measures data it may be necessary")
+    print("to change measurespath or remove the data in measurespath so that that location is empty")
+    print("and then restart CASA.")
+    print("For more details, please see the instructions in the External Data documentation here:")
+    print("https://casadocs.readthedocs.io/en/stable/notebooks/external-data.html")
+    print("")
+    os._exit(1)
+    
 import casatasks
 
 ###
 ### import legacy tools if available...
 ###
 try:
     import casalith
```

## casashell/private/init_welcome.py

```diff
@@ -26,17 +26,100 @@
     del __casashell
 
 ###
 ### post any startup log messages
 ###
 
 try:
-    for logTup in config.startup_log:
+    from casashell import startup_log
+    for logTup in startup_log:
         casalog.post(logTup[0],logTup[1])
 except:
     pass
 
 ###
+### log the config files used
+###
+try:
+   from casashell import casa_config_master
+   for config_file in casa_config_master.load_success():
+       casalog.post("loaded config file : %s" % config_file)
+except:
+    casalog.post("problem determining which config files were loaded","ERROR")
+    import traceback
+    traceback.print_exc()
+
+### log what the data at measurespath appears to be (versions when possible)
+msgs = []
+problems = False
+try:
+    from casaconfig import get_data_info
+    # use measurespath found in ctsys
+    user_measurespath = casatools.ctsys.measurespath()
+    data_info = get_data_info(user_measurespath, casalog)
+    if data_info is None:
+        msgs.append('Unable to determine any information about casarundata or measures versions.')
+        problems = True
+    else:
+        rundataInfo = data_info['casarundata']
+        if rundataInfo is None:
+            msgs.append('Unable to determine version information for casarundata')
+            problems = True
+        else:
+            if rundataInfo['version'] == "invalid":
+                msgs.append('casarundata is invalid and likely to not contain any of the expected data.')
+                problems=True
+            elif rundataInfo['version'] == "unknown":
+                msgs.append('casarundata version is unknown, this is probably a legacy version not installed by casaconfig')
+            else:
+                msgs.append('casarundata version : %s' % rundataInfo['version'])
+
+        measuresInfo = data_info['measures']
+        if measuresInfo is None:
+            msgs.append('Unable to determine version information for measures')
+            problems = True
+        else:
+            if measuresInfo['version'] == "invalid":
+                msgs.append('measures is invalid and likely to not contain any of the expected data.')
+                problems=True
+            elif measuresInfo['version'] == "unknown":
+                msgs.append('measures version is unknown, this is probably a legacy version not installed by casaconfig')
+            else:
+                msgs.append('measures version : %s' % measuresInfo['version'])
+
+except Exception as e:
+    print(e)
+    msgs.append('There was an unexpected exception when determining the installed casarundata and measures versions')
+    problems=True
+
+###
+### log the config values
+###
+from casaconfig import get_config   # list of config keyword = value formatted as strings to be printed
+casalog.post('')
+casalog.post('config values')
+for configString in get_config():
+    casalog.post('    ' + configString)
+casalog.post('')
+    
+if problems:
+    msgs.append('Other messages will have appeared before this that may help diagnose the problem.')
+    msgs.append('CASA will probably be unusable until this is fixed.')
+
+if problems:
+    # print and log these as WARN messages
+    print("\n")
+    for msg in msgs:
+        print(msg)
+
+    for msg in msgs:
+        casalog.post(msg,"WARN")
+
+else:
+    for msg in msgs:
+        casalog.post(msg)
+        
+###
 ### Verify geodetic Measures tables
 ###
 
 checkgeodetic()
```

## casashell/private/load_tasks.py

```diff
@@ -115,14 +115,16 @@
 register_builtin("fluxscale")
 from casashell.private.ft import ft
 register_builtin("ft")
 from casashell.private.gaincal import gaincal
 register_builtin("gaincal")
 from casashell.private.gencal import gencal
 register_builtin("gencal")
+from casashell.private.getantposalma import getantposalma
+register_builtin("getantposalma")
 from casashell.private.testconcat import testconcat
 register_builtin("testconcat")
 from casashell.private.apparentsens import apparentsens
 register_builtin("apparentsens")
 from casashell.private.getcalmodvla import getcalmodvla
 register_builtin("getcalmodvla")
 from casashell.private.hanningsmooth import hanningsmooth
```

## casashell/private/polfromgain.py

```diff
@@ -1,9 +1,9 @@
 ##################### generated by xml-casa (v2) from polfromgain.xml ###############
-##################### 09dcbeb422075b24cdc8c7d5a1d330d1 ##############################
+##################### 81a3ae6d4c5273a4ac930473d37d18bb ##############################
 from __future__ import absolute_import
 from casashell.private.stack_manip import find_local as __sf__
 from casashell.private.stack_manip import find_frame as _find_frame
 from casatools.typecheck import validator as _pc
 from casatools.coercetype import coerce as _coerce
 from casatools.errors import create_error_string
 from casatasks.private.task_polfromgain import polfromgain as _polfromgain_t
@@ -28,48 +28,32 @@
 
     
     TBD
     
 
     --------- parameter descriptions ---------------------------------------------
 
-    vis      Name of input visibility file (MS)
-    tablein  Input calibration table
-    caltable Output calibration table (forces polarization correction if specified)
-    paoffset Manual position angle offset
+    vis      Name of input MS from which gaincal caltable in tablein originated.  Used to extract geometry information not available in the tablein caltable.
+    tablein  Input gain calibration table corresponding to MS specified in vis.
+    caltable Optional output calibration table which will contain source polarization-corrected gains, if specified
+    paoffset Manual position angle offset (clockwise, in deg); added to value stored in the MS FEED subtable.  Use with care, since downstream calibration operation using polfromgain results will change according to this position angle offset.
+    minpacov Minimum parallactic angle coverage (deg) required for Q,U estimation. Reliable Q,U estimation depends on adequate parallactic angle coverage, and this parameter enforces a minimum allowable range of parallactic angle (per antenna) for unflagged gain solutions before the Q,U esimation is attempted.  (If caltable is specified, gains for antennas failing the minpacov criteria will be corrected by the per-spw average of Q,U estimates from good antennas.)
     [1;42mRETURNS[1;m     void
 
     --------- examples -----------------------------------------------------------
 
     
-    
-    
-    TBD...
-    
-    Keyword arguments:
-    vis -- Name of input visibility file
-    default: none;
-    tablein -- Input calibration table (G or T)
-    default: none;
-    caltable -- Output calibration table
-    default: ''  (no new table)
-    if specified, new caltable with polarization removed is generated
-    paoffset -- Manual position angle offset
-    default: 0.0  (no extra offset)
-    example: paoffset=10.0  (10 degree offset)
-    
-    
 
 
     """
 
     _info_group_ = """calibration"""
     _info_desc_ = """Derive linear polarization from gain ratio"""
 
-    __schema = {'vis': {'type': 'cReqPath', 'coerce': _coerce.expand_path}, 'tablein': {'type': 'cReqPath', 'coerce': _coerce.expand_path}, 'caltable': {'type': 'cStr', 'coerce': _coerce.to_str}, 'paoffset': {'type': 'cFloat', 'coerce': _coerce.to_float}}
+    __schema = {'vis': {'type': 'cReqPath', 'coerce': _coerce.expand_path}, 'tablein': {'type': 'cReqPath', 'coerce': _coerce.expand_path}, 'caltable': {'type': 'cStr', 'coerce': _coerce.to_str}, 'paoffset': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'minpacov': {'type': 'cFloat', 'coerce': _coerce.to_float}}
 
     def __init__(self):
         self.__stdout = None
         self.__stderr = None
         self.__root_frame_ = None
 
     def __globals_(self):
@@ -123,35 +107,42 @@
                 addon = addon + ' ' + description[0]
                 description.pop(0)
             output.append(addon)
         out.write('\n'.join(output) + '\n')
 
     #--------- return nonsubparam values ----------------------------------------------
 
-    def __vis_dflt( self, glb ):
+    def __tablein_dflt( self, glb ):
         return ''
 
-    def __vis( self, glb ):
-        if 'vis' in glb: return glb['vis']
+    def __tablein( self, glb ):
+        if 'tablein' in glb: return glb['tablein']
         return ''
 
-    def __tablein_dflt( self, glb ):
+    def __vis_dflt( self, glb ):
         return ''
 
-    def __tablein( self, glb ):
-        if 'tablein' in glb: return glb['tablein']
+    def __vis( self, glb ):
+        if 'vis' in glb: return glb['vis']
         return ''
 
     def __caltable_dflt( self, glb ):
         return ''
 
     def __caltable( self, glb ):
         if 'caltable' in glb: return glb['caltable']
         return ''
 
+    def __minpacov_dflt( self, glb ):
+        return float(30.0)
+
+    def __minpacov( self, glb ):
+        if 'minpacov' in glb: return glb['minpacov']
+        return float(30.0)
+
     def __paoffset_dflt( self, glb ):
         return float(0.0)
 
     def __paoffset( self, glb ):
         if 'paoffset' in glb: return glb['paoffset']
         return float(0.0)
 
@@ -166,68 +157,80 @@
     #--------- subparam inp output ----------------------------------------------------
     def __vis_inp(self):
         def xml_default( ):
             ## play the crazy subparameter shell game
             dflt = self.__vis_dflt( self.__globals_( ) )
             if dflt is not None: return dflt
             return ''
-        description = 'Name of input visibility file (MS)'
+        description = 'Name of input MeasurementSet'
         value = self.__vis( self.__globals_( ) )
         (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'vis': value},{'vis': self.__schema['vis']}) else ('\x1B[91m','\x1B[0m')
         self.__do_inp_output('%-8.8s = %s%-23s%s' % ('vis',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
     def __tablein_inp(self):
         def xml_default( ):
             ## play the crazy subparameter shell game
             dflt = self.__tablein_dflt( self.__globals_( ) )
             if dflt is not None: return dflt
             return ''
-        description = 'Input calibration table'
+        description = 'Input gain calibration table'
         value = self.__tablein( self.__globals_( ) )
         (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'tablein': value},{'tablein': self.__schema['tablein']}) else ('\x1B[91m','\x1B[0m')
         self.__do_inp_output('%-8.8s = %s%-23s%s' % ('tablein',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
     def __caltable_inp(self):
         def xml_default( ):
             ## play the crazy subparameter shell game
             dflt = self.__caltable_dflt( self.__globals_( ) )
             if dflt is not None: return dflt
             return ''
-        description = 'Output calibration table (forces polarization correction if specified)'
+        description = 'Optional output caltable (for polarization-corrected gains if specified)'
         value = self.__caltable( self.__globals_( ) )
         (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'caltable': value},{'caltable': self.__schema['caltable']}) else ('\x1B[91m','\x1B[0m')
         self.__do_inp_output('%-8.8s = %s%-23s%s' % ('caltable',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
     def __paoffset_inp(self):
         def xml_default( ):
             ## play the crazy subparameter shell game
             dflt = self.__paoffset_dflt( self.__globals_( ) )
             if dflt is not None: return dflt
             return float(0.0)
-        description = 'Manual position angle offset'
+        description = 'Manual feed position angle offset (clockwise, in deg)'
         value = self.__paoffset( self.__globals_( ) )
         (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'paoffset': value},{'paoffset': self.__schema['paoffset']}) else ('\x1B[91m','\x1B[0m')
         self.__do_inp_output('%-8.8s = %s%-23s%s' % ('paoffset',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
+    def __minpacov_inp(self):
+        def xml_default( ):
+            ## play the crazy subparameter shell game
+            dflt = self.__minpacov_dflt( self.__globals_( ) )
+            if dflt is not None: return dflt
+            return float(30.0)
+        description = 'Minimum parallactic angle coverage (deg) required for Q,U estimation'
+        value = self.__minpacov( self.__globals_( ) )
+        (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'minpacov': value},{'minpacov': self.__schema['minpacov']}) else ('\x1B[91m','\x1B[0m')
+        self.__do_inp_output('%-8.8s = %s%-23s%s' % ('minpacov',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
 
     #--------- global default implementation-------------------------------------------
     @static_var('state', __sf__('casa_inp_go_state'))
     def set_global_defaults(self):
         self.set_global_defaults.state['last'] = self
         glb = self.__globals_( )
-        if 'vis' in glb: del glb['vis']
         if 'tablein' in glb: del glb['tablein']
-        if 'caltable' in glb: del glb['caltable']
+        if 'vis' in glb: del glb['vis']
+        if 'minpacov' in glb: del glb['minpacov']
         if 'paoffset' in glb: del glb['paoffset']
+        if 'caltable' in glb: del glb['caltable']
 
 
     #--------- inp function -----------------------------------------------------------
     def inp(self):
         print("# polfromgain -- %s" % self._info_desc_)
         self.term_width, self.term_height = shutil.get_terminal_size(fallback=(80, 24))
         self.__vis_inp( )
         self.__tablein_inp( )
         self.__caltable_inp( )
         self.__paoffset_inp( )
+        self.__minpacov_inp( )
 
     #--------- tget function ----------------------------------------------------------
     @static_var('state', __sf__('casa_inp_go_state'))
     def tget(self,savefile=None):
         from casashell.private.stack_manip import find_frame
         from runpy import run_path
         filename = savefile
@@ -254,14 +257,15 @@
         _postfile = outfile if outfile is not None else os.path.realpath('polfromgain.last')
 
         _invocation_parameters = OrderedDict( )
         _invocation_parameters['vis'] = self.__vis( self.__globals_( ) )
         _invocation_parameters['tablein'] = self.__tablein( self.__globals_( ) )
         _invocation_parameters['caltable'] = self.__caltable( self.__globals_( ) )
         _invocation_parameters['paoffset'] = self.__paoffset( self.__globals_( ) )
+        _invocation_parameters['minpacov'] = self.__minpacov( self.__globals_( ) )
 
         try:
             with open(_postfile,'w') as _f:
                 for _i in _invocation_parameters:
                     _f.write("%-8s = %s\n" % (_i,noobj(repr(_invocation_parameters[_i]))))
                 _f.write("#polfromgain( ")
                 count = 0
@@ -269,49 +273,52 @@
                     _f.write("%s=%s" % (_i,noobj(repr(_invocation_parameters[_i]))))
                     count += 1
                     if count < len(_invocation_parameters): _f.write(",")
                 _f.write(" )\n")
         except: return False
         return True
 
-    def __call__( self, vis=None, tablein=None, caltable=None, paoffset=None ):
+    def __call__( self, vis=None, tablein=None, caltable=None, paoffset=None, minpacov=None ):
         def noobj(s):
            if s.startswith('<') and s.endswith('>'):
                return "None"
            else:
                return s
         _prefile = os.path.realpath('polfromgain.pre')
         _postfile = os.path.realpath('polfromgain.last')
         task_result = None
-        _arguments = [vis,tablein,caltable,paoffset]
+        _arguments = [vis,tablein,caltable,paoffset,minpacov]
         _invocation_parameters = OrderedDict( )
         if any(map(lambda x: x is not None,_arguments)):
             # invoke python style
             # set the non sub-parameters that are not None
             local_global = { }
             if vis is not None: local_global['vis'] = vis
             if tablein is not None: local_global['tablein'] = tablein
             if caltable is not None: local_global['caltable'] = caltable
             if paoffset is not None: local_global['paoffset'] = paoffset
+            if minpacov is not None: local_global['minpacov'] = minpacov
 
             # the invocation parameters for the non-subparameters can now be set - this picks up those defaults
             _invocation_parameters['vis'] = self.__vis( local_global )
             _invocation_parameters['tablein'] = self.__tablein( local_global )
             _invocation_parameters['caltable'] = self.__caltable( local_global )
             _invocation_parameters['paoffset'] = self.__paoffset( local_global )
+            _invocation_parameters['minpacov'] = self.__minpacov( local_global )
 
             # the sub-parameters can then be set. Use the supplied value if not None, else the function, which gets the appropriate default
             
 
         else:
             # invoke with inp/go semantics
             _invocation_parameters['vis'] = self.__vis( self.__globals_( ) )
             _invocation_parameters['tablein'] = self.__tablein( self.__globals_( ) )
             _invocation_parameters['caltable'] = self.__caltable( self.__globals_( ) )
             _invocation_parameters['paoffset'] = self.__paoffset( self.__globals_( ) )
+            _invocation_parameters['minpacov'] = self.__minpacov( self.__globals_( ) )
         try:
             with open(_prefile,'w') as _f:
                 for _i in _invocation_parameters:
                     _f.write("%-8s = %s\n" % (_i,noobj(repr(_invocation_parameters[_i]))))
                 _f.write("#polfromgain( ")
                 count = 0
                 for _i in _invocation_parameters:
@@ -319,16 +326,16 @@
                     count += 1
                     if count < len(_invocation_parameters): _f.write(",")
                 _f.write(" )\n")
         except: pass
         try:
             _logging_state_ = None
             assert _pc.validate(_invocation_parameters,self.__schema), create_error_string(_pc.errors)
-            _logging_state_ = _start_log( 'polfromgain', [ 'vis=' + repr(_pc.document['vis']), 'tablein=' + repr(_pc.document['tablein']), 'caltable=' + repr(_pc.document['caltable']), 'paoffset=' + repr(_pc.document['paoffset']) ] )
-            task_result = _polfromgain_t( _pc.document['vis'],_pc.document['tablein'],_pc.document['caltable'],_pc.document['paoffset'] )
+            _logging_state_ = _start_log( 'polfromgain', [ 'vis=' + repr(_pc.document['vis']), 'tablein=' + repr(_pc.document['tablein']), 'caltable=' + repr(_pc.document['caltable']), 'paoffset=' + repr(_pc.document['paoffset']), 'minpacov=' + repr(_pc.document['minpacov']) ] )
+            task_result = _polfromgain_t( _pc.document['vis'],_pc.document['tablein'],_pc.document['caltable'],_pc.document['paoffset'],_pc.document['minpacov'] )
         except Exception as e:
             from traceback import format_exc
             from casatasks import casalog
             casalog.origin('polfromgain')
             casalog.post("Exception Reported: Error in polfromgain: %s" % str(e),'SEVERE')
             casalog.post(format_exc( ))
             raise #exception is now raised
```

## casashell/private/setjy.py

```diff
@@ -1,9 +1,9 @@
 ##################### generated by xml-casa (v2) from setjy.xml #####################
-##################### 9be83b90dab42c37901e1a24b8bfb7cb ##############################
+##################### 00ebb1489d4e63a2ce3f6c2e5a10db6e ##############################
 from __future__ import absolute_import
 from casashell.private.stack_manip import find_local as __sf__
 from casashell.private.stack_manip import find_frame as _find_frame
 from casatools.typecheck import validator as _pc
 from casatools.coercetype import coerce as _coerce
 from casatools.errors import create_error_string
 from casatasks.private.task_setjy import setjy as _setjy_t
@@ -360,35 +360,35 @@
                   and "Perley-Butler 2017" 
                   Default: 'nearest'
                   Options: 'nearest|linear|cubic|spline'
                   
                   This parameter is ignored for other non-variable
                   sources in the standard.
     usescratch    Will create if necessary and use the MODEL_DATA
-                  Default: False
-                  Options: False|True
+                  Default: True 
+                  Options: True|False
                   
-                  * If False: 'virtual' model is created. The model
-                    information is saved either in the SOURCE_MODEL
-                    column in the SOURCE table (if one exists) or
-                    in the keyword of the main table in the MS and
-                    model visibilities are evaluated on the fly
-                    when calculating  calibration or plotting in
-                    plotms.
                   * If True: the model visibility will be evaluated
                     and saved on disk in the MODEL_DATA column.
                     This will increase your ms in size by a factor
                     of 1.5 (w.r.t. the case where  you only have
                     the DATA and the CORRECTED_DATA column). Use
                     True if you need to interact with the
                     MODEL_DATA in python, say. Also, use True if
                     you need finer than field and spw  selections
                     using scans/time (and when use with intent
                     selection, please see WARNING section in the
                     intent parameter description).
+                  * If False: 'virtual' model is created. The model
+                    information is saved either in the SOURCE_MODEL
+                    column in the SOURCE table (if one exists) or
+                    in the keyword of the main table in the MS, and
+                    model visibilities are evaluated on the fly
+                    when calculating  calibration or plotting in
+                    plotms.
                   
                   By running usescratch=T, it will remove the
                   existing virtual model from previous
                   runs. usescratch=F will not remove the existing
                   MODEL_DATA but in subsequent process the virtual
                   model with matching field and spw combination
                   will be used if it exists regardless of the
@@ -518,19 +518,19 @@
         return ''
 
     def __spw( self, glb ):
         if 'spw' in glb: return glb['spw']
         return ''
 
     def __usescratch_dflt( self, glb ):
-        return False
+        return True
 
     def __usescratch( self, glb ):
         if 'usescratch' in glb: return glb['usescratch']
-        return False
+        return True
 
     def __field_dflt( self, glb ):
         return ''
 
     def __field( self, glb ):
         if 'field' in glb: return glb['field']
         return ''
@@ -899,15 +899,15 @@
              (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'interpolation': value},{'interpolation': self.__schema['interpolation']}) else ('\x1B[91m','\x1B[0m')
              self.__do_inp_output('   \x1B[92m%-13.13s =\x1B[0m %s%-23s%s' % ('interpolation',pre,self.__to_string_(value),post),description,9+len(pre)+len(post))
     def __usescratch_inp(self):
         def xml_default( ):
             ## play the crazy subparameter shell game
             dflt = self.__usescratch_dflt( self.__globals_( ) )
             if dflt is not None: return dflt
-            return False
+            return True
         description = 'Will create if necessary and use the MODEL_DATA'
         value = self.__usescratch( self.__globals_( ) )
         (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'usescratch': value},{'usescratch': self.__schema['usescratch']}) else ('\x1B[91m','\x1B[0m')
         self.__do_inp_output('%-16.16s = %s%-23s%s' % ('usescratch',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
     def __ismms_inp(self):
         def xml_default( ):
             ## play the crazy subparameter shell game
```

## casashell/private/simobserve.py

```diff
@@ -1,9 +1,9 @@
 ##################### generated by xml-casa (v2) from simobserve.xml ################
-##################### fe9eb3fea861ddc8826c37705d9a43c7 ##############################
+##################### 0e3aaa53282e4e44cb7a3dfe57d8f593 ##############################
 from __future__ import absolute_import
 from casashell.private.stack_manip import find_local as __sf__
 from casashell.private.stack_manip import find_frame as _find_frame
 from casatools.typecheck import validator as _pc
 from casatools.coercetype import coerce as _coerce
 from casatools.errors import create_error_string
 from casatasks.private.task_simobserve import simobserve as _simobserve_t
@@ -38,18 +38,17 @@
     into output simulated images using simanalyze.
     
     ALMA users are encouraged to use the simalma task, which provides
     additional information on the multiple simobserve and simanalyze calls
     required to simulate an ALMA observation which may consist of 12m
     interferometric, 7m interferometric, and 12m total power data.
     
-    More information and examples are availible at
-    http://casaguides.nrao.edu/index.php?title=Simulating_Observations_in_CASA
-    Please contact the Helpdesk with any questions (see
-    https://casa.nrao.edu/help_desk_all.shtml)
+    More information and examples are availible in the CASA Guides (http://casaguides.nrao.edu) under Simulations.
+    Please contact the CASA Team with any questions (see
+    https://casa.nrao.edu/index_contact.shtml)
 
     --------- parameter descriptions ---------------------------------------------
 
     project         root prefix for output file names
     skymodel        Model image to observe
                     
                     * simobserve uses a CASA or fits image. If you
@@ -92,19 +91,21 @@
     incell          set new cell/pixel size
                     Subparameter of skymodel
                     Default: '' (use whatever is in the image
                     already)
                     
                        Example: incell='0.1arcsec'
     incenter        Frequency to use for the center channel (or only channel,
-                    if the skymodel is 2D)
+                    if the skymodel is 2D).
                     Subparameter of skymodel
                     Default: '' (use whatever is in the image
                     already)
                     
+                    		     This will also become the default rest frequency, e.g. when imaging with tclean.
+                    
                        Example: incenter='89GHz'
     inwidth         Set new channel width 
                       Subparameter of skymodel
                       Default: '' (use whatever is in the image
                       already)
                       
                       Should be a string representing a quantity with
@@ -315,17 +316,15 @@
                     Subparameter of
                     thermalnoise='tsys-atm|tsys-manual'
     t_sky           Atmospheric temperature in K
                     Subparameter of thermalnoise='tsys-manual'
     tau0            Zenith opacity at observing frequency
                     Subparameter of thermalnoise='tsys-manual'
                     
-                    https://casaguides.nrao.edu/index.php/Corrupt
-                    for more information on noise, in particular how
-                    to add a phase screen using the toolkit
+                    See the Simulations CASA Guide (https://casaguides.nrao.edu) on 'Corrupting Simulated Data' for more information on noise, in particular how to add a phase screen using the toolkit
     seed            Random number seed
                     Subparameter of
                     thermalnoise='tsys-atm|tsys-manual'
     leakage         add cross polarization corruption of this fractional
                     magnitude (interferometer only)
     graphics        View plots on the screen, saved to file, both, or neither
                     Options: screen|file|both|none
```

## casashell/private/tclean.py

```diff
@@ -1,9 +1,9 @@
 ##################### generated by xml-casa (v2) from tclean.xml ####################
-##################### a67eec76023722587f91a92ba878e467 ##############################
+##################### e4216b74f32e985c533b81c5ecdbefef ##############################
 from __future__ import absolute_import
 from casashell.private.stack_manip import find_local as __sf__
 from casashell.private.stack_manip import find_frame as _find_frame
 from casatools.typecheck import validator as _pc
 from casatools.coercetype import coerce as _coerce
 from casatools.errors import create_error_string
 from casatasks.private.task_tclean import tclean as _tclean_t
@@ -199,22 +199,25 @@
                          su.getOptimumSize(345) 
                          Output :  360
     cell                 Cell size
                          example: cell=['0.5arcsec,'0.5arcsec'] or
                          cell=['1arcmin', '1arcmin']
                          cell = '1arcsec' is equivalent to ['1arcsec','1arcsec']
     phasecenter          Phase center of the image (string or field id); if the phasecenter is the name known major solar system object ('MERCURY', 'VENUS', 'MARS', 'JUPITER', 'SATURN', 'URANUS', 'NEPTUNE', 'PLUTO', 'SUN', 'MOON') or is an ephemerides table then that source is tracked and the background sources get smeared. There is a special case, when phasecenter='TRACKFIELD', which will use the ephemerides or polynomial phasecenter in the FIELD table of the MS's as the source center to track.
-                         example: phasecenter=6
-                                  phasecenter='J2000 19h30m00 -40d00m00'
-                                  phasecenter='J2000 292.5deg  -40.0deg'
-                                  phasecenter='J2000 5.105rad  -0.698rad'
-                                  phasecenter='ICRS 13:05:27.2780 -049.28.04.458'
-                                  phasecenter='myComet_ephem.tab'
-                                  phasecenter='MOON'
-                                  phasecenter='TRACKFIELD'
+                         
+                              Note : If unspecified, tclean will use the phase-center from the first data field of the MS (or list of MSs) selected for imaging. 
+                         
+                         			example: phasecenter=6
+                         phasecenter='J2000 19h30m00 -40d00m00'
+                         phasecenter='J2000 292.5deg  -40.0deg'
+                         phasecenter='J2000 5.105rad  -0.698rad'
+                         phasecenter='ICRS 13:05:27.2780 -049.28.04.458'
+                         phasecenter='myComet_ephem.tab'
+                         phasecenter='MOON'
+                         phasecenter='TRACKFIELD'
     stokes               Stokes Planes to make
                          default='I'; example: stokes='IQUV';
                            Options: 'I','Q','U','V','IV','QU','IQ','UV','IQUV','RR','LL','XX','YY','RRLL','XXYY','pseudoI'
                          
                                        Note : Due to current internal code constraints, if any correlation pair
                                                   is flagged, by default, no data for that row in the MS will be used.
                                                   So, in an MS with XX,YY, if only YY is flagged, neither a
@@ -252,62 +255,105 @@
                          
                           Negative components in the model image will be included as is.
                          
                          [ Note : If an error occurs during image resampling/regridding,
                                       please try using task imregrid to resample the starting model
                                       image onto a CASA image with the target shape and
                                       coordinate system before supplying it via startmodel ]
-    specmode             Spectral definition mode (mfs,cube,cubedata, cubesource)
+    specmode             Spectral definition mode (mfs,cube,cubedata, cubesource, mvc)
                          
-                         mode='mfs' : Continuum imaging with only one output image channel.
-                                               (mode='cont' can also be used here)
+                         specmode='mfs' : Continuum imaging with only one output image channel.
+                                                        (mode='cont' can also be used here)
                          
-                         mode='cube' : Spectral line imaging with one or more channels
-                                                 Parameters start, width,and nchan define the spectral
-                                                 coordinate system and can be specified either in terms
-                                                 of channel numbers, frequency or velocity in whatever
-                                                 spectral frame is specified in 'outframe'.
-                                                 All internal and output images are made with outframe as the
-                                                 base spectral frame. However imaging code internally uses the fixed
-                                                 spectral frame, LSRK for automatic internal software
-                                                 Doppler tracking so that a spectral line observed over an
-                                                 extended time range will line up appropriately.
-                                                 Therefore the output images have additional spectral frame conversion
-                                                 layer in LSRK on the top the base frame.
+                         specmode='cube' : Spectral line imaging with one or more channels
+                                                        Parameters start, width,and nchan define the spectral
+                                                       coordinate system and can be specified either in terms
+                                                       of channel numbers, frequency or velocity in whatever
+                                                       spectral frame is specified in 'outframe'.
+                                                       All internal and output images are made with outframe as the
+                                                       base spectral frame. However imaging code internally uses the fixed
+                                                       spectral frame, LSRK for automatic internal software
+                                                       Doppler tracking so that a spectral line observed over an
+                                                       extended time range will line up appropriately.
+                                                       Therefore the output images have additional spectral frame conversion
+                                                        layer in LSRK on the top the base frame.
                          
                          
                                                  (Note : Even if the input parameters are specified in a frame
                                                              other than LSRK, the viewer still displays spectral
                                                              axis in LSRK by default because of the conversion frame
                                                              layer mentioned above. The viewer can be used to relabel
                                                              the spectral axis in any desired frame - via the spectral
                                                              reference option under axis label properties in the
                                                              data display options window.)
                          
                          
                                                  
                          
-                          mode='cubedata' : Spectral line imaging with one or more channels
+                         
+                          specmode='cubedata' : Spectral line imaging with one or more channels
                                                           There is no internal software Doppler tracking so
                                                           a spectral line observed over an extended time range
                                                           may be smeared out in frequency. There is strictly
                                                           no valid spectral frame with which to associate with the
                                                           output images, thus the image spectral  frame will
                                                           be labelled  "Undefined".
                          
                                                           
-                          mode='cubesource': Spectral line imaging while
+                          specmode='cubesource': Spectral line imaging while
                                                           tracking moving source (near field or solar system
                                                           objects). The velocity of the source is accounted
                                                           and the frequency reported is in the source frame.
                                                           As there is no "SOURCE" frame defined in CASA,
                                                           the frame in the image will be labelled "REST" (but do note the
                                                           velocity of a given line reported may be different from the rest frame
                                                           velocity if the emission region is moving w.r.t the systemic
                                                           velocity frame of the source)
+                         
+                          specmode='mvc' : Multiterm continuum imaging with cube major cycles. 
+                                                          This mode requires deconvolver='mtmfs' with nterms>1 
+                                                          and user-set choices of 'reffreq' and 'nchan'. 
+                         
+                                                          The output images and minor cycle are similar to specmode='mfs' 
+                                                          with deconvolver='mtmfs', but the major cycles are done in 
+                                                          cube mode (and require a setting of 'reffreq' and 'nchan'). 
+                                                          By default, frequency-dependent primary beam correction is 
+                                                          applied to each channel, before being combined across frequency
+                                                          to make the inputs to the 'mtmfs' deconvolver.  This results in 
+                                                          implicit wideband pb-correction, with the deconvolver seeing only
+                                                          the sky spectral structure.
+                         
+                                                          Note : There is currently no option to turn off wideband pb correction
+                                                          as part of the flat-sky normalization between the major and minor cycles.
+                                                          Therefore, 'mvc' with the 'standard' and 'wproject' gridders will also apply
+                                                          pblimits per channel, masking all regions outside of pblimit.                 	
+                                                          An option to retain sources outside the pblimit will be added in a future release. 
+                         
+                                                          Note : Below is some guidance for choosing 'nchan' and 'reffreq' :
+                                    
+                                                          The cube produced by the major cycle is used in a linear least square fits for Taylor
+                                                          polynomials per pixel. Therefore, one only needs as many channels in the cube, as
+                                                          required for an accurate polynomial fit for sources that have the strongest
+                                                          spectral structure.
+                         
+                                                          In general, 'nchan' needs to be greater than or equal to 'nterms', and the
+                                                          frequency range selected by the data will be evenly split into nchan channels.
+                                                          For a low-order polynomial fit, only a small number (around 10)
+                                                          channels are typically needed (for VLA/ALMA bandwidth ratios).
+                                                          'nchan=-1' applies a heuristic that results in a default of 10 cube channels
+                                                          for a 2:1 bandwidth ratio.
+                         
+                                                          nchan = MAX( bandwidth/(0.1*startfreq) ,  nterms+1 )
+                         
+                                                          Note: When running in parallel, the nchan selected may limit the speedup if it
+                                                          is smaller than the number of processes used.
+                         
+                                                          The 'reffreq' is the reference frequency used for the Taylor polynomial expansion.
+                                                          By default, in specmode='mvc', reffreq is set to the middle of the selected
+                                                          frequency range.
     reffreq              Reference frequency of the output image coordinate system
                          
                          Example :  reffreq='1.5GHz'    as a string with units.
                          
                          By default, it is calculated as the middle of the selected frequency range.
                          
                          For deconvolver='mtmfs' the Taylor expansion is also done about
@@ -1055,18 +1101,38 @@
                          
                          Note : Stand-alone PB-correction can be triggered by re-running
                                    tclean with the appropriate imagename and with
                                    niter=0, calcpsf=False, calcres=False, pbcor=True, vptable='vp.tab'
                                    ( where vp.tab is the name of the vpmanager file.
                                       See the inline help for the 'vptable' parameter )
                          
-                         Note : Multi-term PB correction that includes a correction for the
-                                   spectral index of the PB has not been enabled for the 4.7 release.
-                                   Please use the widebandpbcor task instead.
-                                   ( Wideband PB corrections are required when the amplitude of the
+                         Note : For deconvolver='mtmfs', pbcor will divide each Taylor term image by the .tt0 average PB.   
+                                    For all gridders, this calculation is accurate for small fractional bandwidths.  
+                         
+                                    For large fractional bandwidths, please use one of the following options.
+                         
+                                    (a) For single pointings, run the tclean task with specmode='mfs', deconvolver='mtmfs', 
+                                          and gridder='standard' with pbcor=True or False. 
+                                          If a PB-corrected spectral index is required, 
+                                          please use the widebandpbcor task to apply multi-tern PB-correction.
+                         
+                                    (b) For mosaics, run tclean task with specmode='mfs', deconvolver='mtmfs',
+                                          and gridder='awproject' , wbawp=True, conjbeams=True, with pbcor=True.  
+                                          This option applies wideband PB correction as part of the gridding step and
+                                          pbcor=True will be accurate because the spectral index map will already 
+                                          be PB-corrected. 
+                         
+                                    (c) For mosaics, run tclean with specmode='mvc', deconvolver='mtmfs', 
+                                          and gridder='standard' or 'mosaic' with pbcor=True.  
+                                          This option applies wideband PB-correction to channelized residual images
+                                          prior to the minor cycle and pbcor=True will be accurate because the spectral 
+                                          index map will already be PB-corrected. 
+                         
+                          Note : Frequency-dependent PB corrections are typically required for full-band imaging with the VLA. 
+                                      Wideband PB corrections are required when the amplitude of the
                                       brightest source is known accurately enough to be sensitive
                                       to the difference in the PB gain between the upper and lower
                                       end of the band at its location. As a guideline, the artificial spectral
                                       index due to the PB is -1.4 at the 0.5 gain level and less than -0.2
                                       at the 0.9 gain level at the middle frequency )
     outlierfile          Name of outlier-field image definitions
                          
@@ -1772,16 +1838,15 @@
 
 
     """
 
     _info_group_ = """imaging"""
     _info_desc_ = """Radio Interferometric Image Reconstruction"""
 
-    __schema = {'vis': {'anyof': [{'type': 'cReqPath', 'coerce': _coerce.expand_path}, {'type': 'cReqPathVec', 'coerce': [_coerce.to_list,_coerce.expand_pathvec]}]}, 'selectdata': {'type': 'cBool'}, 'field': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'spw': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'timerange': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'uvrange': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'antenna': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'scan': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'observation': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cInt'}]}, 'intent': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'datacolumn': {'type': 'cStr', 'coerce': _coerce.to_str}, 'imagename': {'anyof': [{'type': 'cInt'}, {'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'imsize': {'anyof': [{'type': 'cInt'}, {'type': 'cIntVec', 'coerce': [_coerce.to_list,_coerce.to_intvec]}]}, 'cell': {'anyof': [{'type': 'cIntVec', 'coerce': [_coerce.to_list,_coerce.to_intvec]}, {'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cFloat', 'coerce': _coerce.to_float}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}, {'type': 'cInt'}, {'type': 'cFloatVec', 'coerce': [_coerce.to_list,_coerce.to_floatvec]}]}, 'phasecenter': {'anyof': [{'type': 'cInt'}, {'type': 'cStr', 'coerce': _coerce.to_str}]}, 'stokes': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'I', 'IQUV', 'UV', 'RRLL', 'IQ', 'V', 'pseudoI', 'QU', 'YY', 'RR', 'Q', 'U', 'IV', 'XX', 'XXYY', 'LL' ]}, 'projection': {'type': 'cStr', 'coerce': _coerce.to_str}, 'startmodel': {'type': 'cVariant', 'coerce': [_coerce.to_variant]}, 'specmode': {'type': 'cVariant', 'coerce': [_coerce.to_variant] # <allowed> IS NOT ALLOWED FOR A PARAMETER OF TYPE any
-}, 'reffreq': {'type': 'cVariant', 'coerce': [_coerce.to_variant]}, 'nchan': {'type': 'cInt'}, 'start': {'type': 'cVariant', 'coerce': [_coerce.to_variant]}, 'width': {'type': 'cVariant', 'coerce': [_coerce.to_variant]}, 'outframe': {'type': 'cStr', 'coerce': _coerce.to_str}, 'veltype': {'type': 'cStr', 'coerce': _coerce.to_str}, 'restfreq': {'type': 'cVariant', 'coerce': [_coerce.to_variant]}, 'interpolation': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'nearest', 'linear', 'cubic' ]}, 'perchanweightdensity': {'type': 'cBool'}, 'gridder': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'widefield', 'wproject', 'imagemosaic', 'standard', 'awproject', 'wprojectft', 'mosaicft', 'ft', 'ftmosaic', 'mosaic', 'awprojectft', 'gridft' ]}, 'facets': {'type': 'cInt'}, 'psfphasecenter': {'anyof': [{'type': 'cInt'}, {'type': 'cStr', 'coerce': _coerce.to_str}]}, 'wprojplanes': {'type': 'cInt'}, 'vptable': {'type': 'cStr', 'coerce': _coerce.to_str}, 'mosweight': {'type': 'cBool'}, 'aterm': {'type': 'cBool'}, 'psterm': {'type': 'cBool'}, 'wbawp': {'type': 'cBool'}, 'conjbeams': {'type': 'cBool'}, 'cfcache': {'type': 'cStr', 'coerce': _coerce.to_str}, 'usepointing': {'type': 'cBool'}, 'computepastep': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'rotatepastep': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'pointingoffsetsigdev': {'anyof': [{'type': 'cIntVec', 'coerce': [_coerce.to_list,_coerce.to_intvec]}, {'type': 'cFloatVec', 'coerce': [_coerce.to_list,_coerce.to_floatvec]}]}, 'pblimit': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'normtype': {'type': 'cStr', 'coerce': _coerce.to_str}, 'deconvolver': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'clarkstokes_exp', 'mtmfs', 'mem', 'clarkstokes', 'hogbom', 'clark_exp', 'clark', 'asp', 'multiscale' ]}, 'scales': {'anyof': [{'type': 'cIntVec', 'coerce': [_coerce.to_list,_coerce.to_intvec]}, {'type': 'cFloatVec', 'coerce': [_coerce.to_list,_coerce.to_floatvec]}]}, 'nterms': {'type': 'cInt'}, 'smallscalebias': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'fusedthreshold': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'largestscale': {'type': 'cInt'}, 'restoration': {'type': 'cBool'}, 'restoringbeam': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'pbcor': {'type': 'cBool'}, 'outlierfile': {'type': 'cStr', 'coerce': _coerce.to_str}, 'weighting': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'briggsabs', 'briggs', 'briggsbwtaper', 'natural', 'radial', 'superuniform', 'uniform' ]}, 'robust': {'type': 'cFloat', 'coerce': _coerce.to_float, 'min': -2.0, 'max': 2.0}, 'noise': {'type': 'cVariant', 'coerce': [_coerce.to_variant]}, 'npixels': {'type': 'cInt'}, 'uvtaper': {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}, 'niter': {'type': 'cInt'}, 'gain': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'threshold': {'type': 'cVariant', 'coerce': [_coerce.to_variant]}, 'nsigma': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'cycleniter': {'type': 'cInt'}, 'cyclefactor': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'minpsffraction': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'maxpsffraction': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'interactive': {'type': 'cBool'}, 'nmajor': {'type': 'cInt'}, 'fullsummary': {'type': 'cBool'}, 'usemask': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'user', 'pb', 'auto-multithresh' ]}, 'mask': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'pbmask': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'sidelobethreshold': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'noisethreshold': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'lownoisethreshold': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'negativethreshold': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'smoothfactor': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'minbeamfrac': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'cutthreshold': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'growiterations': {'type': 'cInt'}, 'dogrowprune': {'type': 'cBool'}, 'minpercentchange': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'verbose': {'type': 'cBool'}, 'fastnoise': {'type': 'cBool'}, 'restart': {'type': 'cBool'}, 'savemodel': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'none', 'virtual', 'modelcolumn' ]}, 'calcres': {'type': 'cBool'}, 'calcpsf': {'type': 'cBool'}, 'psfcutoff': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'parallel': {'type': 'cBool'}}
+    __schema = {'vis': {'anyof': [{'type': 'cReqPath', 'coerce': _coerce.expand_path}, {'type': 'cReqPathVec', 'coerce': [_coerce.to_list,_coerce.expand_pathvec]}]}, 'selectdata': {'type': 'cBool'}, 'field': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'spw': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'timerange': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'uvrange': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'antenna': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'scan': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'observation': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cInt'}]}, 'intent': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'datacolumn': {'type': 'cStr', 'coerce': _coerce.to_str}, 'imagename': {'anyof': [{'type': 'cInt'}, {'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'imsize': {'anyof': [{'type': 'cInt'}, {'type': 'cIntVec', 'coerce': [_coerce.to_list,_coerce.to_intvec]}]}, 'cell': {'anyof': [{'type': 'cIntVec', 'coerce': [_coerce.to_list,_coerce.to_intvec]}, {'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cFloat', 'coerce': _coerce.to_float}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}, {'type': 'cInt'}, {'type': 'cFloatVec', 'coerce': [_coerce.to_list,_coerce.to_floatvec]}]}, 'phasecenter': {'anyof': [{'type': 'cInt'}, {'type': 'cStr', 'coerce': _coerce.to_str}]}, 'stokes': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'I', 'IQUV', 'UV', 'RRLL', 'IQ', 'V', 'pseudoI', 'QU', 'YY', 'RR', 'Q', 'U', 'IV', 'XX', 'XXYY', 'LL' ]}, 'projection': {'type': 'cStr', 'coerce': _coerce.to_str}, 'startmodel': {'type': 'cVariant', 'coerce': [_coerce.to_variant]}, 'specmode': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'cont', 'cubedata', 'cube', 'cubesource', 'mfs', 'mvc' ]}, 'reffreq': {'type': 'cVariant', 'coerce': [_coerce.to_variant]}, 'nchan': {'type': 'cInt'}, 'start': {'type': 'cVariant', 'coerce': [_coerce.to_variant]}, 'width': {'type': 'cVariant', 'coerce': [_coerce.to_variant]}, 'outframe': {'type': 'cStr', 'coerce': _coerce.to_str}, 'veltype': {'type': 'cStr', 'coerce': _coerce.to_str}, 'restfreq': {'type': 'cVariant', 'coerce': [_coerce.to_variant]}, 'interpolation': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'nearest', 'linear', 'cubic' ]}, 'perchanweightdensity': {'type': 'cBool'}, 'gridder': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'widefield', 'wproject', 'imagemosaic', 'standard', 'awproject', 'wprojectft', 'mosaicft', 'ft', 'ftmosaic', 'mosaic', 'awprojectft', 'gridft' ]}, 'facets': {'type': 'cInt'}, 'psfphasecenter': {'anyof': [{'type': 'cInt'}, {'type': 'cStr', 'coerce': _coerce.to_str}]}, 'wprojplanes': {'type': 'cInt'}, 'vptable': {'type': 'cStr', 'coerce': _coerce.to_str}, 'mosweight': {'type': 'cBool'}, 'aterm': {'type': 'cBool'}, 'psterm': {'type': 'cBool'}, 'wbawp': {'type': 'cBool'}, 'conjbeams': {'type': 'cBool'}, 'cfcache': {'type': 'cStr', 'coerce': _coerce.to_str}, 'usepointing': {'type': 'cBool'}, 'computepastep': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'rotatepastep': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'pointingoffsetsigdev': {'anyof': [{'type': 'cIntVec', 'coerce': [_coerce.to_list,_coerce.to_intvec]}, {'type': 'cFloatVec', 'coerce': [_coerce.to_list,_coerce.to_floatvec]}]}, 'pblimit': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'normtype': {'type': 'cStr', 'coerce': _coerce.to_str}, 'deconvolver': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'clarkstokes_exp', 'mtmfs', 'mem', 'clarkstokes', 'hogbom', 'clark_exp', 'clark', 'asp', 'multiscale' ]}, 'scales': {'anyof': [{'type': 'cIntVec', 'coerce': [_coerce.to_list,_coerce.to_intvec]}, {'type': 'cFloatVec', 'coerce': [_coerce.to_list,_coerce.to_floatvec]}]}, 'nterms': {'type': 'cInt'}, 'smallscalebias': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'fusedthreshold': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'largestscale': {'type': 'cInt'}, 'restoration': {'type': 'cBool'}, 'restoringbeam': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'pbcor': {'type': 'cBool'}, 'outlierfile': {'type': 'cStr', 'coerce': _coerce.to_str}, 'weighting': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'briggsabs', 'briggs', 'briggsbwtaper', 'natural', 'radial', 'superuniform', 'uniform' ]}, 'robust': {'type': 'cFloat', 'coerce': _coerce.to_float, 'min': -2.0, 'max': 2.0}, 'noise': {'type': 'cVariant', 'coerce': [_coerce.to_variant]}, 'npixels': {'type': 'cInt'}, 'uvtaper': {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}, 'niter': {'type': 'cInt'}, 'gain': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'threshold': {'type': 'cVariant', 'coerce': [_coerce.to_variant]}, 'nsigma': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'cycleniter': {'type': 'cInt'}, 'cyclefactor': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'minpsffraction': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'maxpsffraction': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'interactive': {'type': 'cBool'}, 'nmajor': {'type': 'cInt'}, 'fullsummary': {'type': 'cBool'}, 'usemask': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'user', 'pb', 'auto-multithresh' ]}, 'mask': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'pbmask': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'sidelobethreshold': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'noisethreshold': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'lownoisethreshold': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'negativethreshold': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'smoothfactor': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'minbeamfrac': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'cutthreshold': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'growiterations': {'type': 'cInt'}, 'dogrowprune': {'type': 'cBool'}, 'minpercentchange': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'verbose': {'type': 'cBool'}, 'fastnoise': {'type': 'cBool'}, 'restart': {'type': 'cBool'}, 'savemodel': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'none', 'virtual', 'modelcolumn' ]}, 'calcres': {'type': 'cBool'}, 'calcpsf': {'type': 'cBool'}, 'psfcutoff': {'type': 'cFloat', 'coerce': _coerce.to_float}, 'parallel': {'type': 'cBool'}}
 
     def __init__(self):
         self.__stdout = None
         self.__stderr = None
         self.__root_frame_ = None
 
     def __globals_(self):
@@ -2089,20 +2154,22 @@
         if self.__deconvolver( glb ) == "mtmfs": return int(2)
         return None
     def __pointingoffsetsigdev_dflt( self, glb ):
         if self.__gridder( glb ) == "awproject": return []
         if self.__gridder( glb ) == "awprojectft": return []
         return None
     def __nchan_dflt( self, glb ):
+        if self.__specmode( glb ) == "mvc": return int(-1)
         if self.__specmode( glb ) == "cube": return int(-1)
         if self.__specmode( glb ) == "cubesource": return int(-1)
         if self.__specmode( glb ) == "cubedata": return int(-1)
         return None
     def __reffreq_dflt( self, glb ):
         if self.__specmode( glb ) == "mfs": return ""
+        if self.__specmode( glb ) == "mvc": return ""
         return None
     def __conjbeams_dflt( self, glb ):
         if self.__gridder( glb ) == "mosaic": return bool(False)
         if self.__gridder( glb ) == "mosaicft": return bool(False)
         if self.__gridder( glb ) == "awproject": return bool(False)
         if self.__gridder( glb ) == "awprojectft": return bool(False)
         return None
@@ -2818,15 +2885,15 @@
         self.__do_inp_output('%-23.23s = %s%-23s%s' % ('startmodel',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
     def __specmode_inp(self):
         def xml_default( ):
             ## play the crazy subparameter shell game
             dflt = self.__specmode_dflt( self.__globals_( ) )
             if dflt is not None: return dflt
             return 'mfs'
-        description = 'Spectral definition mode (mfs,cube,cubedata, cubesource)'
+        description = 'Spectral definition mode (mfs,cube,cubedata, cubesource,mvc)'
         value = self.__specmode( self.__globals_( ) )
         (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'specmode': value},{'specmode': self.__schema['specmode']}) else ('\x1B[91m','\x1B[0m')
         self.__do_inp_output('\x1B[1m\x1B[47m%-23.23s =\x1B[0m %s%-23s%s' % ('specmode',pre,self.__to_string_(value),post),description,13+len(pre)+len(post))
     def __reffreq_inp(self):
         def xml_default( ):
             ## play the crazy subparameter shell game
             dflt = self.__reffreq_dflt( self.__globals_( ) )
```

## casashell/private/tsdimaging.py

```diff
@@ -1,9 +1,9 @@
 ##################### generated by xml-casa (v2) from tsdimaging.xml ################
-##################### 0522846f652aa36987e18cd7a467d7d6 ##############################
+##################### 2d7f46f4a73503efdef1a7aaf32a62c9 ##############################
 from __future__ import absolute_import
 from casashell.private.stack_manip import find_local as __sf__
 from casashell.private.stack_manip import find_frame as _find_frame
 from casatools.typecheck import validator as _pc
 from casatools.coercetype import coerce as _coerce
 from casatools.errors import create_error_string
 from casatasks.private.task_tsdimaging import tsdimaging as _tsdimaging_t
@@ -74,36 +74,37 @@
     overwrite      overwrite the output file if already exists [True, False]
     field          select data by field IDs and names, e.g. \'3C2*\' (\'\'=all)
     spw            select data by IF IDs (spectral windows), e.g. \'3,5,7\' (\'\'=all)
     antenna        select data by antenna names or IDs, e.g, \'PM03\' (\'\' = all antennas)
     scan           select data by scan numbers, e.g. \'21~23\' (\'\'=all)
     intent         select data by observational intent, e.g. \'*ON_SOURCE*\' (\'\'=all)
     timerange      select data by range of time, e.g. 20:15:00~20:16:00 (\'\'=all)
-    mode           spectral gridding type
+    outframe       velocity frame of output image (''=current frame or LSRK for multiple-MS inputs)
+    mode           spectral gridding type [\'channel\', \'frequency\', \'velocity\']
     nchan          number of channels (planes) in output image (-1=all)
     start          start of output spectral dimension, e.g. \'0\', \'110GHz\', \'-20km/s\'
     width          width of output spectral channels
     veltype        velocity definition
     specmode       Spectral definition mode (cube, cubedata, cubesource)
-    outframe       velocity frame of output image (''=current frame or LSRK for multiple-MS inputs)
+    pointingcolumn pointing data column to use
+    convertfirst   Specify whether the direction of the specified pointing column must be converted to image"s reference frame prior to being interpolated at data-taking time, and when. "never": interpolate against the pointing column, then convert.  "always": interpolate against the beforehand converted pointing column. "auto": if there are less pointings than selected data rows convert first, else interpolate first
+    projection     map projection type
+    imsize         x and y image size in pixels, e.g., [64,64]. Single value: same for both spatial axes ([] = number of pixels to cover whole pointings in MSes)
+    cell           x and y cell size, (e.g., [\'8arcsec\',\'8arcsec\']. default unit arcmin. ('' = 1/3 of FWHM of primary beam)
+    phasecenter    image center direction: position or field index or ephemeris source info, e.g., \'J2000 17:30:15.0 -25.30.00.0\', \'MARS\'. (\'\' = the center of pointing directions in MSes)
+    stokes         stokes parameters or polarization types to image, e.g. \'I\', \'XX\'
     gridfunction   gridding function for imaging (see description in help)
     convsupport    convolution support for gridding
     truncate       truncation radius for gridding
     gwidth         HWHM for gaussian
     jwidth         c-parameter for jinc function
-    imsize         x and y image size in pixels, e.g., [64,64]. Single value: same for both spatial axes ([] = number of pixels to cover whole pointings in MSes)
-    cell           x and y cell size, (e.g., [\'8arcsec\',\'8arcsec\']. default unit arcmin. ('' = 1/3 of FWHM of primary beam)
-    phasecenter    image center direction: position or field index or ephemeris source info, e.g., \'J2000 17:30:15.0 -25.30.00.0\', \'MARS\'. (\'\' = the center of pointing directions in MSes)
-    projection     map projection type
-    pointingcolumn pointing data column to use
-    restfreq       rest frequency to assign to image, e.g., \'114.5GHz\'. When the default value \'\' is used, the task currently internally uses REST_FREQUENCY of SOURCE table or mean frequency of given spectral window as a default value.
-    stokes         stokes parameters or polarization types to image, e.g. \'I\', \'XX\'
+    clipminmax     Clip minimum and maximum value from each pixel. Note the benefit of clipping is lost when the number of integrations contributing to each gridded pixel is small, or where the incidence of spurious datapoints is approximately or greater than the number of beams (in area) encompassed by expected image.
     minweight      Minimum weight ratio to the median of weight used in weight correction and weight beased masking
     brightnessunit Overwrite the brightness unit in image (\'\' = respect the unit in MS) [\'K\' or \'Jy/beam\']
-    clipminmax     Clip minimum and maximum value from each pixel. Note the benefit of clipping is lost when the number of integrations contributing to each gridded pixel is small, or where the incidence of spurious datapoints is approximately or greater than the number of beams (in area) encompassed by expected image.
+    restfreq       rest frequency to assign to image, e.g., \'114.5GHz\'. When the default value \'\' is used, the task currently internally uses REST_FREQUENCY of SOURCE table or mean frequency of given spectral window as a default value.
     [1;42mRETURNS[1;m           void
 
     --------- examples -----------------------------------------------------------
 
     
     Keyword arguments:
     infiles -- a list of names of input SD Measurementsets
@@ -400,15 +401,15 @@
 
 
     """
 
     _info_group_ = """single dish"""
     _info_desc_ = """SD task: imaging for total power and spectral data"""
 
-    __schema = {'infiles': {'type': 'cReqPathVec', 'coerce': [_coerce.to_list,_coerce.expand_pathvec]}, 'outfile': {'type': 'cStr', 'coerce': _coerce.to_str}, 'overwrite': {'type': 'cBool'}, 'field': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'spw': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'antenna': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'scan': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'intent': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'timerange': {'type': 'cStr', 'coerce': _coerce.to_str}, 'mode': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'channel', 'frequency', 'velocity' ]}, 'nchan': {'type': 'cInt'}, 'start': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cInt'}]}, 'width': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cInt'}]}, 'veltype': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'OPTICAL', 'RELATIVISTIC', 'radio', 'true', 'optical', 'RADIO', 'TRUE', 'relativistic' ]}, 'specmode': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'cube', 'cubedata', 'cubesource' ]}, 'outframe': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'LSRK', 'CMB', 'geo', 'bary', 'GALACTO', 'GEO', 'TOPO', 'LSRD', 'lsrk', 'topo', 'LGROUP', 'BARY', 'lsrd', 'cmb', 'galacto', 'lgroup', '' ]}, 'gridfunction': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'GJINC', 'pb', 'sf', 'GAUSS', 'PB', 'SF', 'gauss', 'BOX', 'box', 'gjinc' ]}, 'convsupport': {'type': 'cInt'}, 'truncate': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cInt'}, {'type': 'cFloat', 'coerce': _coerce.to_float}]}, 'gwidth': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cInt'}, {'type': 'cFloat', 'coerce': _coerce.to_float}]}, 'jwidth': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cInt'}, {'type': 'cFloat', 'coerce': _coerce.to_float}]}, 'imsize': {'anyof': [{'type': 'cIntVec', 'coerce': [_coerce.to_list,_coerce.to_intvec]}, {'type': 'cFloatVec', 'coerce': [_coerce.to_list,_coerce.to_floatvec]}]}, 'cell': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}, {'type': 'cFloatVec', 'coerce': [_coerce.to_list,_coerce.to_floatvec]}]}, 'phasecenter': {'type': 'cVariant', 'coerce': [_coerce.to_variant]}, 'projection': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'sin', 'SIN', 'SFL', 'CAR', 'sfl', 'car', 'TAN', 'tan' ]}, 'pointingcolumn': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'TARGET', 'encoder', 'ENCODER', 'source_offset', 'pointing_offset', 'target', 'POINTING_OFFSET', 'DIRECTION', 'SOURCE_OFFSET', 'direction' ]}, 'restfreq': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cFloat', 'coerce': _coerce.to_float}]}, 'stokes': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'I', 'IQUV', 'UV', 'RRLL', 'IQ', 'V', 'pseudoI', 'QU', 'YY', 'RR', 'Q', 'U', 'IV', 'XX', 'XXYY', 'LL' ]}, 'minweight': {'type': 'cFloat', 'coerce': _coerce.to_float, 'min': 0}, 'brightnessunit': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ '', 'K', 'Jy/beam' ]}, 'clipminmax': {'type': 'cBool'}}
+    __schema = {'infiles': {'type': 'cReqPathVec', 'coerce': [_coerce.to_list,_coerce.expand_pathvec]}, 'outfile': {'type': 'cStr', 'coerce': _coerce.to_str}, 'overwrite': {'type': 'cBool'}, 'field': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'spw': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'antenna': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'scan': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'intent': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}]}, 'timerange': {'type': 'cStr', 'coerce': _coerce.to_str}, 'outframe': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'LSRK', 'CMB', 'geo', 'bary', 'GALACTO', 'GEO', 'TOPO', 'LSRD', 'lsrk', 'topo', 'LGROUP', 'BARY', 'lsrd', 'cmb', 'galacto', 'lgroup', '' ]}, 'mode': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'channel', 'frequency', 'velocity' ]}, 'nchan': {'type': 'cInt'}, 'start': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cInt'}]}, 'width': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cInt'}]}, 'veltype': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'OPTICAL', 'RELATIVISTIC', 'radio', 'true', 'optical', 'RADIO', 'TRUE', 'relativistic' ]}, 'specmode': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'cube', 'cubedata', 'cubesource' ]}, 'pointingcolumn': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'TARGET', 'encoder', 'ENCODER', 'source_offset', 'pointing_offset', 'target', 'POINTING_OFFSET', 'DIRECTION', 'SOURCE_OFFSET', 'direction' ]}, 'convertfirst': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'never', 'auto', 'always' ]}, 'projection': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'sin', 'SIN', 'SFL', 'CAR', 'sfl', 'car', 'TAN', 'tan' ]}, 'imsize': {'anyof': [{'type': 'cIntVec', 'coerce': [_coerce.to_list,_coerce.to_intvec]}, {'type': 'cFloatVec', 'coerce': [_coerce.to_list,_coerce.to_floatvec]}]}, 'cell': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cStrVec', 'coerce': [_coerce.to_list,_coerce.to_strvec]}, {'type': 'cFloatVec', 'coerce': [_coerce.to_list,_coerce.to_floatvec]}]}, 'phasecenter': {'type': 'cVariant', 'coerce': [_coerce.to_variant]}, 'stokes': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'I', 'IQUV', 'UV', 'RRLL', 'IQ', 'V', 'pseudoI', 'QU', 'YY', 'RR', 'Q', 'U', 'IV', 'XX', 'XXYY', 'LL' ]}, 'gridfunction': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ 'GJINC', 'pb', 'sf', 'GAUSS', 'PB', 'SF', 'gauss', 'BOX', 'box', 'gjinc' ]}, 'convsupport': {'type': 'cInt'}, 'truncate': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cInt'}, {'type': 'cFloat', 'coerce': _coerce.to_float}]}, 'gwidth': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cInt'}, {'type': 'cFloat', 'coerce': _coerce.to_float}]}, 'jwidth': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cInt'}, {'type': 'cFloat', 'coerce': _coerce.to_float}]}, 'clipminmax': {'type': 'cBool'}, 'minweight': {'type': 'cFloat', 'coerce': _coerce.to_float, 'min': 0}, 'brightnessunit': {'type': 'cStr', 'coerce': _coerce.to_str, 'allowed': [ '', 'K', 'Jy/beam' ]}, 'restfreq': {'anyof': [{'type': 'cStr', 'coerce': _coerce.to_str}, {'type': 'cFloat', 'coerce': _coerce.to_float}]}}
 
     def __init__(self):
         self.__stdout = None
         self.__stderr = None
         self.__root_frame_ = None
 
     def __globals_(self):
@@ -504,14 +505,21 @@
     def __spw_dflt( self, glb ):
         return ''
 
     def __spw( self, glb ):
         if 'spw' in glb: return glb['spw']
         return ''
 
+    def __convertfirst_dflt( self, glb ):
+        return 'never'
+
+    def __convertfirst( self, glb ):
+        if 'convertfirst' in glb: return glb['convertfirst']
+        return 'never'
+
     def __outfile_dflt( self, glb ):
         return ''
 
     def __outfile( self, glb ):
         if 'outfile' in glb: return glb['outfile']
         return ''
 
@@ -662,14 +670,19 @@
     def __width_dflt( self, glb ):
         if self.__mode( glb ) == "channel": return ""
         if self.__mode( glb ) == "frequency": return ""
         if self.__mode( glb ) == "velocity": return ""
         return None
 
     #--------- return subparam values -------------------------------------------------
+    def __outframe( self, glb ):
+        if 'outframe' in glb: return glb['outframe']
+        dflt = self.__outframe_dflt( glb )
+        if dflt is not None: return dflt
+        return ''
     def __nchan( self, glb ):
         if 'nchan' in glb: return glb['nchan']
         dflt = self.__nchan_dflt( glb )
         if dflt is not None: return dflt
         return int(-1)
     def __start( self, glb ):
         if 'start' in glb: return glb['start']
@@ -682,19 +695,14 @@
         if dflt is not None: return dflt
         return int(1)
     def __veltype( self, glb ):
         if 'veltype' in glb: return glb['veltype']
         dflt = self.__veltype_dflt( glb )
         if dflt is not None: return dflt
         return 'radio'
-    def __outframe( self, glb ):
-        if 'outframe' in glb: return glb['outframe']
-        dflt = self.__outframe_dflt( glb )
-        if dflt is not None: return dflt
-        return ''
     def __convsupport( self, glb ):
         if 'convsupport' in glb: return glb['convsupport']
         dflt = self.__convsupport_dflt( glb )
         if dflt is not None: return dflt
         return int(-1)
     def __truncate( self, glb ):
         if 'truncate' in glb: return glb['truncate']
@@ -799,14 +807,25 @@
             dflt = self.__timerange_dflt( self.__globals_( ) )
             if dflt is not None: return dflt
             return ''
         description = 'select data by range of time, e.g. 20:15:00~20:16:00 (\'\'=all)'
         value = self.__timerange( self.__globals_( ) )
         (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'timerange': value},{'timerange': self.__schema['timerange']}) else ('\x1B[91m','\x1B[0m')
         self.__do_inp_output('%-14.14s = %s%-23s%s' % ('timerange',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
+    def __outframe_inp(self):
+        def xml_default( ):
+            ## play the crazy subparameter shell game
+            dflt = self.__outframe_dflt( self.__globals_( ) )
+            if dflt is not None: return dflt
+            return ''
+        if self.__outframe_dflt( self.__globals_( ) ) is not None:
+             description = 'velocity frame of output image [\'lsrk\', \'lsrd\', \'bary\', \'geo\', \'topo\', \'galacto\', \'lgroup\', \'cmb\'] (\'\'=current frame or LSRK for multiple-MS inputs)'
+             value = self.__outframe( self.__globals_( ) )
+             (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'outframe': value},{'outframe': self.__schema['outframe']}) else ('\x1B[91m','\x1B[0m')
+             self.__do_inp_output('   \x1B[92m%-11.11s =\x1B[0m %s%-23s%s' % ('outframe',pre,self.__to_string_(value),post),description,9+len(pre)+len(post))
     def __mode_inp(self):
         def xml_default( ):
             ## play the crazy subparameter shell game
             dflt = self.__mode_dflt( self.__globals_( ) )
             if dflt is not None: return dflt
             return 'channel'
         description = 'spectral gridding type [\'channel\', \'frequency\', \'velocity\']'
@@ -863,25 +882,84 @@
             dflt = self.__specmode_dflt( self.__globals_( ) )
             if dflt is not None: return dflt
             return 'cube'
         description = 'Spectral definition mode (cube, cubedata, cubesource)'
         value = self.__specmode( self.__globals_( ) )
         (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'specmode': value},{'specmode': self.__schema['specmode']}) else ('\x1B[91m','\x1B[0m')
         self.__do_inp_output('\x1B[1m\x1B[47m%-14.14s =\x1B[0m %s%-23s%s' % ('specmode',pre,self.__to_string_(value),post),description,13+len(pre)+len(post))
-    def __outframe_inp(self):
+    def __pointingcolumn_inp(self):
         def xml_default( ):
             ## play the crazy subparameter shell game
-            dflt = self.__outframe_dflt( self.__globals_( ) )
+            dflt = self.__pointingcolumn_dflt( self.__globals_( ) )
+            if dflt is not None: return dflt
+            return 'direction'
+        description = 'pointing data column to use [\'direction\', \'target\', \'pointing_offset\', \'source_offset\' or \'encoder\']'
+        value = self.__pointingcolumn( self.__globals_( ) )
+        (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'pointingcolumn': value},{'pointingcolumn': self.__schema['pointingcolumn']}) else ('\x1B[91m','\x1B[0m')
+        self.__do_inp_output('%-14.14s = %s%-23s%s' % ('pointingcolumn',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
+    def __convertfirst_inp(self):
+        def xml_default( ):
+            ## play the crazy subparameter shell game
+            dflt = self.__convertfirst_dflt( self.__globals_( ) )
+            if dflt is not None: return dflt
+            return 'never'
+        description = 'pointing column: direction conversion-interpolation processing scheme to use ["never", "auto", "always"]'
+        value = self.__convertfirst( self.__globals_( ) )
+        (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'convertfirst': value},{'convertfirst': self.__schema['convertfirst']}) else ('\x1B[91m','\x1B[0m')
+        self.__do_inp_output('%-14.14s = %s%-23s%s' % ('convertfirst',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
+    def __projection_inp(self):
+        def xml_default( ):
+            ## play the crazy subparameter shell game
+            dflt = self.__projection_dflt( self.__globals_( ) )
+            if dflt is not None: return dflt
+            return 'SIN'
+        description = 'map projection type'
+        value = self.__projection( self.__globals_( ) )
+        (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'projection': value},{'projection': self.__schema['projection']}) else ('\x1B[91m','\x1B[0m')
+        self.__do_inp_output('%-14.14s = %s%-23s%s' % ('projection',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
+    def __imsize_inp(self):
+        def xml_default( ):
+            ## play the crazy subparameter shell game
+            dflt = self.__imsize_dflt( self.__globals_( ) )
+            if dflt is not None: return dflt
+            return [  ]
+        description = 'x and y image size in pixels, e.g., [64,64]. Single value: same for both spatial axes ([] = number of pixels to cover whole pointings in MSes)'
+        value = self.__imsize( self.__globals_( ) )
+        (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'imsize': value},{'imsize': self.__schema['imsize']}) else ('\x1B[91m','\x1B[0m')
+        self.__do_inp_output('%-14.14s = %s%-23s%s' % ('imsize',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
+    def __cell_inp(self):
+        def xml_default( ):
+            ## play the crazy subparameter shell game
+            dflt = self.__cell_dflt( self.__globals_( ) )
             if dflt is not None: return dflt
             return ''
-        if self.__outframe_dflt( self.__globals_( ) ) is not None:
-             description = 'velocity frame of output image [\'lsrk\', \'lsrd\', \'bary\', \'geo\', \'topo\', \'galacto\', \'lgroup\', \'cmb\'] (\'\'=current frame or LSRK for multiple-MS inputs)'
-             value = self.__outframe( self.__globals_( ) )
-             (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'outframe': value},{'outframe': self.__schema['outframe']}) else ('\x1B[91m','\x1B[0m')
-             self.__do_inp_output('   \x1B[92m%-11.11s =\x1B[0m %s%-23s%s' % ('outframe',pre,self.__to_string_(value),post),description,9+len(pre)+len(post))
+        description = 'x and y cell size, (e.g., [\'8arcsec\',\'8arcsec\']. default unit arcmin. ('' = 1/3 of FWHM of primary beam)'
+        value = self.__cell( self.__globals_( ) )
+        (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'cell': value},{'cell': self.__schema['cell']}) else ('\x1B[91m','\x1B[0m')
+        self.__do_inp_output('%-14.14s = %s%-23s%s' % ('cell',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
+    def __phasecenter_inp(self):
+        def xml_default( ):
+            ## play the crazy subparameter shell game
+            dflt = self.__phasecenter_dflt( self.__globals_( ) )
+            if dflt is not None: return dflt
+            return ''
+        description = 'image center direction: position or field index or ephemeris source info, e.g., \'J2000 17:30:15.0 -25.30.00.0\', \'MARS\'. (\'\' = the center of pointing directions in MSes)'
+        value = self.__phasecenter( self.__globals_( ) )
+        (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'phasecenter': value},{'phasecenter': self.__schema['phasecenter']}) else ('\x1B[91m','\x1B[0m')
+        self.__do_inp_output('%-14.14s = %s%-23s%s' % ('phasecenter',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
+    def __stokes_inp(self):
+        def xml_default( ):
+            ## play the crazy subparameter shell game
+            dflt = self.__stokes_dflt( self.__globals_( ) )
+            if dflt is not None: return dflt
+            return 'I'
+        description = 'stokes parameters or polarization types to image, e.g. \'I\', \'XX\''
+        value = self.__stokes( self.__globals_( ) )
+        (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'stokes': value},{'stokes': self.__schema['stokes']}) else ('\x1B[91m','\x1B[0m')
+        self.__do_inp_output('%-14.14s = %s%-23s%s' % ('stokes',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
     def __gridfunction_inp(self):
         def xml_default( ):
             ## play the crazy subparameter shell game
             dflt = self.__gridfunction_dflt( self.__globals_( ) )
             if dflt is not None: return dflt
             return 'BOX'
         description = 'gridding function for imaging [\'BOX\', \'SF\', \'PB\', \'GAUSS\' or \'GJINC\'] (see description in help)'
@@ -928,84 +1006,24 @@
             if dflt is not None: return dflt
             return int(-1)
         if self.__jwidth_dflt( self.__globals_( ) ) is not None:
              description = 'c-parameter for jinc function'
              value = self.__jwidth( self.__globals_( ) )
              (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'jwidth': value},{'jwidth': self.__schema['jwidth']}) else ('\x1B[91m','\x1B[0m')
              self.__do_inp_output('   \x1B[92m%-11.11s =\x1B[0m %s%-23s%s' % ('jwidth',pre,self.__to_string_(value),post),description,9+len(pre)+len(post))
-    def __imsize_inp(self):
-        def xml_default( ):
-            ## play the crazy subparameter shell game
-            dflt = self.__imsize_dflt( self.__globals_( ) )
-            if dflt is not None: return dflt
-            return [  ]
-        description = 'x and y image size in pixels, e.g., [64,64]. Single value: same for both spatial axes ([] = number of pixels to cover whole pointings in MSes)'
-        value = self.__imsize( self.__globals_( ) )
-        (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'imsize': value},{'imsize': self.__schema['imsize']}) else ('\x1B[91m','\x1B[0m')
-        self.__do_inp_output('%-14.14s = %s%-23s%s' % ('imsize',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
-    def __cell_inp(self):
-        def xml_default( ):
-            ## play the crazy subparameter shell game
-            dflt = self.__cell_dflt( self.__globals_( ) )
-            if dflt is not None: return dflt
-            return ''
-        description = 'x and y cell size, (e.g., [\'8arcsec\',\'8arcsec\']. default unit arcmin. ('' = 1/3 of FWHM of primary beam)'
-        value = self.__cell( self.__globals_( ) )
-        (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'cell': value},{'cell': self.__schema['cell']}) else ('\x1B[91m','\x1B[0m')
-        self.__do_inp_output('%-14.14s = %s%-23s%s' % ('cell',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
-    def __phasecenter_inp(self):
-        def xml_default( ):
-            ## play the crazy subparameter shell game
-            dflt = self.__phasecenter_dflt( self.__globals_( ) )
-            if dflt is not None: return dflt
-            return ''
-        description = 'image center direction: position or field index or ephemeris source info, e.g., \'J2000 17:30:15.0 -25.30.00.0\', \'MARS\'. (\'\' = the center of pointing directions in MSes)'
-        value = self.__phasecenter( self.__globals_( ) )
-        (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'phasecenter': value},{'phasecenter': self.__schema['phasecenter']}) else ('\x1B[91m','\x1B[0m')
-        self.__do_inp_output('%-14.14s = %s%-23s%s' % ('phasecenter',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
-    def __projection_inp(self):
-        def xml_default( ):
-            ## play the crazy subparameter shell game
-            dflt = self.__projection_dflt( self.__globals_( ) )
-            if dflt is not None: return dflt
-            return 'SIN'
-        description = 'map projection type'
-        value = self.__projection( self.__globals_( ) )
-        (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'projection': value},{'projection': self.__schema['projection']}) else ('\x1B[91m','\x1B[0m')
-        self.__do_inp_output('%-14.14s = %s%-23s%s' % ('projection',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
-    def __pointingcolumn_inp(self):
-        def xml_default( ):
-            ## play the crazy subparameter shell game
-            dflt = self.__pointingcolumn_dflt( self.__globals_( ) )
-            if dflt is not None: return dflt
-            return 'direction'
-        description = 'pointing data column to use [\'direction\', \'target\', \'pointing_offset\', \'source_offset\' or \'encoder\']'
-        value = self.__pointingcolumn( self.__globals_( ) )
-        (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'pointingcolumn': value},{'pointingcolumn': self.__schema['pointingcolumn']}) else ('\x1B[91m','\x1B[0m')
-        self.__do_inp_output('%-14.14s = %s%-23s%s' % ('pointingcolumn',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
-    def __restfreq_inp(self):
-        def xml_default( ):
-            ## play the crazy subparameter shell game
-            dflt = self.__restfreq_dflt( self.__globals_( ) )
-            if dflt is not None: return dflt
-            return ''
-        description = 'rest frequency to assign to image, e.g., \'114.5GHz\'. When the default value \'\' is used, the task currently internally uses REST_FREQUENCY of SOURCE table or mean frequency of given spectral window as a default value.'
-        value = self.__restfreq( self.__globals_( ) )
-        (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'restfreq': value},{'restfreq': self.__schema['restfreq']}) else ('\x1B[91m','\x1B[0m')
-        self.__do_inp_output('%-14.14s = %s%-23s%s' % ('restfreq',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
-    def __stokes_inp(self):
+    def __clipminmax_inp(self):
         def xml_default( ):
             ## play the crazy subparameter shell game
-            dflt = self.__stokes_dflt( self.__globals_( ) )
+            dflt = self.__clipminmax_dflt( self.__globals_( ) )
             if dflt is not None: return dflt
-            return 'I'
-        description = 'stokes parameters or polarization types to image, e.g. \'I\', \'XX\''
-        value = self.__stokes( self.__globals_( ) )
-        (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'stokes': value},{'stokes': self.__schema['stokes']}) else ('\x1B[91m','\x1B[0m')
-        self.__do_inp_output('%-14.14s = %s%-23s%s' % ('stokes',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
+            return False
+        description = 'Clip minimum and maximum value from each pixel'
+        value = self.__clipminmax( self.__globals_( ) )
+        (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'clipminmax': value},{'clipminmax': self.__schema['clipminmax']}) else ('\x1B[91m','\x1B[0m')
+        self.__do_inp_output('%-14.14s = %s%-23s%s' % ('clipminmax',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
     def __minweight_inp(self):
         def xml_default( ):
             ## play the crazy subparameter shell game
             dflt = self.__minweight_dflt( self.__globals_( ) )
             if dflt is not None: return dflt
             return float(0.1)
         description = 'Minimum weight ratio to use'
@@ -1018,24 +1036,24 @@
             dflt = self.__brightnessunit_dflt( self.__globals_( ) )
             if dflt is not None: return dflt
             return ''
         description = 'Overwrite the brightness unit in image (\'\' = respect the unit in MS) [\'K\' or \'Jy/beam\']'
         value = self.__brightnessunit( self.__globals_( ) )
         (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'brightnessunit': value},{'brightnessunit': self.__schema['brightnessunit']}) else ('\x1B[91m','\x1B[0m')
         self.__do_inp_output('%-14.14s = %s%-23s%s' % ('brightnessunit',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
-    def __clipminmax_inp(self):
+    def __restfreq_inp(self):
         def xml_default( ):
             ## play the crazy subparameter shell game
-            dflt = self.__clipminmax_dflt( self.__globals_( ) )
+            dflt = self.__restfreq_dflt( self.__globals_( ) )
             if dflt is not None: return dflt
-            return False
-        description = 'Clip minimum and maximum value from each pixel'
-        value = self.__clipminmax( self.__globals_( ) )
-        (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'clipminmax': value},{'clipminmax': self.__schema['clipminmax']}) else ('\x1B[91m','\x1B[0m')
-        self.__do_inp_output('%-14.14s = %s%-23s%s' % ('clipminmax',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
+            return ''
+        description = 'rest frequency to assign to image, e.g., \'114.5GHz\'. When the default value \'\' is used, the task currently internally uses REST_FREQUENCY of SOURCE table or mean frequency of given spectral window as a default value.'
+        value = self.__restfreq( self.__globals_( ) )
+        (pre,post) = (('','') if value == xml_default( ) else ('\x1B[34m','\x1B[0m')) if self.__validate_({'restfreq': value},{'restfreq': self.__schema['restfreq']}) else ('\x1B[91m','\x1B[0m')
+        self.__do_inp_output('%-14.14s = %s%-23s%s' % ('restfreq',pre,self.__to_string_(value),post),description,0+len(pre)+len(post))
 
     #--------- global default implementation-------------------------------------------
     @static_var('state', __sf__('casa_inp_go_state'))
     def set_global_defaults(self):
         self.set_global_defaults.state['last'] = self
         glb = self.__globals_( )
         if 'antenna' in glb: del glb['antenna']
@@ -1043,14 +1061,15 @@
         if 'stokes' in glb: del glb['stokes']
         if 'outfile' in glb: del glb['outfile']
         if 'field' in glb: del glb['field']
         if 'convsupport' in glb: del glb['convsupport']
         if 'projection' in glb: del glb['projection']
         if 'intent' in glb: del glb['intent']
         if 'nchan' in glb: del glb['nchan']
+        if 'convertfirst' in glb: del glb['convertfirst']
         if 'pointingcolumn' in glb: del glb['pointingcolumn']
         if 'truncate' in glb: del glb['truncate']
         if 'imsize' in glb: del glb['imsize']
         if 'scan' in glb: del glb['scan']
         if 'specmode' in glb: del glb['specmode']
         if 'gwidth' in glb: del glb['gwidth']
         if 'restfreq' in glb: del glb['restfreq']
@@ -1080,36 +1099,37 @@
         self.__overwrite_inp( )
         self.__field_inp( )
         self.__spw_inp( )
         self.__antenna_inp( )
         self.__scan_inp( )
         self.__intent_inp( )
         self.__timerange_inp( )
+        self.__outframe_inp( )
         self.__mode_inp( )
         self.__nchan_inp( )
         self.__start_inp( )
         self.__width_inp( )
         self.__veltype_inp( )
         self.__specmode_inp( )
-        self.__outframe_inp( )
+        self.__pointingcolumn_inp( )
+        self.__convertfirst_inp( )
+        self.__projection_inp( )
+        self.__imsize_inp( )
+        self.__cell_inp( )
+        self.__phasecenter_inp( )
+        self.__stokes_inp( )
         self.__gridfunction_inp( )
         self.__convsupport_inp( )
         self.__truncate_inp( )
         self.__gwidth_inp( )
         self.__jwidth_inp( )
-        self.__imsize_inp( )
-        self.__cell_inp( )
-        self.__phasecenter_inp( )
-        self.__projection_inp( )
-        self.__pointingcolumn_inp( )
-        self.__restfreq_inp( )
-        self.__stokes_inp( )
+        self.__clipminmax_inp( )
         self.__minweight_inp( )
         self.__brightnessunit_inp( )
-        self.__clipminmax_inp( )
+        self.__restfreq_inp( )
 
     #--------- tget function ----------------------------------------------------------
     @static_var('state', __sf__('casa_inp_go_state'))
     def tget(self,savefile=None):
         from casashell.private.stack_manip import find_frame
         from runpy import run_path
         filename = savefile
@@ -1141,36 +1161,37 @@
         _invocation_parameters['overwrite'] = self.__overwrite( self.__globals_( ) )
         _invocation_parameters['field'] = self.__field( self.__globals_( ) )
         _invocation_parameters['spw'] = self.__spw( self.__globals_( ) )
         _invocation_parameters['antenna'] = self.__antenna( self.__globals_( ) )
         _invocation_parameters['scan'] = self.__scan( self.__globals_( ) )
         _invocation_parameters['intent'] = self.__intent( self.__globals_( ) )
         _invocation_parameters['timerange'] = self.__timerange( self.__globals_( ) )
+        _invocation_parameters['outframe'] = self.__outframe( self.__globals_( ) )
         _invocation_parameters['mode'] = self.__mode( self.__globals_( ) )
         _invocation_parameters['nchan'] = self.__nchan( self.__globals_( ) )
         _invocation_parameters['start'] = self.__start( self.__globals_( ) )
         _invocation_parameters['width'] = self.__width( self.__globals_( ) )
         _invocation_parameters['veltype'] = self.__veltype( self.__globals_( ) )
         _invocation_parameters['specmode'] = self.__specmode( self.__globals_( ) )
-        _invocation_parameters['outframe'] = self.__outframe( self.__globals_( ) )
+        _invocation_parameters['pointingcolumn'] = self.__pointingcolumn( self.__globals_( ) )
+        _invocation_parameters['convertfirst'] = self.__convertfirst( self.__globals_( ) )
+        _invocation_parameters['projection'] = self.__projection( self.__globals_( ) )
+        _invocation_parameters['imsize'] = self.__imsize( self.__globals_( ) )
+        _invocation_parameters['cell'] = self.__cell( self.__globals_( ) )
+        _invocation_parameters['phasecenter'] = self.__phasecenter( self.__globals_( ) )
+        _invocation_parameters['stokes'] = self.__stokes( self.__globals_( ) )
         _invocation_parameters['gridfunction'] = self.__gridfunction( self.__globals_( ) )
         _invocation_parameters['convsupport'] = self.__convsupport( self.__globals_( ) )
         _invocation_parameters['truncate'] = self.__truncate( self.__globals_( ) )
         _invocation_parameters['gwidth'] = self.__gwidth( self.__globals_( ) )
         _invocation_parameters['jwidth'] = self.__jwidth( self.__globals_( ) )
-        _invocation_parameters['imsize'] = self.__imsize( self.__globals_( ) )
-        _invocation_parameters['cell'] = self.__cell( self.__globals_( ) )
-        _invocation_parameters['phasecenter'] = self.__phasecenter( self.__globals_( ) )
-        _invocation_parameters['projection'] = self.__projection( self.__globals_( ) )
-        _invocation_parameters['pointingcolumn'] = self.__pointingcolumn( self.__globals_( ) )
-        _invocation_parameters['restfreq'] = self.__restfreq( self.__globals_( ) )
-        _invocation_parameters['stokes'] = self.__stokes( self.__globals_( ) )
+        _invocation_parameters['clipminmax'] = self.__clipminmax( self.__globals_( ) )
         _invocation_parameters['minweight'] = self.__minweight( self.__globals_( ) )
         _invocation_parameters['brightnessunit'] = self.__brightnessunit( self.__globals_( ) )
-        _invocation_parameters['clipminmax'] = self.__clipminmax( self.__globals_( ) )
+        _invocation_parameters['restfreq'] = self.__restfreq( self.__globals_( ) )
 
         try:
             with open(_postfile,'w') as _f:
                 for _i in _invocation_parameters:
                     _f.write("%-14s = %s\n" % (_i,noobj(repr(_invocation_parameters[_i]))))
                 _f.write("#tsdimaging( ")
                 count = 0
@@ -1178,24 +1199,24 @@
                     _f.write("%s=%s" % (_i,noobj(repr(_invocation_parameters[_i]))))
                     count += 1
                     if count < len(_invocation_parameters): _f.write(",")
                 _f.write(" )\n")
         except: return False
         return True
 
-    def __call__( self, infiles=None, outfile=None, overwrite=None, field=None, spw=None, antenna=None, scan=None, intent=None, timerange=None, mode=None, nchan=None, start=None, width=None, veltype=None, specmode=None, outframe=None, gridfunction=None, convsupport=None, truncate=None, gwidth=None, jwidth=None, imsize=None, cell=None, phasecenter=None, projection=None, pointingcolumn=None, restfreq=None, stokes=None, minweight=None, brightnessunit=None, clipminmax=None ):
+    def __call__( self, infiles=None, outfile=None, overwrite=None, field=None, spw=None, antenna=None, scan=None, intent=None, timerange=None, outframe=None, mode=None, nchan=None, start=None, width=None, veltype=None, specmode=None, pointingcolumn=None, convertfirst=None, projection=None, imsize=None, cell=None, phasecenter=None, stokes=None, gridfunction=None, convsupport=None, truncate=None, gwidth=None, jwidth=None, clipminmax=None, minweight=None, brightnessunit=None, restfreq=None ):
         def noobj(s):
            if s.startswith('<') and s.endswith('>'):
                return "None"
            else:
                return s
         _prefile = os.path.realpath('tsdimaging.pre')
         _postfile = os.path.realpath('tsdimaging.last')
         task_result = None
-        _arguments = [infiles,outfile,overwrite,field,spw,antenna,scan,intent,timerange,mode,nchan,start,width,veltype,specmode,outframe,gridfunction,convsupport,truncate,gwidth,jwidth,imsize,cell,phasecenter,projection,pointingcolumn,restfreq,stokes,minweight,brightnessunit,clipminmax]
+        _arguments = [infiles,outfile,overwrite,field,spw,antenna,scan,intent,timerange,outframe,mode,nchan,start,width,veltype,specmode,pointingcolumn,convertfirst,projection,imsize,cell,phasecenter,stokes,gridfunction,convsupport,truncate,gwidth,jwidth,clipminmax,minweight,brightnessunit,restfreq]
         _invocation_parameters = OrderedDict( )
         if any(map(lambda x: x is not None,_arguments)):
             # invoke python style
             # set the non sub-parameters that are not None
             local_global = { }
             if infiles is not None: local_global['infiles'] = infiles
             if outfile is not None: local_global['outfile'] = outfile
@@ -1204,56 +1225,58 @@
             if spw is not None: local_global['spw'] = spw
             if antenna is not None: local_global['antenna'] = antenna
             if scan is not None: local_global['scan'] = scan
             if intent is not None: local_global['intent'] = intent
             if timerange is not None: local_global['timerange'] = timerange
             if mode is not None: local_global['mode'] = mode
             if specmode is not None: local_global['specmode'] = specmode
-            if gridfunction is not None: local_global['gridfunction'] = gridfunction
+            if pointingcolumn is not None: local_global['pointingcolumn'] = pointingcolumn
+            if convertfirst is not None: local_global['convertfirst'] = convertfirst
+            if projection is not None: local_global['projection'] = projection
             if imsize is not None: local_global['imsize'] = imsize
             if cell is not None: local_global['cell'] = cell
             if phasecenter is not None: local_global['phasecenter'] = phasecenter
-            if projection is not None: local_global['projection'] = projection
-            if pointingcolumn is not None: local_global['pointingcolumn'] = pointingcolumn
-            if restfreq is not None: local_global['restfreq'] = restfreq
             if stokes is not None: local_global['stokes'] = stokes
+            if gridfunction is not None: local_global['gridfunction'] = gridfunction
+            if clipminmax is not None: local_global['clipminmax'] = clipminmax
             if minweight is not None: local_global['minweight'] = minweight
             if brightnessunit is not None: local_global['brightnessunit'] = brightnessunit
-            if clipminmax is not None: local_global['clipminmax'] = clipminmax
+            if restfreq is not None: local_global['restfreq'] = restfreq
 
             # the invocation parameters for the non-subparameters can now be set - this picks up those defaults
             _invocation_parameters['infiles'] = self.__infiles( local_global )
             _invocation_parameters['outfile'] = self.__outfile( local_global )
             _invocation_parameters['overwrite'] = self.__overwrite( local_global )
             _invocation_parameters['field'] = self.__field( local_global )
             _invocation_parameters['spw'] = self.__spw( local_global )
             _invocation_parameters['antenna'] = self.__antenna( local_global )
             _invocation_parameters['scan'] = self.__scan( local_global )
             _invocation_parameters['intent'] = self.__intent( local_global )
             _invocation_parameters['timerange'] = self.__timerange( local_global )
             _invocation_parameters['mode'] = self.__mode( local_global )
             _invocation_parameters['specmode'] = self.__specmode( local_global )
-            _invocation_parameters['gridfunction'] = self.__gridfunction( local_global )
+            _invocation_parameters['pointingcolumn'] = self.__pointingcolumn( local_global )
+            _invocation_parameters['convertfirst'] = self.__convertfirst( local_global )
+            _invocation_parameters['projection'] = self.__projection( local_global )
             _invocation_parameters['imsize'] = self.__imsize( local_global )
             _invocation_parameters['cell'] = self.__cell( local_global )
             _invocation_parameters['phasecenter'] = self.__phasecenter( local_global )
-            _invocation_parameters['projection'] = self.__projection( local_global )
-            _invocation_parameters['pointingcolumn'] = self.__pointingcolumn( local_global )
-            _invocation_parameters['restfreq'] = self.__restfreq( local_global )
             _invocation_parameters['stokes'] = self.__stokes( local_global )
+            _invocation_parameters['gridfunction'] = self.__gridfunction( local_global )
+            _invocation_parameters['clipminmax'] = self.__clipminmax( local_global )
             _invocation_parameters['minweight'] = self.__minweight( local_global )
             _invocation_parameters['brightnessunit'] = self.__brightnessunit( local_global )
-            _invocation_parameters['clipminmax'] = self.__clipminmax( local_global )
+            _invocation_parameters['restfreq'] = self.__restfreq( local_global )
 
             # the sub-parameters can then be set. Use the supplied value if not None, else the function, which gets the appropriate default
+            _invocation_parameters['outframe'] = self.__outframe( _invocation_parameters ) if outframe is None else outframe
             _invocation_parameters['nchan'] = self.__nchan( _invocation_parameters ) if nchan is None else nchan
             _invocation_parameters['start'] = self.__start( _invocation_parameters ) if start is None else start
             _invocation_parameters['width'] = self.__width( _invocation_parameters ) if width is None else width
             _invocation_parameters['veltype'] = self.__veltype( _invocation_parameters ) if veltype is None else veltype
-            _invocation_parameters['outframe'] = self.__outframe( _invocation_parameters ) if outframe is None else outframe
             _invocation_parameters['convsupport'] = self.__convsupport( _invocation_parameters ) if convsupport is None else convsupport
             _invocation_parameters['truncate'] = self.__truncate( _invocation_parameters ) if truncate is None else truncate
             _invocation_parameters['gwidth'] = self.__gwidth( _invocation_parameters ) if gwidth is None else gwidth
             _invocation_parameters['jwidth'] = self.__jwidth( _invocation_parameters ) if jwidth is None else jwidth
 
         else:
             # invoke with inp/go semantics
@@ -1262,36 +1285,37 @@
             _invocation_parameters['overwrite'] = self.__overwrite( self.__globals_( ) )
             _invocation_parameters['field'] = self.__field( self.__globals_( ) )
             _invocation_parameters['spw'] = self.__spw( self.__globals_( ) )
             _invocation_parameters['antenna'] = self.__antenna( self.__globals_( ) )
             _invocation_parameters['scan'] = self.__scan( self.__globals_( ) )
             _invocation_parameters['intent'] = self.__intent( self.__globals_( ) )
             _invocation_parameters['timerange'] = self.__timerange( self.__globals_( ) )
+            _invocation_parameters['outframe'] = self.__outframe( self.__globals_( ) )
             _invocation_parameters['mode'] = self.__mode( self.__globals_( ) )
             _invocation_parameters['nchan'] = self.__nchan( self.__globals_( ) )
             _invocation_parameters['start'] = self.__start( self.__globals_( ) )
             _invocation_parameters['width'] = self.__width( self.__globals_( ) )
             _invocation_parameters['veltype'] = self.__veltype( self.__globals_( ) )
             _invocation_parameters['specmode'] = self.__specmode( self.__globals_( ) )
-            _invocation_parameters['outframe'] = self.__outframe( self.__globals_( ) )
+            _invocation_parameters['pointingcolumn'] = self.__pointingcolumn( self.__globals_( ) )
+            _invocation_parameters['convertfirst'] = self.__convertfirst( self.__globals_( ) )
+            _invocation_parameters['projection'] = self.__projection( self.__globals_( ) )
+            _invocation_parameters['imsize'] = self.__imsize( self.__globals_( ) )
+            _invocation_parameters['cell'] = self.__cell( self.__globals_( ) )
+            _invocation_parameters['phasecenter'] = self.__phasecenter( self.__globals_( ) )
+            _invocation_parameters['stokes'] = self.__stokes( self.__globals_( ) )
             _invocation_parameters['gridfunction'] = self.__gridfunction( self.__globals_( ) )
             _invocation_parameters['convsupport'] = self.__convsupport( self.__globals_( ) )
             _invocation_parameters['truncate'] = self.__truncate( self.__globals_( ) )
             _invocation_parameters['gwidth'] = self.__gwidth( self.__globals_( ) )
             _invocation_parameters['jwidth'] = self.__jwidth( self.__globals_( ) )
-            _invocation_parameters['imsize'] = self.__imsize( self.__globals_( ) )
-            _invocation_parameters['cell'] = self.__cell( self.__globals_( ) )
-            _invocation_parameters['phasecenter'] = self.__phasecenter( self.__globals_( ) )
-            _invocation_parameters['projection'] = self.__projection( self.__globals_( ) )
-            _invocation_parameters['pointingcolumn'] = self.__pointingcolumn( self.__globals_( ) )
-            _invocation_parameters['restfreq'] = self.__restfreq( self.__globals_( ) )
-            _invocation_parameters['stokes'] = self.__stokes( self.__globals_( ) )
+            _invocation_parameters['clipminmax'] = self.__clipminmax( self.__globals_( ) )
             _invocation_parameters['minweight'] = self.__minweight( self.__globals_( ) )
             _invocation_parameters['brightnessunit'] = self.__brightnessunit( self.__globals_( ) )
-            _invocation_parameters['clipminmax'] = self.__clipminmax( self.__globals_( ) )
+            _invocation_parameters['restfreq'] = self.__restfreq( self.__globals_( ) )
         try:
             with open(_prefile,'w') as _f:
                 for _i in _invocation_parameters:
                     _f.write("%-14s = %s\n" % (_i,noobj(repr(_invocation_parameters[_i]))))
                 _f.write("#tsdimaging( ")
                 count = 0
                 for _i in _invocation_parameters:
@@ -1299,16 +1323,16 @@
                     count += 1
                     if count < len(_invocation_parameters): _f.write(",")
                 _f.write(" )\n")
         except: pass
         try:
             _logging_state_ = None
             assert _pc.validate(_invocation_parameters,self.__schema), create_error_string(_pc.errors)
-            _logging_state_ = _start_log( 'tsdimaging', [ 'infiles=' + repr(_pc.document['infiles']), 'outfile=' + repr(_pc.document['outfile']), 'overwrite=' + repr(_pc.document['overwrite']), 'field=' + repr(_pc.document['field']), 'spw=' + repr(_pc.document['spw']), 'antenna=' + repr(_pc.document['antenna']), 'scan=' + repr(_pc.document['scan']), 'intent=' + repr(_pc.document['intent']), 'timerange=' + repr(_pc.document['timerange']), 'mode=' + repr(_pc.document['mode']), 'nchan=' + repr(_pc.document['nchan']), 'start=' + repr(_pc.document['start']), 'width=' + repr(_pc.document['width']), 'veltype=' + repr(_pc.document['veltype']), 'specmode=' + repr(_pc.document['specmode']), 'outframe=' + repr(_pc.document['outframe']), 'gridfunction=' + repr(_pc.document['gridfunction']), 'convsupport=' + repr(_pc.document['convsupport']), 'truncate=' + repr(_pc.document['truncate']), 'gwidth=' + repr(_pc.document['gwidth']), 'jwidth=' + repr(_pc.document['jwidth']), 'imsize=' + repr(_pc.document['imsize']), 'cell=' + repr(_pc.document['cell']), 'phasecenter=' + repr(_pc.document['phasecenter']), 'projection=' + repr(_pc.document['projection']), 'pointingcolumn=' + repr(_pc.document['pointingcolumn']), 'restfreq=' + repr(_pc.document['restfreq']), 'stokes=' + repr(_pc.document['stokes']), 'minweight=' + repr(_pc.document['minweight']), 'brightnessunit=' + repr(_pc.document['brightnessunit']), 'clipminmax=' + repr(_pc.document['clipminmax']) ] )
-            task_result = _tsdimaging_t( _pc.document['infiles'],_pc.document['outfile'],_pc.document['overwrite'],_pc.document['field'],_pc.document['spw'],_pc.document['antenna'],_pc.document['scan'],_pc.document['intent'],_pc.document['timerange'],_pc.document['mode'],_pc.document['nchan'],_pc.document['start'],_pc.document['width'],_pc.document['veltype'],_pc.document['specmode'],_pc.document['outframe'],_pc.document['gridfunction'],_pc.document['convsupport'],_pc.document['truncate'],_pc.document['gwidth'],_pc.document['jwidth'],_pc.document['imsize'],_pc.document['cell'],_pc.document['phasecenter'],_pc.document['projection'],_pc.document['pointingcolumn'],_pc.document['restfreq'],_pc.document['stokes'],_pc.document['minweight'],_pc.document['brightnessunit'],_pc.document['clipminmax'] )
+            _logging_state_ = _start_log( 'tsdimaging', [ 'infiles=' + repr(_pc.document['infiles']), 'outfile=' + repr(_pc.document['outfile']), 'overwrite=' + repr(_pc.document['overwrite']), 'field=' + repr(_pc.document['field']), 'spw=' + repr(_pc.document['spw']), 'antenna=' + repr(_pc.document['antenna']), 'scan=' + repr(_pc.document['scan']), 'intent=' + repr(_pc.document['intent']), 'timerange=' + repr(_pc.document['timerange']), 'outframe=' + repr(_pc.document['outframe']), 'mode=' + repr(_pc.document['mode']), 'nchan=' + repr(_pc.document['nchan']), 'start=' + repr(_pc.document['start']), 'width=' + repr(_pc.document['width']), 'veltype=' + repr(_pc.document['veltype']), 'specmode=' + repr(_pc.document['specmode']), 'pointingcolumn=' + repr(_pc.document['pointingcolumn']), 'convertfirst=' + repr(_pc.document['convertfirst']), 'projection=' + repr(_pc.document['projection']), 'imsize=' + repr(_pc.document['imsize']), 'cell=' + repr(_pc.document['cell']), 'phasecenter=' + repr(_pc.document['phasecenter']), 'stokes=' + repr(_pc.document['stokes']), 'gridfunction=' + repr(_pc.document['gridfunction']), 'convsupport=' + repr(_pc.document['convsupport']), 'truncate=' + repr(_pc.document['truncate']), 'gwidth=' + repr(_pc.document['gwidth']), 'jwidth=' + repr(_pc.document['jwidth']), 'clipminmax=' + repr(_pc.document['clipminmax']), 'minweight=' + repr(_pc.document['minweight']), 'brightnessunit=' + repr(_pc.document['brightnessunit']), 'restfreq=' + repr(_pc.document['restfreq']) ] )
+            task_result = _tsdimaging_t( _pc.document['infiles'],_pc.document['outfile'],_pc.document['overwrite'],_pc.document['field'],_pc.document['spw'],_pc.document['antenna'],_pc.document['scan'],_pc.document['intent'],_pc.document['timerange'],_pc.document['outframe'],_pc.document['mode'],_pc.document['nchan'],_pc.document['start'],_pc.document['width'],_pc.document['veltype'],_pc.document['specmode'],_pc.document['pointingcolumn'],_pc.document['convertfirst'],_pc.document['projection'],_pc.document['imsize'],_pc.document['cell'],_pc.document['phasecenter'],_pc.document['stokes'],_pc.document['gridfunction'],_pc.document['convsupport'],_pc.document['truncate'],_pc.document['gwidth'],_pc.document['jwidth'],_pc.document['clipminmax'],_pc.document['minweight'],_pc.document['brightnessunit'],_pc.document['restfreq'] )
         except Exception as e:
             from traceback import format_exc
             from casatasks import casalog
             casalog.origin('tsdimaging')
             casalog.post("Exception Reported: Error in tsdimaging: %s" % str(e),'SEVERE')
             casalog.post(format_exc( ))
             raise #exception is now raised
```

## casashell/private/widebandpbcor.py

```diff
@@ -1,9 +1,9 @@
 ##################### generated by xml-casa (v2) from widebandpbcor.xml #############
-##################### 1363f4a31fcc390190ae89db0dc7a350 ##############################
+##################### 16e4031e46f432d427545ca38fcd9618 ##############################
 from __future__ import absolute_import
 from casashell.private.stack_manip import find_local as __sf__
 from casashell.private.stack_manip import find_frame as _find_frame
 from casatools.typecheck import validator as _pc
 from casatools.coercetype import coerce as _coerce
 from casatools.errors import create_error_string
 from casatasks.private.task_widebandpbcor import widebandpbcor as _widebandpbcor_t
@@ -22,15 +22,15 @@
         return func
     return decorate
 
 class _widebandpbcor:
     """
     widebandpbcor ---- Wideband PB-correction on the output of the MS-MFS algorithm
 
-    WideBand Primary-beam correction. It computes a set of PBs at the specified frequencies, calculates Taylor-coefficient images that represent the PB spectrum, performs a polynomial division to PB-correct the output Taylor-coefficient images from clean(nterms>1), and recompute spectral index (and curvature) using the PB-corrected Taylor-coefficient images
+    WideBand Primary-beam correction. It computes a set of PBs at the specified frequencies, calculates Taylor-coefficient images that represent the PB spectrum, performs a polynomial division to PB-correct the output Taylor-coefficient images from clean(nterms>1), and recompute spectral index (and curvature) using the PB-corrected Taylor-coefficient images.
 
     --------- parameter descriptions ---------------------------------------------
 
     vis        Name of measurement set.
     imagename  Name-prefix of multi-termimages to operate on.
     nterms     Number of taylor terms to use
     threshold  Intensity above which to re-calculate spectral index
```

## Comparing `casashell-6.6.3.22.dist-info/METADATA` & `casashell-6.6.4.34.dist-info/METADATA`

 * *Files 18% similar despite different names*

```diff
@@ -1,20 +1,20 @@
 Metadata-Version: 2.1
 Name: casashell
-Version: 6.6.3.22
+Version: 6.6.4.34
 Summary: The CASA CLI
 Home-page: https://open-bitbucket.nrao.edu/projects/CASA/repos/casatools/browse
 Download-URL: https://casa.nrao.edu/download/
 Author: CASA development team
-Author-email: aips2-request@nrao.edu
+Author-email: casa-feedback@nrao.edu
 Maintainer: Darrell Schiebel
 Maintainer-email: drs@nrao.edu
 License: GNU Library or Lesser General Public License (LGPL)
 Classifier: Programming Language :: Python :: 3.8
-Requires-Dist: casatasks ==6.6.3.22
+Requires-Dist: casatasks ==6.6.4.34
 Requires-Dist: casatools
 Requires-Dist: matplotlib
 Requires-Dist: scipy
 Requires-Dist: ipython
 Requires-Dist: traitlets
 
 CASAshell is an augmented ipython CLI which is familiar users of CASA's traditional CLI.
```

## Comparing `casashell-6.6.3.22.dist-info/RECORD` & `casashell-6.6.4.34.dist-info/RECORD`

 * *Files 8% similar despite different names*

```diff
@@ -1,42 +1,42 @@
 casashell/LICENSE.txt,sha256=IEfzsTvSd8f8JBZn3LoATY_RkNKJnAyr2p020oPTVfQ,25454
-casashell/__init__.py,sha256=mJ8zF2RE_nNQYad1M8LrMf4N1PntsficVBxBfZYLeWM,14048
+casashell/__init__.py,sha256=bhaahQIGgiMweWRdUpFIG9T0LN4Xe7tFyHCwcZqHBiM,20829
 casashell/__main__.py,sha256=37MzV-fZsc2XJdbAN9U9-YKMn9TQJLZ-bcQ3nWxLcpY,71
 casashell/private/accor.py,sha256=ciBQM-Gmk3sYo64TseEMjHMWetdiiwVgsSoG0Y1K7Is,53336
 casashell/private/apparentsens.py,sha256=LvohTbMNbMtFmGSWMjm3DhKTrJMwJXYjTifFwv_2cNQ,55021
 casashell/private/applycal.py,sha256=1LvFDTjBVfQUt1wLnUqzISmE1D-YoVEzLH3F6ICXbOo,52601
 casashell/private/asdmsummary.py,sha256=KVtq37sHnVweRk59DGOR1sh-TbAvUKPNR9-7KuDgT7M,10924
-casashell/private/bandpass.py,sha256=xYqcgrQL-olSQgzOwh3YOPRBIcPPPtxTFoA_6tL2DVM,79086
+casashell/private/bandpass.py,sha256=DJ_LqOPuERFfrhW4Fm9vEEGduIfyWQFjpn6FJM2BKmE,79085
 casashell/private/blcal.py,sha256=4klitLJqXs_hwnkwWtDpCRSDPETIyh8VcwllzoWtHeU,52102
 casashell/private/builtin_mgr.py,sha256=Kpo9vbYDUuNfiIxCut9LBkQ9fTozcMAxCdd9zwCgxeA,4071
 casashell/private/calstat.py,sha256=4NyhZJqqkzYQwPxdbIhOx4fUZU8BWd75Jw0P38a5Hh8,14814
 casashell/private/clearcal.py,sha256=4N1FGl0jNS0km_QYnsGyCd0arcZhXI2rEg3uEehaJcI,18441
 casashell/private/clearstat.py,sha256=BwNL1l_5i4RYusQrXteYDJSWtfPTASQZtiYtSVaDE3c,8772
 casashell/private/concat.py,sha256=ONQejnkjzk39CzoNs0iYZVI2yZ0l1q7tx8OTRHUBJtU,29016
-casashell/private/config.py,sha256=TvnlliHamLAmwbrPzcdtuUgYGVrtb5XOSnrzA14OYfE,2776
 casashell/private/conjugatevis.py,sha256=GgpIEULiM1YkvNEjWP1tylzgx1EgIB4sfEEVtxkz7ig,15298
 casashell/private/cvel.py,sha256=JSYYMJrjF6JzZBi6WcCg6ODpeQm1qcmxBl2pCOEMjhU,51396
 casashell/private/cvel2.py,sha256=Y4rlEw5DgrFRxa6DgNmpzjx3q6x29b6KUs8IgzPDGtA,63195
 casashell/private/deconvolve.py,sha256=6EtPHfNqPKkdQPnZ4_k9gnoac9BVmYUPT124HdiG9vU,90744
 casashell/private/defintent.py,sha256=vIBsK2YAhOz77HqA7T5yvpPEpKjm_WN7eHxlO0GWy9Q,18805
 casashell/private/delmod.py,sha256=_2xc1dcZQLofzUFJ_Hy2Z9zTeC-6t2-WQCMR6-N2dSE,15863
 casashell/private/exportasdm.py,sha256=r44rfL2QdOskOtiv9TdwTFP7Z7U9_pB-2UL4XtO9N9I,24305
 casashell/private/exportfits.py,sha256=4lRrKIMHhFlmHCVmmALqME_6Bq3zTFd4TwAG6wjDHp0,27664
 casashell/private/exportuvfits.py,sha256=yB5zXoUFDwKilQKugM22OjGo8quOFvg25AIyLin_584,34983
 casashell/private/feather.py,sha256=C_-Awo0QA8CzbCguRxmQQk2uHjrQXzVEW7Ld-Q0agNo,19675
-casashell/private/fixplanets.py,sha256=-92Nd5MyMqnAnAjryaj7iQbgMx7Irdy4AGBtM3mvbf4,20274
+casashell/private/fixplanets.py,sha256=FOYuVTetiZf153WDQ6pBaYzd9E6lgFKY70hbOOUxYrE,20249
 casashell/private/fixvis.py,sha256=k7pngmg-XhZPopMkCMmbTJRy0dw_fZGUBofnZCLFDuw,23585
 casashell/private/flagcmd.py,sha256=t3jG0QiOnDa2D5bYJfmxNfydrSDw3xcevNBDdW-bYvM,44974
-casashell/private/flagdata.py,sha256=kwkskFYOuDMfwCcjaV12jdVv-ZeRkxhHgpChI0hn1gc,208223
+casashell/private/flagdata.py,sha256=qV_hebPEonk4PT6yNLw3yjijxbWke43X3dz4srNURJg,208421
 casashell/private/flagmanager.py,sha256=eBHWAw9wzqhjxPyhFOReC3K4Hb7Mg3z5fYjrCsJvvfs,20768
 casashell/private/fluxscale.py,sha256=LV8K6gK8dSdU3EbqFtTqBPclDFliCuQkhAOJ_o-z88s,38137
 casashell/private/fringefit.py,sha256=HiLnhV19h-BeZATb4yDkOaxhdt7vmZbUQqfK3PDc2AI,66839
 casashell/private/ft.py,sha256=KVtRqfFIn7C9BBraD1vr6Plh98V5W5BR-xbqKpUmIzw,24623
-casashell/private/gaincal.py,sha256=0cam64e7wU4KliZtLxsLbT7MhvsaNU-8d2TQGt7uf0E,83939
+casashell/private/gaincal.py,sha256=fIgebcvCnDRlVH6Bm-hAEkphvnrdqY_hbpKgiGAYWlc,84758
 casashell/private/gencal.py,sha256=DIKUOh0FdADCxR3xuGPpuQaWfYzP1MLUwFaB3p0TmSE,40968
+casashell/private/getantposalma.py,sha256=LrEqqSLxCuSsnguq72MQyGDukKKfpC9GWL29Zm7qdjs,21423
 casashell/private/getcalmodvla.py,sha256=myiqSguH0mZX1Q2rtKPfb0mkRM1Qfshk9_q_UL4zxeo,22888
 casashell/private/getephemtable.py,sha256=MzkbrtYPRfSL8MWRVWYB1pxokb0eM2390DcpDfnoiHY,23173
 casashell/private/hanningsmooth.py,sha256=sNb8gxIwK3UT0mCykBfpbzqfHU-vhx2mQHrutW_cSvU,38750
 casashell/private/imbaseline.py,sha256=kCTG0keufbzomJYXvesmantpY1AztIeRcv-w66RTbdY,56229
 casashell/private/imcollapse.py,sha256=pDUWI9XO6w2dgkjoTkApUidocIlMbo5JVD_E-xxTyys,28464
 casashell/private/imcontsub.py,sha256=huIV0NRECmYflDqjkxWZC5_cHe2g2Y4M3KqsQuJVH6U,21629
 casashell/private/imdev.py,sha256=-RFs9LLR21wa1WVSdml5ZXuKBxMAI5HCGr-QfUeHFEE,42769
@@ -57,46 +57,46 @@
 casashell/private/importuvfits.py,sha256=_S82VxfFxxvkBlz83mQyiTURL1ON8dstHdnW5qnnThU,14493
 casashell/private/importvla.py,sha256=pybIfrkMzppzbn_OmtPp7UpAVHjH4RhsLRDxQRLMcX8,30488
 casashell/private/impv.py,sha256=5MhKWE4s1kN45kTrEDPn5jcpGGG4D-gdUdc5LP1vveo,43072
 casashell/private/imrebin.py,sha256=PuavTbbmFl5oCmlutoyds8WJZRHg_0cO_kxz_1KOdEg,30219
 casashell/private/imreframe.py,sha256=4xJ4dXLyJug93McLXB_RkKzUeaUa-4l6KHzKzvZ_7eE,17650
 casashell/private/imregrid.py,sha256=KxRjBVTYJk0JggtfEa6yEC7V22xxqkmczD0frobG070,43883
 casashell/private/imsmooth.py,sha256=93fRj9_RXyJjcaukMN-4dlOTslYg1bYpubbtR-ATLcs,45155
-casashell/private/imstat.py,sha256=OfVGIQ2Jucq4SeMjBoz15wYk6RQq7dQjppjHCqYF_NA,58038
+casashell/private/imstat.py,sha256=Ycawl6vr_iBvuetny_12IDQSyunSdjyPUoAetPmP95o,41583
 casashell/private/imsubimage.py,sha256=sT1mfd6Ji_TADc3UMj6AShYpcnNPkCrwyXngZkw4Byg,30789
 casashell/private/imtrans.py,sha256=4_thJH6MPvE_NucyOajGVOfTwY53Sk8J8S8a7mYoc1U,16131
 casashell/private/imval.py,sha256=fkmgR0yvGIsISvJ8MSej-1vAGoQWf5NooKthizZ1wZ4,20602
 casashell/private/init_begin_startup.py,sha256=6OTYnAhzSDWZTcQHt6ESPLviiZ5VigeTPsp2DOakgmg,169
 casashell/private/init_doc.py,sha256=8zsjyaJZhVvcX07lOByQCpJsKo9vb6AJgm9zG7SHrhs,12535
-casashell/private/init_pipeline.py,sha256=bEoo7f8JegyK008vexONLG0i1FZKNQL_sK_srrgUhA0,455
+casashell/private/init_pipeline.py,sha256=l1_eOoclCmFHZsDyEaVkWfuzkRB3U3bDaDaciui2SaE,476
 casashell/private/init_subparam.py,sha256=rgKk35Csn-P2cuQ1fFt4RCINoo4EVgNG6_f059iFa0E,4037
-casashell/private/init_system.py,sha256=UBkXxv6dU9E_OQB2Onu4xpsDunDULrkeLAB1IGmlMTU,8588
-casashell/private/init_welcome.py,sha256=r_kKsQxW9G3bLasJu8a5eCjUOUVJD_sOdincR3-5rFU,1027
+casashell/private/init_system.py,sha256=zZ5dqTiiyMqlYKn-bjo2Zg0N-6LWmzdrbEDteKPeNyU,11462
+casashell/private/init_welcome.py,sha256=X_iviX2zlLV41LDZk9kK0AjNd78K3tTbXWH8Am7bxCc,4060
 casashell/private/initweights.py,sha256=l4QBB8NtXN5vWe50hZGiOg7vB7xB1VlNVWJWKXZ5dlM,24686
 casashell/private/listcal.py,sha256=DWVe7LsU0CX6wF6VyTFlUxOeaYHl7gNQx-mS9APvSTc,31433
 casashell/private/listfits.py,sha256=sC5ZDScy87yWW3EP_hfKysY8JMSxV6ufeKIZxYAlvuo,10772
 casashell/private/listhistory.py,sha256=mD33R5LR078THF5D7omGMyXK7rdn0x-99YIw5CD34wQ,10733
 casashell/private/listobs.py,sha256=gEgXYoAcK5u3Tq0-uhNVbrCPzbvFG5cItgC12YlPQD4,44137
 casashell/private/listpartition.py,sha256=HujR-43PE0hhAbs_5359eaUyHdjzpUgu6_7Hw4ajp-Q,16171
 casashell/private/listsdm.py,sha256=y0fMpPsDHigxSnQnCiFtOao3P4mJ13wiEKnQcIBMZY4,11574
 casashell/private/listvis.py,sha256=KcqoTn5UjGAIhvWyhOua2G9kiqTKRrFl7aXAfeJrqmc,43869
-casashell/private/load_tasks.py,sha256=wSqBTFkUPoSJx6pFDtK8kw0YPkLnldqt0RHl_WBwVNw,10150
+casashell/private/load_tasks.py,sha256=0EIUHRAoEzd0WkiZh_1qF8h5qnrwzXzEUK55dsO7CfM,10242
 casashell/private/load_tools.py,sha256=q_MyLQDS7PBO_6VnwQ1pX4GpJ8yEqwfgjt3FBKeMYYM,2900
 casashell/private/makemask.py,sha256=ON62vFQz3dPCnVhBdWJCRS4R2r7Tocop0f-h4oduOVY,31993
 casashell/private/mstransform.py,sha256=5AdVLliXBxCe5Cy0_cvoIuOJcAKew6545G1fflw7DOU,128471
 casashell/private/msuvbin.py,sha256=uZuREI038mp0Go8O7cs32eNz1NV5RAKqhVH62Nm2f4A,36453
 casashell/private/nrobeamaverage.py,sha256=Jog9trNJ2RxUH3TRDxy_oFDUTrjxfkjFZdOGmIWZiis,24168
 casashell/private/partition.py,sha256=o8ZpdWNLZ1ZrKa9IJrUwwPw5fw7XWNuKn_IHzS1W5YY,52668
 casashell/private/phaseshift.py,sha256=YFdWV0vB1VFmgz6R65jzv1yLi7uP9IxIlIlQCYgj7mg,29090
 casashell/private/plotants.py,sha256=gng4uELcUcJaF7s_layzNUBgp6UfmIjEqVmYtEMaA7s,22335
 casashell/private/plotbandpass.py,sha256=1EqBZ1UOwZWEsix0BKko7GyROOIH9UErv6_I6NdyKxk,97579
 casashell/private/plotprofilemap.py,sha256=9gCzRWsgeaKZMVPR33xOS1DyfwT4droVOkjQ2jJN8zg,43760
 casashell/private/plotweather.py,sha256=dIgrZF6iFcbXg7yT4m3RCpOIgOLaa5mznN1_RK9sk88,15833
 casashell/private/polcal.py,sha256=oV7OQL-0aTgYTPrqDlPmnZzK4GBzgsLMToobletlQy8,62604
-casashell/private/polfromgain.py,sha256=Z5YiYl1ccMIidQB8qjoHZ6mxrf32yGFJIdWgMNmRaSU,15250
+casashell/private/polfromgain.py,sha256=aRIWHfBNngF3ovr1yJjPOO3npJk9OFHYqrCEYDsWTZM,17139
 casashell/private/predictcomp.py,sha256=0WWvEhHQ-DYoQq3eA5XvtyWWbkTFYCSj2MYo7SZBtl4,34294
 casashell/private/rerefant.py,sha256=cDMg1gK7nKGDrjkgbfWimFDXeNu48i6lNrXGsDkZU4Q,16993
 casashell/private/rmfit.py,sha256=BEZKRGkuI03ht9bAdevl-aWMtrwjc8WiN5FjU51dN2Q,29985
 casashell/private/rmtables.py,sha256=qRzJ4XmMwgNv1gQe6a21xSq_Fu_6dxy_oS-Zqm3Hj4I,10851
 casashell/private/sdatmcor.py,sha256=63J6WicunSNc8-8wzXz40k4lAT2ne4_B6h12Gq5j4dU,67386
 casashell/private/sdbaseline.py,sha256=wiyY5N4bBv04kPvrrJsm6hHw9ML5J6XtjV-2oGR8S1s,91011
 casashell/private/sdcal.py,sha256=ZIcDnbdTKfaySNrlMK_TtzsgRminqt3mV__WjOhuk9U,50237
@@ -105,39 +105,36 @@
 casashell/private/sdgaincal.py,sha256=LYAPt6qoiVXS3PAJ8of_2qsgcC-eCGN2xWeFfknzbY4,37515
 casashell/private/sdimaging.py,sha256=2KzZtGH2IpGkwTXpx5pgSX9J7snqooo7Re7ZsmsHl8Q,76833
 casashell/private/sdintimaging.py,sha256=bIVEQTU6QpDDu25eeqORwBYk1fMRlNGbBPrWTWMDoks,274633
 casashell/private/sdpolaverage.py,sha256=w6ALwLIFyRIR5ReeZgHjYp4oAGLXuPXgyQLJp9i-jAE,26923
 casashell/private/sdsidebandsplit.py,sha256=FlTGA1OYbf-Hrq6b-8vD4UvFCnVNVsqCBhjzb1HDcSU,26705
 casashell/private/sdsmooth.py,sha256=ridxoByU-eQuHu9yn0vbVfmm53ax-bEHrCos1XG5_jY,32983
 casashell/private/sdtimeaverage.py,sha256=ZGKJmZ6bnPvN-RXTpWUTBMnMgWeNb60nsaCiEMXixms,26441
-casashell/private/setjy.py,sha256=7yfbUadWfEdX_wbLGsqmFmwUusp8KtDtfeabDXOOJt8,65709
+casashell/private/setjy.py,sha256=INbXvVmQk-oLOlFYfBVLUOZAlpaMirCJelwlxemb168,65707
 casashell/private/simalma.py,sha256=xVdrzV-GaV8wfsQ9z2Xp2QCNdCq_BNGKtX8BupQJek8,66516
 casashell/private/simanalyze.py,sha256=T8vYUZHzOnSnlqXpOGto8g6V-Evop2vtl9wHx2-YZy0,70720
-casashell/private/simobserve.py,sha256=2rxYto5nAl0_7whv-pEdY0TQ0Nfh69Fir2Y2xKf7nyg,85369
+casashell/private/simobserve.py,sha256=EqrmV5MBg28UJ8jCk-P2qscPb0hJjkE1I-jAEzpmZjU,85491
 casashell/private/slsearch.py,sha256=IoBX6IrouzK31Oj7nagMawW7QRif-hEsV4z-IqUr2y4,37855
 casashell/private/smoothcal.py,sha256=UcD2EL1CHZnFomDqFZfKHwR2tqXyuIjuzABOWVBpWPg,18927
 casashell/private/specfit.py,sha256=Zme7SbA47gEt9wOsqPmEvb7zNWT2GuARh58DBtuYZoA,113912
 casashell/private/specflux.py,sha256=Tq4GDwNgVSXTYXvlQOn8xajwaCjB_wiDeYPCkjD9sTk,32224
 casashell/private/specsmooth.py,sha256=OLesoPJ17oBfB2lJ-hGZ_8WhxLk3PJW8-kVQg-wjcWc,36747
 casashell/private/splattotable.py,sha256=bAZu1oUGILOeHnZk91V2NngJPIYTx1JwuptDPY-BzXk,12577
 casashell/private/split.py,sha256=_yH2MOGNZ9cfPsDXvr4iZ8_ZtoMIWEL5K4JshNQF5sI,48466
 casashell/private/spxfit.py,sha256=uSKUir1TNzhGVR4Tm-D79nZfhehFZylzNpNmw75KbDs,59838
 casashell/private/stack_manip.py,sha256=TxkYtwD4GbUC2ZvBa4cu2HAQ7dV3h-wiCX8k2cYsCj8,869
 casashell/private/statwt.py,sha256=8McRMeV4mqSk3_Ai2HAwFQngVjq_Hqsi_dFWLQfv1OI,61983
-casashell/private/tclean.py,sha256=hreLst0JQzRBCTYxkiXThFH_-LJnOv5Zau4t4u442qA,301380
+casashell/private/tclean.py,sha256=_pkqGYJadGpKCPip7LVEgYK013WsWJh8qT-he_eU1ZI,307803
 casashell/private/testconcat.py,sha256=8GG6p7LehAg5F0MCnNGzhz4ekhaqAtgueORcVtB9pbU,18032
-casashell/private/tsdimaging.py,sha256=36GZyXo8sEmQnauxaHR1_sk3Hm4-8_1OkMnrmj2tJVI,78345
-casashell/private/userconfig.py,sha256=F7tO1iPkKc9Zj36AYNvx0nYnRsi5fVzgurnTk53aKko,1851
+casashell/private/tsdimaging.py,sha256=GH6aFrjzdMTEmYUH1DB0FKtUJC6A9p-aTu6U4oMZAqk,80454
 casashell/private/uvcontsub.py,sha256=8jcbIBACijZCnf6VF66wZQ-SrRmhprM8huV6fHN57VY,35768
 casashell/private/uvcontsub_old.py,sha256=jDRy_oi1ErLQDy45hniQS4pSdIb_KEJS4GTrjBQICVo,27241
 casashell/private/uvmodelfit.py,sha256=Mf3eNoFqLnnfRInvQGksJ4qHpB_0vWZGubCitZWXOa0,34504
 casashell/private/uvsub.py,sha256=j45G9q2lFhkLgpJ5nq8fXbkNQ_O3kaIKaT3B6nBHGVo,13030
 casashell/private/virtualconcat.py,sha256=7QXmGAx41edgAgNJ22-a5muz6rj0B6pGyvC1-vQ9Alw,25730
 casashell/private/vishead.py,sha256=MmVVP0_GbgLulqKd8wXiuzTwHS8IQgatN0RlTakgdoI,20566
 casashell/private/visstat.py,sha256=kUdFKO3nX7DltExq6sf1f_fuIf6n6Z-nb9LPqDffpjU,56677
-casashell/private/widebandpbcor.py,sha256=8wGkD6IUd3RSITC8p6NQbIymCVfFum__hvuekO-awmA,33392
-casashell/private/ttconfig/casataskrc.py,sha256=_sie-dNif9qbfOT5zrflPacDRsjc_UdyAueBk2n5Bfc,1954
-casashell/private/ttconfig/casatoolrc.py,sha256=1xLRWHaZsR9ilPJGfJH8mFy3uXGs73ijI7TEoROnTFQ,1880
-casashell-6.6.3.22.dist-info/METADATA,sha256=vhl5KJZKyEPCPlS31JwyEDMnjcSeiKygXe51H3g8rSs,688
-casashell-6.6.3.22.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
-casashell-6.6.3.22.dist-info/top_level.txt,sha256=Gn_39xMzFor22wcrMrG5A1RxRRsZG2H1QRKLueke_pE,10
-casashell-6.6.3.22.dist-info/RECORD,,
+casashell/private/widebandpbcor.py,sha256=ajiHHw1xnHZf5oiDMuuKDv3ykWvi_OuuXCll_YWvOHM,33393
+casashell-6.6.4.34.dist-info/METADATA,sha256=4rcBCpO_fZXD5QM1LGUBzI6PS62W6dsjueoaXdUZqb0,688
+casashell-6.6.4.34.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+casashell-6.6.4.34.dist-info/top_level.txt,sha256=Gn_39xMzFor22wcrMrG5A1RxRRsZG2H1QRKLueke_pE,10
+casashell-6.6.4.34.dist-info/RECORD,,
```

